<header class="article-header">
<h1 class="article-title">Zookeeper å®¢æˆ·ç«¯</h1>
</header>
<div class="article-entry">
<blockquote>
<p>æœ¬æ–‡åŸºäº Dubbo 2.6.1 ç‰ˆæœ¬ï¼Œæœ›çŸ¥æ‚‰ã€‚</p>
</blockquote>
<h1 id="1-æ¦‚è¿°">1. æ¦‚è¿°</h1>
<p>åœ¨&nbsp;<code>dubbo-remoting-zookeeper</code>&nbsp;æ¨¡å—ï¼Œå®ç°äº† Dubbo å¯¹ Zookeeper å®¢æˆ·ç«¯çš„å°è£…ã€‚åœ¨è¯¥æ¨¡å—ä¸­ï¼ŒæŠ½è±¡äº†<strong>é€šç”¨</strong>çš„ Zookeeper Client API æ¥å£ï¼Œå®ç°äº†<strong>ä¸¤ç§</strong>&nbsp;Zookeeper Client åº“çš„æ¥å…¥ï¼š</p>
<ul>
<li>
<p>åŸºäº&nbsp;<a href="https://curator.apache.org/" target="_blank" rel="external nofollow noopener noreferrer">Apache Curator</a>&nbsp;å®ç°ã€‚</p>
<figure class="highlight xml">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">"zookeeper://127.0.0.1:2181"</span> <span class="attr">client</span>=<span class="string">"curator"</span> /&gt;</span></span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p>åŸºäº&nbsp;<a href="https://github.com/sgroschupf/zkclient" target="_blank" rel="external nofollow noopener noreferrer">ZkClient</a>&nbsp;å®ç°ã€‚</p>
<figure class="highlight xml">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">"zookeeper://127.0.0.1:2181"</span> <span class="attr">client</span>=<span class="string">"zkclient"</span> /&gt;</span></span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
</ul>
<p>é»˜è®¤ä¸é…ç½®&nbsp;<code>client</code>&nbsp;çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ Curator ã€‚</p>
<hr />
<p><code>dubbo-remoting-zookeeper</code>&nbsp;çš„æ•´ä½“ç±»å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Dubbo/2018_07_01/01.png" alt="ç±»å›¾" /></p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æŒ‰ç…§æ¥å£åˆ°å®ç°çš„é¡ºåºï¼Œå¾€ä¸‹çœ‹ã€‚</p>
<h1 id="2-æ¥å£">2. æ¥å£</h1>
<h2 id="2-1-StateListener">2.1 StateListener</h2>
<p><code>com.alibaba.dubbo.remoting.zookeeper.StateListener</code>&nbsp;ï¼ŒçŠ¶æ€ç›‘å¬å™¨æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StateListener</span> </span>{</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * çŠ¶æ€ - å·²æ–­å¼€</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">int</span> DISCONNECTED = <span class="number">0</span>;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * çŠ¶æ€ - å·²è¿æ¥</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">int</span> CONNECTED = <span class="number">1</span>;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * çŠ¶æ€ - å·²é‡è¿</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">int</span> RECONNECTED = <span class="number">2</span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * çŠ¶æ€å˜æ›´å›è°ƒ</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> connected çŠ¶æ€</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">stateChanged</span><span class="params">(<span class="keyword">int</span> connected)</span></span>;</span><br /><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h2 id="2-2-ChildListener">2.2 ChildListener</h2>
<p><code>com.alibaba.dubbo.remoting.zookeeper.StateListener</code>&nbsp;ï¼ŒèŠ‚ç‚¹ç›‘å¬å™¨æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ChildListener</span> </span>{</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * å­èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–çš„å›è°ƒ</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> path èŠ‚ç‚¹</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> children æœ€æ–°çš„å­èŠ‚ç‚¹åˆ—è¡¨</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">childChanged</span><span class="params">(String path, List&lt;String&gt; children)</span></span>;</span><br /><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h2 id="2-3-ZookeeperClient">2.3 ZookeeperClient</h2>
<p><code>com.alibaba.dubbo.remoting.zookeeper.ZookeeperClient</code>&nbsp;ï¼ŒZookeeper å®¢æˆ·ç«¯æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ZookeeperClient</span> </span>{</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * åˆ›å»ºèŠ‚ç‚¹</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> path èŠ‚ç‚¹è·¯å¾„</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> ephemeral æ˜¯å¦ä¸´æ—¶èŠ‚ç‚¹</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">create</span><span class="params">(String path, <span class="keyword">boolean</span> ephemeral)</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * åˆ é™¤èŠ‚ç‚¹</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> path èŠ‚ç‚¹è·¯å¾„</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(String path)</span></span>;</span><br /><br /><span class="line">    <span class="function">List&lt;String&gt; <span class="title">getChildren</span><span class="params">(String path)</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ·»åŠ  ChildListener</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> path èŠ‚ç‚¹è·¯å¾„</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> listener ç›‘å¬å™¨</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@return</span> å­èŠ‚ç‚¹åˆ—è¡¨</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function">List&lt;String&gt; <span class="title">addChildListener</span><span class="params">(String path, ChildListener listener)</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * ç§»é™¤ ChildListener</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> path èŠ‚ç‚¹è·¯å¾„</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> listener ç›‘å¬å™¨</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeChildListener</span><span class="params">(String path, ChildListener listener)</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ·»åŠ  StateListener</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> listener ç›‘å¬å™¨</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addStateListener</span><span class="params">(StateListener listener)</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * ç§»é™¤ StateListener</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> listener ç›‘å¬å™¨</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeStateListener</span><span class="params">(StateListener listener)</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦è¿æ¥</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">()</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * å…³é—­</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@return</span> è·å¾—æ³¨å†Œä¸­å¿ƒ URL</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function">URL <span class="title">getUrl</span><span class="params">()</span></span>;</span><br /><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>çŠ¶æ€ç›¸å…³æ–¹æ³•
<ul>
<li><code>#isConnected()</code></li>
<li><code>#close()</code></li>
<li><code>#getUrl()</code></li>
</ul>
</li>
<li>æ•°æ®ç›¸å…³æ–¹æ³•
<ul>
<li><code>#create(path, ephemeral)</code></li>
<li><code>#getChildren(path)</code></li>
<li>ä» API ä¸Šï¼ŒDubbo åªä½¿ç”¨èŠ‚ç‚¹çš„è·¯å¾„ï¼Œè€Œä¸ä½¿ç”¨èŠ‚ç‚¹çš„å€¼ï¼ˆå†…å®¹ï¼‰ã€‚</li>
</ul>
</li>
<li>ç›‘å¬ç›¸å…³æ–¹æ³•
<ul>
<li><code>#addChildListener(path, listener)</code></li>
<li><code>#removeChildListener(path, listener)</code></li>
<li><code>#addStateListener(listener)</code></li>
<li><code>#removeStateListener(listener)</code></li>
</ul>
</li>
</ul>
<h2 id="2-4-AbstractZookeeperClient">2.4 AbstractZookeeperClient</h2>
<p><code>com.alibaba.dubbo.remoting.zookeeper.support.AbstractZookeeperClient</code>&nbsp;ï¼Œå®ç° ZookeeperClient æ¥å£ï¼ŒZookeeper å®¢æˆ·ç«¯<strong>æŠ½è±¡ç±»</strong>ï¼Œå®ç°é€šç”¨çš„é€»è¾‘ã€‚</p>
<h3 id="2-4-1-å±æ€§">2.4.1 å±æ€§</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractZookeeperClient</span>&lt;<span class="title">TargetChildListener</span>&gt; <span class="keyword">implements</span> <span class="title">ZookeeperClient</span> </span>{</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ³¨å†Œä¸­å¿ƒ URL</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> URL url;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * StateListener é›†åˆ</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Set&lt;StateListener&gt; stateListeners = <span class="keyword">new</span> CopyOnWriteArraySet&lt;StateListener&gt;();</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * ChildListener é›†åˆ</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * key1ï¼šèŠ‚ç‚¹è·¯å¾„</span></span><br /><span class="line"><span class="comment">     * key2ï¼šChildListener å¯¹è±¡</span></span><br /><span class="line"><span class="comment">     * value ï¼šç›‘å¬å™¨å…·ä½“å¯¹è±¡ã€‚ä¸åŒ Zookeeper å®¢æˆ·ç«¯ï¼Œå®ç°ä¼šä¸åŒã€‚</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ConcurrentMap&lt;String, ConcurrentMap&lt;ChildListener, TargetChildListener&gt;&gt; childListeners = <span class="keyword">new</span> ConcurrentHashMap&lt;String, ConcurrentMap&lt;ChildListener, TargetChildListener&gt;&gt;();</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ˜¯å¦å…³é—­</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> closed = <span class="keyword">false</span>;</span><br /><br /><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractZookeeperClient</span><span class="params">(URL url)</span> </span>{</span><br /><span class="line">        <span class="keyword">this</span>.url = url;</span><br /><span class="line">    }</span><br /><br /><span class="line">    <span class="meta">@Override</span></span><br /><span class="line">    <span class="function"><span class="keyword">public</span> URL <span class="title">getUrl</span><span class="params">()</span> </span>{</span><br /><span class="line">        <span class="keyword">return</span> url;</span><br /><span class="line">    }</span><br />    <br /><span class="line">    <span class="comment">// ... çœç•¥å…¶ä»–æ–¹æ³•</span></span><br />    <br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<p>ğŸ™‚ è§ä»£ç æ³¨é‡Šã€‚</p>
<h3 id="2-4-2-create">2.4.2 create</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">(String path, <span class="keyword">boolean</span> ephemeral)</span> </span>{</span><br /><span class="line">    <span class="comment">// å¾ªç¯åˆ›å»ºçˆ¶è·¯å¾„</span></span><br /><span class="line">    <span class="keyword">int</span> i = path.lastIndexOf(<span class="string">'/'</span>);</span><br /><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>) {</span><br /><span class="line">        String parentPath = path.substring(<span class="number">0</span>, i);</span><br /><span class="line">        <span class="keyword">if</span> (!checkExists(parentPath)) {</span><br /><span class="line">            create(parentPath, <span class="keyword">false</span>);</span><br /><span class="line">        }</span><br /><span class="line">    }</span><br /><span class="line">    <span class="comment">// åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹</span></span><br /><span class="line">    <span class="keyword">if</span> (ephemeral) {</span><br /><span class="line">        createEphemeral(path);</span><br /><span class="line">    <span class="comment">// åˆ›å»ºæŒä¹…èŠ‚ç‚¹</span></span><br /><span class="line">    } <span class="keyword">else</span> {</span><br /><span class="line">        createPersistent(path);</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>
<p><code>#checkExists(path)</code>&nbsp;<strong>æŠ½è±¡</strong>æ–¹æ³•ï¼ŒèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">checkExists</span><span class="params">(String path)</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p><code>#createEphemeral(path)</code>&nbsp;<strong>æŠ½è±¡</strong>æ–¹æ³•ï¼Œåˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">createPersistent</span><span class="params">(String path)</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p><code>#createPersistent(path)</code>&nbsp;<strong>æŠ½è±¡</strong>æ–¹æ³•ï¼Œåˆ›å»ºæŒä¹…èŠ‚ç‚¹ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">createEphemeral</span><span class="params">(String path)</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
</ul>
<h3 id="2-4-3-StateListener-ç›¸å…³æ–¹æ³•">2.4.3 StateListener ç›¸å…³æ–¹æ³•</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addStateListener</span><span class="params">(StateListener listener)</span> </span>{</span><br /><span class="line">    stateListeners.add(listener);</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeStateListener</span><span class="params">(StateListener listener)</span> </span>{</span><br /><span class="line">    stateListeners.remove(listener);</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;StateListener&gt; <span class="title">getSessionListeners</span><span class="params">()</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> stateListeners;</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="comment">/**</span></span><br /><span class="line"><span class="comment"> * StateListener æ•°ç»„ï¼Œå›è°ƒ</span></span><br /><span class="line"><span class="comment"> *</span></span><br /><span class="line"><span class="comment"> * <span class="doctag">@param</span> state çŠ¶æ€</span></span><br /><span class="line"><span class="comment"> */</span></span><br /><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">stateChanged</span><span class="params">(<span class="keyword">int</span> state)</span> </span>{</span><br /><span class="line">    <span class="keyword">for</span> (StateListener sessionListener : getSessionListeners()) {</span><br /><span class="line">        sessionListener.stateChanged(state);</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h3 id="2-4-4-ChildListener-ç›¸å…³æ–¹æ³•">2.4.4 ChildListener ç›¸å…³æ–¹æ³•</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">addChildListener</span><span class="params">(String path, <span class="keyword">final</span> ChildListener listener)</span> </span>{</span><br /><span class="line">    <span class="comment">// è·å¾—è·¯å¾„ä¸‹çš„ç›‘å¬å™¨æ•°ç»„</span></span><br /><span class="line">    ConcurrentMap&lt;ChildListener, TargetChildListener&gt; listeners = childListeners.get(path);</span><br /><span class="line">    <span class="keyword">if</span> (listeners == <span class="keyword">null</span>) {</span><br /><span class="line">        childListeners.putIfAbsent(path, <span class="keyword">new</span> ConcurrentHashMap&lt;ChildListener, TargetChildListener&gt;());</span><br /><span class="line">        listeners = childListeners.get(path);</span><br /><span class="line">    }</span><br /><span class="line">    <span class="comment">// è·å¾—æ˜¯å¦å·²ç»æœ‰è¯¥ç›‘å¬å™¨</span></span><br /><span class="line">    TargetChildListener targetListener = listeners.get(listener);</span><br /><span class="line">    <span class="comment">// ç›‘å¬å™¨ä¸å­˜åœ¨ï¼Œè¿›è¡Œåˆ›å»º</span></span><br /><span class="line">    <span class="keyword">if</span> (targetListener == <span class="keyword">null</span>) {</span><br /><span class="line">        listeners.putIfAbsent(listener, createTargetChildListener(path, listener));</span><br /><span class="line">        targetListener = listeners.get(listener);</span><br /><span class="line">    }</span><br /><span class="line">    <span class="comment">// å‘ Zookeeper ï¼ŒçœŸæ­£å‘èµ·è®¢é˜…</span></span><br /><span class="line">    <span class="keyword">return</span> addTargetChildListener(path, targetListener);</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeChildListener</span><span class="params">(String path, ChildListener listener)</span> </span>{</span><br /><span class="line">    ConcurrentMap&lt;ChildListener, TargetChildListener&gt; listeners = childListeners.get(path);</span><br /><span class="line">    <span class="keyword">if</span> (listeners != <span class="keyword">null</span>) {</span><br /><span class="line">        TargetChildListener targetListener = listeners.remove(listener);</span><br /><span class="line">        <span class="keyword">if</span> (targetListener != <span class="keyword">null</span>) {</span><br /><span class="line">            <span class="comment">// å‘ Zookeeper ï¼ŒçœŸæ­£å‘èµ·å–æ¶ˆè®¢é˜…</span></span><br /><span class="line">            removeTargetChildListener(path, targetListener);</span><br /><span class="line">        }</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>
<p><code>#createTargetChildListener(path, listener)</code>&nbsp;<strong>æŠ½è±¡</strong>æ–¹æ³•ï¼Œåˆ›å»ºçœŸæ­£çš„ ChildListener å¯¹è±¡ã€‚å› ä¸ºï¼Œæ¯ä¸ª Zookeeper çš„åº“ï¼Œå®ç°ä¸åŒã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> TargetChildListener <span class="title">createTargetChildListener</span><span class="params">(String path, ChildListener listener)</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p><code>#addTargetChildListener(path, targetListener)</code>&nbsp;<strong>æŠ½è±¡</strong>æ–¹æ³•ï¼Œå‘ Zookeeper ï¼ŒçœŸæ­£å‘èµ·è®¢é˜…ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> List&lt;String&gt; <span class="title">addTargetChildListener</span><span class="params">(String path, TargetChildListener listener)</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p><code>#removeTargetChildListener(path, targetListener)</code>&nbsp;<strong>æŠ½è±¡</strong>æ–¹æ³•ï¼Œå‘ Zookeeper ï¼ŒçœŸæ­£å‘èµ·å–æ¶ˆè®¢é˜…ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">removeTargetChildListener</span><span class="params">(String path, TargetChildListener listener)</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
</ul>
<h3 id="2-4-5-close">2.4.5 close</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>{</span><br /><span class="line">    <span class="keyword">if</span> (closed) {</span><br /><span class="line">        <span class="keyword">return</span>;</span><br /><span class="line">    }</span><br /><span class="line">    closed = <span class="keyword">true</span>;</span><br /><span class="line">    <span class="keyword">try</span> {</span><br /><span class="line">        doClose();</span><br /><span class="line">    } <span class="keyword">catch</span> (Throwable t) {</span><br /><span class="line">        logger.warn(t.getMessage(), t);</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>
<p><code>#doClose()</code>&nbsp;<strong>æŠ½è±¡</strong>æ–¹æ³•ï¼Œå…³é—­ Zookeeper è¿æ¥ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">doClose</span><span class="params">()</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
</ul>
<h2 id="2-5-ZookeeperTransporter">2.5 ZookeeperTransporter</h2>
<p><code>com.alibaba.dubbo.remoting.zookeeper.ZookeeperTransporter</code>&nbsp;ï¼ŒZookeeper å·¥å‚æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@SPI</span>(<span class="string">"curator"</span>)</span><br /><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ZookeeperTransporter</span> </span>{</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * è¿æ¥åˆ›å»º ZookeeperClient å¯¹è±¡</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@param</span> url æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br /><span class="line"><span class="comment">     * <span class="doctag">@return</span> ZookeeperClient å¯¹è±¡</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="meta">@Adaptive</span>({Constants.CLIENT_KEY, Constants.TRANSPORTER_KEY})</span><br /><span class="line">    <span class="function">ZookeeperClient <span class="title">connect</span><span class="params">(URL url)</span></span>;</span><br /><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li><code>#connect(url)</code>&nbsp;æ–¹æ³•ï¼Œè¿æ¥åˆ›å»º ZookeeperClient å¯¹è±¡ã€‚</li>
<li><code>@SPI("curator")</code>&nbsp;æ³¨è§£ï¼Œä½¿ç”¨ Dubbo SPI æœºåˆ¶ï¼Œé»˜è®¤ä½¿ç”¨ Curator å®ç°ã€‚</li>
<li><code>@Adaptive({Constants.CLIENT_KEY, Constants.TRANSPORTER_KEY})</code>&nbsp;æ³¨è§£ï¼Œä½¿ç”¨ Dubbo SPI Adaptive æœºåˆ¶ï¼Œæ ¹æ®&nbsp;<code>url</code>&nbsp;å‚æ•°ï¼ŒåŠ è½½å¯¹åº”çš„ ZookeeperTransporter æ‹“å±•å®ç°ç±»ã€‚</li>
</ul>
<h1 id="3-åŸºäº-Curator-å®ç°">3. åŸºäº Curator å®ç°</h1>
<p>Apache Curator ï¼Œä½œä¸º Zookeeper å®¢æˆ·ç«¯çš„åº“ï¼ŒåŸºæœ¬æ˜¯<strong>æœ€ä½³</strong>çš„é€‰æ‹©ï¼Œåœ¨ Sharding-JDBCã€Elastic-Job ç­‰ç­‰ä¸­é—´éƒ½é€‰æ‹©äº† Curator è¿æ¥ Zookeeper ã€‚</p>
<blockquote>
<p>å‹æƒ…æç¤ºï¼Œå¦‚æœå¯¹ Curator çš„ API ä¸ç†Ÿæ‚‰çš„èƒ–å‹ï¼Œæ¨èçœ‹ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œè¿›è¡Œä¸‹å­¦ä¹ ã€‚<br />ğŸ™‚ æœ¬æ–‡ä¸ä¼šå†™ Curator ä½¿ç”¨æ–¹æ³•ã€‚</p>
</blockquote>
<h2 id="3-1-CuratorZookeeperClient">3.1 CuratorZookeeperClient</h2>
<p><code>com.alibaba.dubbo.remoting.zookeeper.curator.CuratorZookeeperClient</code>&nbsp;ï¼Œå®ç° ZookeeperTransporter æŠ½è±¡ç±»ï¼ŒåŸºäº Curator çš„ Zookeeper å®¢æˆ·ç«¯å®ç°ç±»ã€‚</p>
<h3 id="3-1-1-å±æ€§">3.1.1 å±æ€§</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="comment">/**</span></span><br /><span class="line"><span class="comment"> * client å¯¹è±¡</span></span><br /><span class="line"><span class="comment"> */</span></span><br /><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> CuratorFramework client;</span><br /><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">CuratorZookeeperClient</span><span class="params">(URL url)</span> </span>{</span><br /><span class="line">    <span class="keyword">super</span>(url);</span><br /><span class="line">    <span class="keyword">try</span> {</span><br /><span class="line">        <span class="comment">// åˆ›å»º client å¯¹è±¡</span></span><br /><span class="line">        CuratorFrameworkFactory.Builder builder = CuratorFrameworkFactory.builder()</span><br /><span class="line">                .connectString(url.getBackupAddress()) <span class="comment">// è¿æ¥åœ°å€</span></span><br /><span class="line">                .retryPolicy(<span class="keyword">new</span> RetryNTimes(<span class="number">1</span>, <span class="number">1000</span>)) <span class="comment">// é‡è¯•ç­–ç•¥ï¼Œ1 æ¬¡ï¼Œé—´éš” 1000 ms</span></span><br /><span class="line">                .connectionTimeoutMs(<span class="number">5000</span>); <span class="comment">// è¿æ¥è¶…æ—¶æ—¶é—´</span></span><br /><span class="line">        String authority = url.getAuthority();</span><br /><span class="line">        <span class="keyword">if</span> (authority != <span class="keyword">null</span> &amp;&amp; authority.length() &gt; <span class="number">0</span>) {</span><br /><span class="line">            builder = builder.authorization(<span class="string">"digest"</span>, authority.getBytes());</span><br /><span class="line">        }</span><br /><span class="line">        client = builder.build();</span><br /><span class="line">        <span class="comment">// æ·»åŠ è¿æ¥ç›‘å¬å™¨</span></span><br /><span class="line">        client.getConnectionStateListenable().addListener(<span class="keyword">new</span> ConnectionStateListener() {</span><br /><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stateChanged</span><span class="params">(CuratorFramework client, ConnectionState state)</span> </span>{</span><br /><span class="line">                <span class="keyword">if</span> (state == ConnectionState.LOST) {</span><br /><span class="line">                    CuratorZookeeperClient.<span class="keyword">this</span>.stateChanged(StateListener.DISCONNECTED);</span><br /><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (state == ConnectionState.CONNECTED) {</span><br /><span class="line">                    CuratorZookeeperClient.<span class="keyword">this</span>.stateChanged(StateListener.CONNECTED);</span><br /><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (state == ConnectionState.RECONNECTED) {</span><br /><span class="line">                    CuratorZookeeperClient.<span class="keyword">this</span>.stateChanged(StateListener.RECONNECTED);</span><br /><span class="line">                }</span><br /><span class="line">            }</span><br /><span class="line">        });</span><br /><span class="line">        <span class="comment">// å¯åŠ¨ client</span></span><br /><span class="line">        client.start();</span><br /><span class="line">    } <span class="keyword">catch</span> (Exception e) {</span><br /><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>åœ¨è¿æ¥çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè°ƒç”¨&nbsp;<code>#stateChange(state)</code>&nbsp;æ–¹æ³•ï¼Œè¿›è¡Œ StateListener çš„å›è°ƒã€‚</li>
</ul>
<h3 id="3-1-2-create-ç›¸å…³æ–¹æ³•">3.1.2 create ç›¸å…³æ–¹æ³•</h3>
<ul>
<li><a href="https://github.com/YunaiV/dubbo/blob/414a4799cef08f0b5263d838eeaf8d8f169f2cdc/dubbo-remoting/dubbo-remoting-zookeeper/src/main/java/com/alibaba/dubbo/remoting/zookeeper/curator/CuratorZookeeperClient.java#L72-L79" target="_blank" rel="external nofollow noopener noreferrer"><code>#createPersistent(path)</code></a></li>
<li><a href="https://github.com/YunaiV/dubbo/blob/414a4799cef08f0b5263d838eeaf8d8f169f2cdc/dubbo-remoting/dubbo-remoting-zookeeper/src/main/java/com/alibaba/dubbo/remoting/zookeeper/curator/CuratorZookeeperClient.java#L81-L88" target="_blank" rel="external nofollow noopener noreferrer"><code>#createEphemeral(path)</code></a></li>
<li><a href="https://github.com/YunaiV/dubbo/blob/414a4799cef08f0b5263d838eeaf8d8f169f2cdc/dubbo-remoting/dubbo-remoting-zookeeper/src/main/java/com/alibaba/dubbo/remoting/zookeeper/curator/CuratorZookeeperClient.java#L109-L117" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkExists(path)</code></a></li>
</ul>
<h3 id="3-1-3-ChildListener-ç›¸å…³æ–¹æ³•">3.1.3 ChildListener ç›¸å…³æ–¹æ³•</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">public</span> CuratorWatcher <span class="title">createTargetChildListener</span><span class="params">(String path, ChildListener listener)</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CuratorWatcherImpl(listener);</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">addTargetChildListener</span><span class="params">(String path, CuratorWatcher listener)</span> </span>{</span><br /><span class="line">    <span class="keyword">try</span> {</span><br /><span class="line">        <span class="keyword">return</span> client.getChildren().usingWatcher(listener).forPath(path);</span><br /><span class="line">    } <span class="keyword">catch</span> (NoNodeException e) {</span><br /><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br /><span class="line">    } <span class="keyword">catch</span> (Exception e) {</span><br /><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line">    }</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeTargetChildListener</span><span class="params">(String path, CuratorWatcher listener)</span> </span>{</span><br /><span class="line">    ((CuratorWatcherImpl) listener).unwatch();</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">CuratorWatcherImpl</span> <span class="keyword">implements</span> <span class="title">CuratorWatcher</span> </span>{</span><br /><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> ChildListener listener;</span><br /><br /><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CuratorWatcherImpl</span><span class="params">(ChildListener listener)</span> </span>{</span><br /><span class="line">        <span class="keyword">this</span>.listener = listener;</span><br /><span class="line">    }</span><br /><br /><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unwatch</span><span class="params">()</span> </span>{</span><br /><span class="line">        <span class="keyword">this</span>.listener = <span class="keyword">null</span>;</span><br /><span class="line">    }</span><br /><br /><span class="line">    <span class="meta">@Override</span></span><br /><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(WatchedEvent event)</span> <span class="keyword">throws</span> Exception </span>{</span><br /><span class="line">        <span class="keyword">if</span> (listener != <span class="keyword">null</span>) {</span><br /><span class="line">            String path = event.getPath() == <span class="keyword">null</span> ? <span class="string">""</span> : event.getPath();</span><br /><span class="line">            listener.childChanged(path,</span><br /><span class="line">                    <span class="comment">// if path is null, curator using watcher will throw NullPointerException.</span></span><br /><span class="line">                    <span class="comment">// if client connect or disconnect to server, zookeeper will queue</span></span><br /><span class="line">                    <span class="comment">// watched event(Watcher.Event.EventType.None, .., path = null).</span></span><br /><span class="line">                    StringUtils.isNotEmpty(path)</span><br /><span class="line">                            ? client.getChildren().usingWatcher(<span class="keyword">this</span>).forPath(path) <span class="comment">// é‡æ–°å‘èµ·è¿æ¥ï¼Œå¹¶ä¼ å…¥æœ€æ–°çš„å­èŠ‚ç‚¹åˆ—è¡¨</span></span><br /><span class="line">                            : Collections.&lt;String&gt;emptyList()); <span class="comment">//</span></span><br /><span class="line">        }</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h3 id="3-1-4-close-ç›¸å…³æ–¹æ³•">3.1.4 close ç›¸å…³æ–¹æ³•</h3>
<ul>
<li><a href="https://github.com/YunaiV/dubbo/blob/414a4799cef08f0b5263d838eeaf8d8f169f2cdc/dubbo-remoting/dubbo-remoting-zookeeper/src/main/java/com/alibaba/dubbo/remoting/zookeeper/curator/CuratorZookeeperClient.java#L122-L124" target="_blank" rel="external nofollow noopener noreferrer"><code>#doClose()</code></a></li>
</ul>
<h3 id="3-1-5-delete">3.1.5 delete</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(String path)</span> </span>{</span><br /><span class="line">    <span class="keyword">try</span> {</span><br /><span class="line">        client.delete().forPath(path);</span><br /><span class="line">    } <span class="keyword">catch</span> (NoNodeException e) {</span><br /><span class="line">    } <span class="keyword">catch</span> (Exception e) {</span><br /><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<p>æ— æ³•é€šç”¨ï¼Œæ‰€ä»¥å­ç±»å®ç°ã€‚</p>
<h3 id="3-1-6-getChildren">3.1.6 getChildren</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getChildren</span><span class="params">(String path)</span> </span>{</span><br /><span class="line">    <span class="keyword">try</span> {</span><br /><span class="line">        <span class="keyword">return</span> client.getChildren().forPath(path);</span><br /><span class="line">    } <span class="keyword">catch</span> (NoNodeException e) {</span><br /><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br /><span class="line">    } <span class="keyword">catch</span> (Exception e) {</span><br /><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h2 id="3-2-CuratorZookeeperTransporter">3.2 CuratorZookeeperTransporter</h2>
<p><code>com.alibaba.dubbo.remoting.zookeeper.curator.CuratorZookeeperTransporter</code>&nbsp;ï¼Œå®ç° ZookeeperTransporter æ¥å£ï¼ŒCuratorZookeeper å·¥å‚å®ç°ç±»ã€‚</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CuratorZookeeperTransporter</span> <span class="keyword">implements</span> <span class="title">ZookeeperTransporter</span> </span>{</span><br /><br /><span class="line">    <span class="function"><span class="keyword">public</span> ZookeeperClient <span class="title">connect</span><span class="params">(URL url)</span> </span>{</span><br /><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CuratorZookeeperClient(url);</span><br /><span class="line">    }</span><br /><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h1 id="4-åŸºäº-ZkClient-å®ç°">4. åŸºäº ZkClient å®ç°</h1>
<p>ğŸ™‚ åŸºäº ZkClient çš„å®ç°ï¼Œæœ¬æ–‡ä»…åˆ—å‡ºæ ‡é¢˜ã€‚æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥è‡ªå·±å»çœ‹ã€‚</p>
<p>å½“ç„¶ï¼Œè‰¯å¿ƒå¦‚ç¬”è€…ï¼Œå·²ç»æ·»åŠ äº†ä¸­æ–‡æ³¨é‡Šã€‚</p>
<h2 id="4-1-ZkclientZookeeperClient">4.1 ZkclientZookeeperClient</h2>
<p><a href="https://github.com/YunaiV/dubbo/blob/66a1e1b0ef4b01175be148d27fdcf519f4f01b15/dubbo-remoting/dubbo-remoting-zookeeper/src/main/java/com/alibaba/dubbo/remoting/zookeeper/zkclient/ZkclientZookeeperClient.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.remoting.zookeeper.zkclient.ZkclientZookeeperClient</code></a></p>
<h3 id="4-1-1-ZkClientWrapper">4.1.1 ZkClientWrapper</h3>
<p><a href="https://github.com/YunaiV/dubbo/blob/66a1e1b0ef4b01175be148d27fdcf519f4f01b15/dubbo-remoting/dubbo-remoting-zookeeper/src/main/java/com/alibaba/dubbo/remoting/zookeeper/zkclient/ZkClientWrapper.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.remoting.zookeeper.zkclient.ZkClientWrapper</code></a></p>
<h2 id="4-2-ZkclientZookeeperTransporter">4.2 ZkclientZookeeperTransporter</h2>
<p><a href="https://github.com/YunaiV/dubbo/blob/66a1e1b0ef4b01175be148d27fdcf519f4f01b15/dubbo-remoting/dubbo-remoting-zookeeper/src/main/java/com/alibaba/dubbo/remoting/zookeeper/zkclient/ZkclientZookeeperTransporter.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.remoting.zookeeper.zkclient.ZkclientZookeeperTransporter</code></a></p>
</div>