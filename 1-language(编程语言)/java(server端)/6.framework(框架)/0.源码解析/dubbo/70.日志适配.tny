<header class="article-header">
<h1 class="article-title">æ—¥å¿—é€‚é…</h1>
</header>
<div class="article-entry">
<blockquote>
<p>æœ¬æ–‡åŸºäº Dubbo 2.6.1 ç‰ˆæœ¬ï¼Œæœ›çŸ¥æ‚‰ã€‚</p>
</blockquote>
<h1 id="1-æ¦‚è¿°">1. æ¦‚è¿°</h1>
<p>æœ¬æ–‡åˆ†äº« Dubbo çš„<strong>æ—¥å¿—é€‚é…</strong>ï¼Œå¯¹åº”æ–‡æ¡£ä¸ºï¼š</p>
<ul>
<li><a href="http://dubbo.apache.org/zh-cn/docs/user/demos/logger-strategy.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; æ—¥å¿—é€‚é…ã€‹</a></li>
<li><a href="http://dubbo.apache.org/zh-cn/docs/dev/impls/logger-adapter.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo å¼€å‘æŒ‡å— &mdash;&mdash; æ—¥å¿—é€‚é…æ‹“å±•ã€‹</a></li>
</ul>
<blockquote>
<p>è‡ª&nbsp;<code>2.2.1</code>&nbsp;å¼€å§‹ï¼Œdubbo å¼€å§‹å†…ç½® log4jã€slf4jã€jclã€jdk è¿™äº›æ—¥å¿—æ¡†æ¶çš„é€‚é…&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/demos/logger-strategy.html#fn_1" target="_blank" rel="external nofollow noopener noreferrer">1</a></p>
</blockquote>
<p>æ•´ä½“ç±»å›¾å¦‚ä¸‹ï¼š<img src="http://static2.iocoder.cn/images/Dubbo/2019_06_05/01.png" alt="ç±»å›¾" /></p>
<h1 id="2-LoggerFactory">2. LoggerFactory</h1>
<p><code>com.alibaba.dubbo.common.logger.LoggerFactory</code>&nbsp;ï¼Œæ˜¯&nbsp;<code>com.alibaba.dubbo.common.logger.Logger</code>&nbsp;çš„å·¥å‚ç±»ã€‚</p>
<h2 id="2-1-æ„é€ æ–¹æ³•">2.1 æ„é€ æ–¹æ³•</h2>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="comment">/**</span></span><br /><span class="line"><span class="comment"> * å·²åˆ›å»ºçš„ Logger å¯¹åº”çš„æ˜ å°„</span></span><br /><span class="line"><span class="comment"> *</span></span><br /><span class="line"><span class="comment"> * keyï¼šç±»å</span></span><br /><span class="line"><span class="comment"> */</span></span><br /><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ConcurrentMap&lt;String, FailsafeLogger&gt; LOGGERS = <span class="keyword">new</span> ConcurrentHashMap&lt;String, FailsafeLogger&gt;();</span><br /><span class="line"><span class="comment">/**</span></span><br /><span class="line"><span class="comment"> * å½“å‰ä½¿ç”¨çš„ LoggerAdapter æ—¥å¿—é€‚é…å™¨</span></span><br /><span class="line"><span class="comment"> */</span></span><br /><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> LoggerAdapter LOGGER_ADAPTER;</span><br />    <br /><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">LoggerFactory</span><span class="params">()</span> </span>{}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>é€šè¿‡<strong>è®¾ç½®</strong>çš„&nbsp;<code>LOGGER_ADAPTER</code>&nbsp;ï¼Œåˆ›å»ºå¯¹åº”çš„&nbsp;<code>com.alibaba.dubbo.common.logger.Logger</code>&nbsp;å®ç°ç±»ï¼Œæ·»åŠ åˆ°&nbsp;<code>LOGGERS</code>&nbsp;ä¸­ã€‚ä¸‹æ–‡ï¼Œæˆ‘ä»¬ä¼šè¯¦ç»†è§£æã€‚</li>
</ul>
<h2 id="2-2-setLoggerAdapter">2.2 setLoggerAdapter</h2>
<p><code>#setLoggerAdapter(String loggerAdapter)</code>&nbsp;<strong>é™æ€</strong>æ–¹æ³•ï¼Œè®¾ç½® LoggerAdapter ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setLoggerAdapter</span><span class="params">(String loggerAdapter)</span> </span>{</span><br /><span class="line">    <span class="keyword">if</span> (loggerAdapter != <span class="keyword">null</span> &amp;&amp; loggerAdapter.length() &gt; <span class="number">0</span>) {</span><br /><span class="line">        setLoggerAdapter(ExtensionLoader.getExtensionLoader(LoggerAdapter.class).getExtension(loggerAdapter));</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>æ ¹æ®<strong>æ‹“å±•å</strong>( æ³¨æ„ï¼Œä¸æ˜¯ç±»å )ï¼Œè·å¾—<strong>å¯¹åº”çš„</strong>&nbsp;LoggerAdapter å®ç°ç±»ã€‚å¹¶è°ƒç”¨&nbsp;<code>#setLoggerAdapter(LoggerAdapter)</code>&nbsp;æ–¹æ³•ï¼Œè®¾ç½® LoggerAdapter å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"> <span class="number">1</span>: <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setLoggerAdapter</span><span class="params">(LoggerAdapter loggerAdapter)</span> </span>{</span><br /><span class="line"> <span class="number">2</span>:     <span class="keyword">if</span> (loggerAdapter != <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">3</span>:         <span class="comment">// è·å¾— Logger å¯¹è±¡ï¼Œå¹¶æ‰“å°æ—¥å¿—ï¼Œæç¤ºè®¾ç½®åçš„ LoggerAdapter å®ç°ç±»</span></span><br /><span class="line"> <span class="number">4</span>:         Logger logger = loggerAdapter.getLogger(LoggerFactory.class.getName());</span><br /><span class="line"> <span class="number">5</span>:         logger.info(<span class="string">"using logger: "</span> + loggerAdapter.getClass().getName());</span><br /><span class="line"> <span class="number">6</span>:         <span class="comment">// è®¾ç½® LOGGER_ADAPTER å±æ€§</span></span><br /><span class="line"> <span class="number">7</span>:         LoggerFactory.LOGGER_ADAPTER = loggerAdapter;</span><br /><span class="line"> <span class="number">8</span>:         <span class="comment">// å¾ªç¯ï¼Œå°†åŸæœ‰å·²ç»ç”Ÿæˆçš„ LOGGER ç¼“å­˜å¯¹è±¡ï¼Œå…¨éƒ¨é‡æ–°ç”Ÿæˆæ›¿æ¢</span></span><br /><span class="line"> <span class="number">9</span>:         <span class="keyword">for</span> (Map.Entry&lt;String, FailsafeLogger&gt; entry : LOGGERS.entrySet()) {</span><br /><span class="line"><span class="number">10</span>:             entry.getValue().setLogger(LOGGER_ADAPTER.getLogger(entry.getKey()));</span><br /><span class="line"><span class="number">11</span>:         }</span><br /><span class="line"><span class="number">12</span>:     }</span><br /><span class="line"><span class="number">13</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ç¬¬ 3 è‡³ 5 è¡Œï¼šè°ƒç”¨&nbsp;<code>LoggerAdapter#getLogger(String key)</code>&nbsp;æ–¹æ³•ï¼Œè·å¾— LoggerFactory çš„&nbsp;<strong>å¯¹åº”</strong>&nbsp;Logger å®ç°å¯¹è±¡ã€‚ç„¶åï¼Œæ‰“å°æ—¥å¿—ï¼Œæç¤º<strong>è®¾ç½®å</strong>çš„ LoggerAdapter å®ç°ç±»åã€‚LoggerAdapter ç›¸å…³ï¼Œåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/logger-adaptive/">ã€Œ3. LoggerAdapterã€</a>&nbsp;è¯¦ç»†è§£æã€‚</li>
<li>ç¬¬ 7 è¡Œï¼šè®¾ç½®&nbsp;<code>LOGGER_ADAPTER</code>&nbsp;å±æ€§ã€‚</li>
<li>ç¬¬ 8 è‡³ 11 è¡Œï¼š<strong>å¾ªç¯</strong>&nbsp;<code>LOGGERS</code>ï¼Œè°ƒç”¨&nbsp;<code>LoggerAdapter#getLogger(String key)</code>&nbsp;æ–¹æ³•ï¼Œé‡æ–°ç”Ÿæˆ LOGGER ï¼Œè¿›è¡Œæ›¿æ¢ã€‚</li>
</ul>
<h3 id="2-2-1-é™æ€ä»£ç å—">2.2.1 é™æ€ä»£ç å—</h3>
<p>åœ¨ LoggerFactory çš„<strong>é™æ€</strong>ä»£ç å—ï¼Œä¼šæ ¹æ®&nbsp;<code>"logger"</code>&nbsp;é…ç½®é¡¹ï¼Œè°ƒç”¨&nbsp;<code>#setLoggerAdapter(LoggerAdapter)</code>&nbsp;æ–¹æ³•ï¼Œè¿›è¡Œè®¾ç½®&nbsp;<code>LOGGER_ADAPTER</code>&nbsp;å±æ€§ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">static</span> {</span><br /><span class="line">    <span class="comment">// è·å¾— "logger" é…ç½®é¡¹</span></span><br /><span class="line">    String logger = System.getProperty(<span class="string">"dubbo.application.logger"</span>);</span><br /><span class="line">    <span class="comment">// æ ¹æ®é…ç½®é¡¹ï¼Œè¿›è¡Œå¯¹åº”çš„ LoggerAdapter å¯¹è±¡</span></span><br /><span class="line">    <span class="keyword">if</span> (<span class="string">"slf4j"</span>.equals(logger)) {</span><br /><span class="line">        setLoggerAdapter(<span class="keyword">new</span> Slf4jLoggerAdapter());</span><br /><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"jcl"</span>.equals(logger)) {</span><br /><span class="line">        setLoggerAdapter(<span class="keyword">new</span> JclLoggerAdapter());</span><br /><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"log4j"</span>.equals(logger)) {</span><br /><span class="line">        setLoggerAdapter(<span class="keyword">new</span> Log4jLoggerAdapter());</span><br /><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"jdk"</span>.equals(logger)) {</span><br /><span class="line">        setLoggerAdapter(<span class="keyword">new</span> JdkLoggerAdapter());</span><br /><span class="line">    } <span class="keyword">else</span> {</span><br /><span class="line">        <span class="comment">// æœªé…ç½®ï¼ŒæŒ‰ç…§ log4j &gt; slf4j &gt; apache common logger &gt; jdk logger</span></span><br /><span class="line">        <span class="keyword">try</span> {</span><br /><span class="line">            setLoggerAdapter(<span class="keyword">new</span> Log4jLoggerAdapter());</span><br /><span class="line">        } <span class="keyword">catch</span> (Throwable e1) {</span><br /><span class="line">            <span class="keyword">try</span> {</span><br /><span class="line">                setLoggerAdapter(<span class="keyword">new</span> Slf4jLoggerAdapter());</span><br /><span class="line">            } <span class="keyword">catch</span> (Throwable e2) {</span><br /><span class="line">                <span class="keyword">try</span> {</span><br /><span class="line">                    setLoggerAdapter(<span class="keyword">new</span> JclLoggerAdapter());</span><br /><span class="line">                } <span class="keyword">catch</span> (Throwable e3) {</span><br /><span class="line">                    setLoggerAdapter(<span class="keyword">new</span> JdkLoggerAdapter());</span><br /><span class="line">                }</span><br /><span class="line">            }</span><br /><span class="line">        }</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ğŸ™‚ ä»£ç æ˜“æ‡‚ï¼Œçœ‹æ³¨é‡Šã€‚</li>
<li>è¯¥æ–¹æ³•é€‚ç”¨äº LoggerFactory æœªåŠ è½½æ—¶ï¼Œè°ƒç”¨&nbsp;<code>System#setProperty("dubbo.application.logger", logger)</code>&nbsp;çš„åˆå§‹åŒ–ã€‚</li>
</ul>
<h3 id="2-2-2-ApplicationConfig">2.2.2 ApplicationConfig</h3>
<p>ApplicationConfig é‡Œï¼Œæœ‰&nbsp;<code>#setLogger(String logger)</code>&nbsp;æ–¹æ³•ï¼Œè°ƒç”¨&nbsp;<code>#setLoggerAdapter(LoggerAdapter)</code>&nbsp;æ–¹æ³•ï¼Œè¿›è¡Œè®¾ç½®&nbsp;<code>LOGGER_ADAPTER</code>&nbsp;å±æ€§ã€‚ ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">private</span> String logger;</span><br /><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLogger</span><span class="params">(String logger)</span> </span>{</span><br /><span class="line">    <span class="keyword">this</span>.logger = logger;</span><br /><span class="line">    <span class="comment">// è®¾ç½® LoggerAdapter</span></span><br /><span class="line">    LoggerFactory.setLoggerAdapter(logger);</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>é€šè¿‡å¦‚ä¸‹æ–¹å¼é…ç½®æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼š</li>
</ul>
<ol>
<li>
<p>å‘½ä»¤è¡Œ</p>
<figure class="highlight xml">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line">java -Ddubbo.application.logger=log4j</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p>åœ¨&nbsp;<code>dubbo.properties</code>&nbsp;ä¸­æŒ‡å®š</p>
<figure class="highlight xml">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line">dubbo.application.logger=log4j</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p>åœ¨&nbsp;<code>dubbo.xml</code>&nbsp;ä¸­é…ç½®</p>
<figure class="highlight xml">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">logger</span>=<span class="string">"log4j"</span> /&gt;</span></span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
</ol>
<h2 id="2-3-getLogger">2.3 getLogger</h2>
<p><code>#getLogger(...)</code>&nbsp;æ–¹æ³•ï¼Œä¼˜å…ˆä»&nbsp;<code>LOGGERS</code>&nbsp;ä¸­ï¼Œè·å¾—å¯¹åº”çš„ Logger å¯¹è±¡ã€‚è‹¥ä¸å­˜åœ¨ï¼Œåˆ™è¿›è¡Œåˆ›å»ºï¼Œå¹¶è¿›è¡Œç¼“å­˜åˆ°&nbsp;<code>LOGGERS</code>&nbsp;ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Logger <span class="title">getLogger</span><span class="params">(Class&lt;?&gt; key)</span> </span>{</span><br /><span class="line">    <span class="comment">// ä»ç¼“å­˜ä¸­ï¼Œè·å¾— Logger å¯¹è±¡</span></span><br /><span class="line">    FailsafeLogger logger = LOGGERS.get(key.getName());</span><br /><span class="line">    <span class="comment">// ä¸å­˜åœ¨ï¼Œåˆ™è¿›è¡Œåˆ›å»ºï¼Œå¹¶è¿›è¡Œç¼“å­˜</span></span><br /><span class="line">    <span class="keyword">if</span> (logger == <span class="keyword">null</span>) {</span><br /><span class="line">        LOGGERS.putIfAbsent(key.getName(), <span class="keyword">new</span> FailsafeLogger(LOGGER_ADAPTER.getLogger(key)));</span><br /><span class="line">        logger = LOGGERS.get(key.getName());</span><br /><span class="line">    }</span><br /><span class="line">    <span class="keyword">return</span> logger;</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Logger <span class="title">getLogger</span><span class="params">(String key)</span> </span>{</span><br /><span class="line">    <span class="comment">// ä»ç¼“å­˜ä¸­ï¼Œè·å¾— Logger å¯¹è±¡</span></span><br /><span class="line">    FailsafeLogger logger = LOGGERS.get(key);</span><br /><span class="line">    <span class="comment">// ä¸å­˜åœ¨ï¼Œåˆ™è¿›è¡Œåˆ›å»ºï¼Œå¹¶è¿›è¡Œç¼“å­˜</span></span><br /><span class="line">    <span class="keyword">if</span> (logger == <span class="keyword">null</span>) {</span><br /><span class="line">        LOGGERS.putIfAbsent(key, <span class="keyword">new</span> FailsafeLogger(LOGGER_ADAPTER.getLogger(key)));</span><br /><span class="line">        logger = LOGGERS.get(key);</span><br /><span class="line">    }</span><br /><span class="line">    <span class="keyword">return</span> logger;</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>FailsafeLogger ï¼Œæˆ‘ä»¬åœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/logger-adaptive/">ã€Œ4.1 FailsafeLoggerã€</a>&nbsp;ä¸­è¯¦ç»†è§£æã€‚</li>
</ul>
<h2 id="2-4-setLevel">2.4 setLevel</h2>
<p><code>#setLevel(Level level)</code>&nbsp;æ–¹æ³•ï¼Œè®¾ç½®æ—¥å¿—çº§åˆ«ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setLevel</span><span class="params">(Level level)</span> </span>{</span><br /><span class="line">    LOGGER_ADAPTER.setLevel(level);</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h2 id="2-5-getLevel">2.5 getLevel</h2>
<p><code>#getLevel()</code>&nbsp;æ–¹æ³•ï¼Œè·å¾—æ—¥å¿—çº§åˆ«ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Level <span class="title">getLevel</span><span class="params">()</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> LOGGER_ADAPTER.getLevel();</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h2 id="2-6-getFile">2.6 getFile</h2>
<p><code>#getFile()</code>&nbsp;æ–¹æ³•ï¼Œè·å¾—<strong>å½“å‰</strong>æ—¥å¿—æ–‡ä»¶ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> File <span class="title">getFile</span><span class="params">()</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> LOGGER_ADAPTER.getFile();</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h1 id="3-LoggerAdapter">3. LoggerAdapter</h1>
<p><code>com.alibaba.dubbo.common.logger.LoggerAdapter</code>&nbsp;ï¼ŒLogger&nbsp;<strong>é€‚é…å™¨</strong>æ¥å£ï¼Œè´Ÿè´£å¯¹æ¥ä¸åŒ<strong>æ—¥å¿—åº“</strong>çš„ LoggerFactory ã€‚æ¥å£æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function">Logger <span class="title">getLogger</span><span class="params">(Class&lt;?&gt; key)</span></span>;</span><br /><span class="line"><span class="function">Logger <span class="title">getLogger</span><span class="params">(String key)</span></span>;</span><br /><br /><span class="line"><span class="function">Level <span class="title">getLevel</span><span class="params">()</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setLevel</span><span class="params">(Level level)</span></span>;</span><br /><br /><span class="line"><span class="function">File <span class="title">getFile</span><span class="params">()</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setFile</span><span class="params">(File file)</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h2 id="3-1-Log4jLoggerAdapter">3.1 Log4jLoggerAdapter</h2>
<p><code>com.alibaba.dubbo.common.logger.log4j.Log4jLoggerAdapter</code>&nbsp;ï¼Œå®ç° LoggerAdapter æ¥å£ï¼Œ<strong>log4j</strong>çš„ LoggerAdapter å®ç°ç±»ã€‚</p>
<h3 id="3-1-1-æ„é€ æ–¹æ³•">3.1.1 æ„é€ æ–¹æ³•</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="comment">/**</span></span><br /><span class="line"><span class="comment"> * Root Logger çš„æ–‡ä»¶ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–</span></span><br /><span class="line"><span class="comment"> */</span></span><br /><span class="line"><span class="keyword">private</span> File file;</span><br /><br /><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Log4jLoggerAdapter</span><span class="params">()</span> </span>{</span><br /><span class="line">    <span class="keyword">try</span> {</span><br /><span class="line">        <span class="comment">// è·å¾— Root Logger å¯¹è±¡</span></span><br /><span class="line">        org.apache.log4j.Logger logger = LogManager.getRootLogger();</span><br /><span class="line">        <span class="keyword">if</span> (logger != <span class="keyword">null</span>) {</span><br /><span class="line">            <span class="comment">// å¾ªç¯æ¯ä¸ª Logger å¯¹è±¡çš„ Appender å¯¹è±¡</span></span><br /><span class="line">            Enumeration&lt;Appender&gt; appenders = logger.getAllAppenders();</span><br /><span class="line">            <span class="keyword">if</span> (appenders != <span class="keyword">null</span>) {</span><br /><span class="line">                <span class="keyword">while</span> (appenders.hasMoreElements()) {</span><br /><span class="line">                    <span class="comment">// å½“ä¸”ä»…å½“ FileAppender æ—¶</span></span><br /><span class="line">                    Appender appender = appenders.nextElement();</span><br /><span class="line">                    <span class="keyword">if</span> (appender <span class="keyword">instanceof</span> FileAppender) {</span><br /><span class="line">                        FileAppender fileAppender = (FileAppender) appender;</span><br /><span class="line">                        String filename = fileAppender.getFile();</span><br /><span class="line">                        file = <span class="keyword">new</span> File(filename);</span><br /><span class="line">                        <span class="keyword">break</span>;</span><br /><span class="line">                    }</span><br /><span class="line">                }</span><br /><span class="line">            }</span><br /><span class="line">        }</span><br /><span class="line">    } <span class="keyword">catch</span> (Throwable t) {</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li><code>file</code>&nbsp;å±æ€§ï¼Œé€šè¿‡<strong>æ„é€ æ–¹æ³•</strong>ï¼Œè¿›è¡Œåˆå§‹åŒ–ã€‚</li>
</ul>
<h3 id="3-1-2-getLogger">3.1.2 getLogger</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> Logger <span class="title">getLogger</span><span class="params">(Class&lt;?&gt; key)</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Log4jLogger(LogManager.getLogger(key));</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> Logger <span class="title">getLogger</span><span class="params">(String key)</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Log4jLogger(LogManager.getLogger(key));</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>å…ˆè°ƒç”¨&nbsp;<code>org.apache.log4j.LogManager#getLogger(...)</code>&nbsp;æ–¹æ³•ï¼Œè·å¾—&nbsp;<code>org.apache.log4j.Log</code>&nbsp;å¯¹è±¡ã€‚</li>
<li>å†å°†&nbsp;<code>org.apache.log4j.Log</code>&nbsp;å¯¹è±¡ä½œä¸ºæ–¹æ³•å‚æ•°ï¼Œåˆ›å»º&nbsp;<code>com.alibaba.dubbo.common.logger.log4j.Log4jLogger</code>&nbsp;å¯¹è±¡ã€‚</li>
</ul>
<h3 id="3-1-3-getLevel">3.1.3 getLevel</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> Level <span class="title">getLevel</span><span class="params">()</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> fromLog4jLevel(LogManager.getRootLogger().getLevel());</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>è·å¾— Root Logger çš„æ—¥å¿—çº§åˆ«ã€‚</li>
<li>
<p>è°ƒç”¨&nbsp;<code>#fromLog4jLevel(Level)</code>&nbsp;ï¼Œå°† Log4j çš„æ—¥å¿—çº§åˆ«è½¬æˆ Dubbo çš„æ—¥å¿—çº§åˆ«ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Level <span class="title">fromLog4jLevel</span><span class="params">(org.apache.log4j.Level level)</span> </span>{</span><br /><span class="line">    <span class="keyword">if</span> (level == org.apache.log4j.Level.ALL)</span><br /><span class="line">        <span class="keyword">return</span> Level.ALL;</span><br /><span class="line">    <span class="keyword">if</span> (level == org.apache.log4j.Level.TRACE)</span><br /><span class="line">        <span class="keyword">return</span> Level.TRACE;</span><br /><span class="line">    <span class="keyword">if</span> (level == org.apache.log4j.Level.DEBUG)</span><br /><span class="line">        <span class="keyword">return</span> Level.DEBUG;</span><br /><span class="line">    <span class="keyword">if</span> (level == org.apache.log4j.Level.INFO)</span><br /><span class="line">        <span class="keyword">return</span> Level.INFO;</span><br /><span class="line">    <span class="keyword">if</span> (level == org.apache.log4j.Level.WARN)</span><br /><span class="line">        <span class="keyword">return</span> Level.WARN;</span><br /><span class="line">    <span class="keyword">if</span> (level == org.apache.log4j.Level.ERROR)</span><br /><span class="line">        <span class="keyword">return</span> Level.ERROR;</span><br /><span class="line">    <span class="comment">// if (level == org.apache.log4j.Level.OFF)</span></span><br /><span class="line">    <span class="keyword">return</span> Level.OFF;</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
</ul>
<h3 id="3-1-4-setLevel">3.1.4 setLevel</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLevel</span><span class="params">(Level level)</span> </span>{</span><br /><span class="line">    LogManager.getRootLogger().setLevel(toLog4jLevel(level));</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>è®¾ç½® Root Logger çš„æ—¥å¿—çº§åˆ«ã€‚</li>
<li>
<p>è°ƒç”¨&nbsp;<code>#toLog4jLevel(Level)</code>&nbsp;ï¼Œå°† Dubbo çš„æ—¥å¿—çº§åˆ«è½¬æˆ Log4j çš„æ—¥å¿—çº§åˆ«ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> org.apache.log4j.<span class="function">Level <span class="title">toLog4jLevel</span><span class="params">(Level level)</span> </span>{</span><br /><span class="line">    <span class="keyword">if</span> (level == Level.ALL)</span><br /><span class="line">        <span class="keyword">return</span> org.apache.log4j.Level.ALL;</span><br /><span class="line">    <span class="keyword">if</span> (level == Level.TRACE)</span><br /><span class="line">        <span class="keyword">return</span> org.apache.log4j.Level.TRACE;</span><br /><span class="line">    <span class="keyword">if</span> (level == Level.DEBUG)</span><br /><span class="line">        <span class="keyword">return</span> org.apache.log4j.Level.DEBUG;</span><br /><span class="line">    <span class="keyword">if</span> (level == Level.INFO)</span><br /><span class="line">        <span class="keyword">return</span> org.apache.log4j.Level.INFO;</span><br /><span class="line">    <span class="keyword">if</span> (level == Level.WARN)</span><br /><span class="line">        <span class="keyword">return</span> org.apache.log4j.Level.WARN;</span><br /><span class="line">    <span class="keyword">if</span> (level == Level.ERROR)</span><br /><span class="line">        <span class="keyword">return</span> org.apache.log4j.Level.ERROR;</span><br /><span class="line">    <span class="comment">// if (level == Level.OFF)</span></span><br /><span class="line">    <span class="keyword">return</span> org.apache.log4j.Level.OFF;</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
</ul>
<h3 id="3-1-5-getFile">3.1.5 getFile</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> File <span class="title">getFile</span><span class="params">()</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> file;</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<h3 id="3-1-6-setFile">3.1.6 setFile</h3>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFile</span><span class="params">(File file)</span> </span>{</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ä¸æ”¯æŒè®¾ç½®ã€‚</li>
</ul>
<h2 id="3-2-JdkLoggerAdapter">3.2 JdkLoggerAdapter</h2>
<p>ç±»ä¼¼ Log4jLoggerAdapter ï¼Œçœç•¥ã€‚</p>
<h2 id="3-3-Slf4jLoggerAdapter">3.3 Slf4jLoggerAdapter</h2>
<p><code>com.alibaba.dubbo.common.logger.log4j.Log4jLoggerAdapter</code>&nbsp;ï¼Œå®ç° LoggerAdapter æ¥å£ï¼Œ<strong>slf4j</strong>çš„ LoggerAdapter å®ç°ç±»ã€‚</p>
<blockquote>
<p>SLF4J ä¸åŒäºå…¶ä»–æ—¥å¿—ç±»åº“ï¼Œä¸å…¶å®ƒæ—¥å¿—ç±»åº“æœ‰å¾ˆå¤§çš„ä¸åŒã€‚SLF4J (Simple logging Facade for Java) ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ—¥å¿—å®ç°ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½è±¡å±‚ï¼ˆ abstraction layerï¼‰ï¼Œå®ƒå…è®¸ä½ åœ¨åå°ä½¿ç”¨ä»»æ„ä¸€ä¸ªæ—¥å¿—ç±»åº“ã€‚å¦‚æœæ˜¯åœ¨ç¼–å†™ä¾›å†…å¤–éƒ¨éƒ½å¯ä»¥ä½¿ç”¨çš„APIæˆ–è€…é€šç”¨ç±»åº“ï¼Œé‚£ä¹ˆä½ çœŸä¸ä¼šå¸Œæœ›ä½¿ç”¨ä½ ç±»åº“çš„å®¢æˆ·ç«¯å¿…é¡»ä½¿ç”¨ä½ é€‰æ‹©çš„æ—¥å¿—ç±»åº“ã€‚</p>
</blockquote>
<ul>
<li>
<p>å› æ­¤ï¼ŒSlf4jLoggerAdapter çš„å®ç°æ–¹æ³•ä¸­ï¼Œæ“ä½œ&nbsp;<code>file</code>&nbsp;å’Œ&nbsp;<code>level</code>&nbsp;å±æ€§æ˜¯<strong>æ— ç”¨</strong>ã€‚å› ä¸ºï¼Œå…·ä½“çš„&nbsp;<code>file</code>&nbsp;å’Œ&nbsp;<code>level</code>ç”±<strong>çœŸæ­£çš„æ—¥å¿—å®ç°</strong>å†³å®šã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Slf4jLoggerAdapter</span> <span class="keyword">implements</span> <span class="title">LoggerAdapter</span> </span>{</span><br /><br /><span class="line">    <span class="keyword">private</span> Level level;</span><br /><span class="line">    <span class="keyword">private</span> File file;</span><br /><br /><span class="line">    <span class="meta">@Override</span></span><br /><span class="line">    <span class="function"><span class="keyword">public</span> Logger <span class="title">getLogger</span><span class="params">(String key)</span> </span>{</span><br /><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Slf4jLogger(org.slf4j.LoggerFactory.getLogger(key));</span><br /><span class="line">    }</span><br /><br /><span class="line">    <span class="meta">@Override</span></span><br /><span class="line">    <span class="function"><span class="keyword">public</span> Logger <span class="title">getLogger</span><span class="params">(Class&lt;?&gt; key)</span> </span>{</span><br /><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Slf4jLogger(org.slf4j.LoggerFactory.getLogger(key));</span><br /><span class="line">    }</span><br /><br /><span class="line">    <span class="meta">@Override</span></span><br /><span class="line">    <span class="function"><span class="keyword">public</span> Level <span class="title">getLevel</span><span class="params">()</span> </span>{ <span class="comment">// æ— ç”¨</span></span><br /><span class="line">        <span class="keyword">return</span> level;</span><br /><span class="line">    }</span><br /><br /><span class="line">    <span class="meta">@Override</span></span><br /><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLevel</span><span class="params">(Level level)</span> </span>{ <span class="comment">// æ— ç”¨</span></span><br /><span class="line">        <span class="keyword">this</span>.level = level;</span><br /><span class="line">    }</span><br /><br /><span class="line">    <span class="meta">@Override</span></span><br /><span class="line">    <span class="function"><span class="keyword">public</span> File <span class="title">getFile</span><span class="params">()</span> </span>{ <span class="comment">// æ— ç”¨</span></span><br /><span class="line">        <span class="keyword">return</span> file;</span><br /><span class="line">    }</span><br /><br /><span class="line">    <span class="meta">@Override</span></span><br /><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFile</span><span class="params">(File file)</span> </span>{ <span class="comment">// æ— ç”¨</span></span><br /><span class="line">        <span class="keyword">this</span>.file = file;</span><br /><span class="line">    }</span><br /><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ä¹Ÿå› æ­¤ï¼Œæ‰“å°æ—¥å¿—çš„è°ƒç”¨æ ˆä¸ºï¼š<strong>Dubbo</strong>&nbsp;Slf4jLogger =&gt;&nbsp;<strong>Slf4j</strong>&nbsp;Logger =&gt;&nbsp;<strong>çœŸæ­£</strong>çš„ Logger å®ç°ç±»ã€‚</li>
</ul>
</li>
</ul>
<h2 id="3-4-JclLoggerAdapter">3.4 JclLoggerAdapter</h2>
<p>ç±»ä¼¼ Slf4jLoggerAdapter ï¼Œçœç•¥ã€‚</p>
<h1 id="4-Logger">4. Logger</h1>
<p><code>com.alibaba.dubbo.common.logger.Logger</code>&nbsp;ï¼ŒLogger æ¥å£ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trace</span><span class="params">(String msg)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trace</span><span class="params">(Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trace</span><span class="params">(String msg, Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">debug</span><span class="params">(String msg)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">debug</span><span class="params">(Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">debug</span><span class="params">(String msg, Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">info</span><span class="params">(String msg)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">info</span><span class="params">(Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">info</span><span class="params">(String msg, Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">warn</span><span class="params">(String msg)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">warn</span><span class="params">(Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">warn</span><span class="params">(String msg, Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error</span><span class="params">(String msg)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error</span><span class="params">(Throwable e)</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">error</span><span class="params">(String msg, Throwable e)</span></span>;</span><br /><br /><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isTraceEnabled</span><span class="params">()</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isDebugEnabled</span><span class="params">()</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isInfoEnabled</span><span class="params">()</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isWarnEnabled</span><span class="params">()</span></span>;</span><br /><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isErrorEnabled</span><span class="params">()</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>æ–¹æ³•çš„å®šä¹‰ï¼Œå¤åˆ¶è‡ª Apache Common Logger ã€‚</li>
</ul>
<h2 id="4-1-FailsafeLogger">4.1 FailsafeLogger</h2>
<p><code>com.alibaba.dubbo.common.logger.support.FailsafeLogger</code>&nbsp;ï¼Œå®ç° Logger æ¥å£ï¼Œ<strong>å¤±è´¥å®‰å…¨</strong>çš„ Logger å®ç°ç±»ã€‚</p>
<p>æˆ‘ä»¬ä»¥&nbsp;<code>#error(String msg)</code>&nbsp;<strong>å®ç°</strong>æ–¹æ³•ï¼Œä¸¾ä¾‹å­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="comment">/**</span></span><br /><span class="line"><span class="comment"> * Dubbo Logger å¯¹è±¡</span></span><br /><span class="line"><span class="comment"> */</span></span><br /><span class="line"><span class="keyword">private</span> Logger logger;</span><br /><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">FailsafeLogger</span><span class="params">(Logger logger)</span> </span>{</span><br /><span class="line">    <span class="keyword">this</span>.logger = logger;</span><br /><span class="line">}</span><br /><br /><br /><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">error</span><span class="params">(String msg)</span> </span>{</span><br /><span class="line">    <span class="keyword">try</span> {</span><br /><span class="line">        logger.error(appendContextMessage(msg));</span><br /><span class="line">    } <span class="keyword">catch</span> (Throwable t) {</span><br /><span class="line">    }</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>å³ä½¿æŠ¥é”™ï¼Œä¹Ÿä¼šè¢«&nbsp;<strong>try catch</strong>&nbsp;æ‰ã€‚</li>
<li>
<p><code>#appendContextMessage(msg)</code>&nbsp;æ–¹æ³•ï¼Œæ‹¼æ¥ Dubbo çš„&nbsp;<strong>version å’Œ host</strong>&nbsp;åˆ°æ—¥å¿—ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">appendContextMessage</span><span class="params">(String msg)</span> </span>{</span><br /><span class="line">    <span class="keyword">return</span> <span class="string">" [DUBBO] "</span> + msg + <span class="string">", dubbo version: "</span> + Version.getVersion() + <span class="string">", current host: "</span> + NetUtils.getLogHost();</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p>å…¶ä»–å®ç°æ–¹æ³•ï¼Œä¹Ÿç±»ä¼¼è¯¥æ–¹æ³•ã€‚</p>
</li>
</ul>
<h2 id="4-2-Log4jLogger">4.2 Log4jLogger</h2>
<p><code>com.alibaba.dubbo.common.logger.log4j.Log4jLogger</code>&nbsp;ï¼Œå®ç° Logger æ¥å£ï¼Œ<strong>log4j</strong>&nbsp;çš„ Logger å®ç°ç±»ã€‚</p>
<p>æˆ‘ä»¬ä»¥&nbsp;<code>#error(String msg)</code>&nbsp;<strong>å®ç°</strong>æ–¹æ³•ï¼Œä¸¾ä¾‹å­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FQCN = FailsafeLogger.class.getName();</span><br /><br /><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> org.apache.log4j.Logger logger;</span><br /><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Log4jLogger</span><span class="params">(org.apache.log4j.Logger logger)</span> </span>{</span><br /><span class="line">    <span class="keyword">this</span>.logger = logger;</span><br /><span class="line">}</span><br /><br /><span class="line"><span class="meta">@Override</span></span><br /><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">error</span><span class="params">(String msg)</span> </span>{</span><br /><span class="line">    logger.log(FQCN, Level.ERROR, msg, <span class="keyword">null</span>);</span><br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>æ¯ä¸ªå®ç°æ–¹æ³•ï¼Œè°ƒç”¨&nbsp;<strong>Log4J Logger</strong>&nbsp;å¯¹è±¡ï¼Œå¯¹åº”çš„æ–¹æ³•ã€‚</li>
<li>å…¶ä»–å®ç°æ–¹æ³•ï¼Œä¹Ÿç±»ä¼¼è¯¥æ–¹æ³•ã€‚</li>
</ul>
<h2 id="4-3-JdkLogger">4.3 JdkLogger</h2>
<p>ç±»ä¼¼ Log4jLogger ï¼Œçœç•¥ã€‚</p>
<h2 id="4-4-Slf4jLogger">4.4 Slf4jLogger</h2>
<p>ç±»ä¼¼ Log4jLogger ï¼Œçœç•¥ã€‚</p>
<h2 id="4-5-JclLogger">4.5 JclLogger</h2>
<p>ç±»ä¼¼ Log4jLogger ï¼Œçœç•¥ã€‚</p>
<h1 id="5-Level">5. Level</h1>
<p><code>com.alibaba.dubbo.common.logger.Level</code>&nbsp;ï¼Œæ—¥å¿—çº§åˆ«<strong>æšä¸¾</strong>ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Level {</span><br /><br /><span class="line">    ALL,</span><br /><span class="line">    TRACE,</span><br /><span class="line">    DEBUG,</span><br /><span class="line">    INFO,</span><br /><span class="line">    WARN,</span><br /><span class="line">    ERROR,</span><br /><span class="line">    OFF</span><br />    <br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</div>