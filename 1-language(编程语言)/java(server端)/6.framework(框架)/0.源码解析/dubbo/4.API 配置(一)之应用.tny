<header class="article-header">
<h1 class="article-title">API é…ç½®ï¼ˆä¸€ï¼‰ä¹‹åº”ç”¨</h1>
</header>
<div class="article-entry">
<blockquote>
<p>æœ¬æ–‡åŸºäº Dubbo 2.6.1 ç‰ˆæœ¬ï¼Œæœ›çŸ¥æ‚‰ã€‚</p>
</blockquote>
<blockquote>
<p>å‹æƒ…æç¤ºï¼Œã€<strong>é…ç½®</strong>ã€‘è¿™å—çš„å†…å®¹ï¼Œä¼šç›¸å¯¹æ¯”è¾ƒæ¯ç‡¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœçœ‹åˆ°ä¸€äº›å¾ˆéš¾æ‡‚çš„åœ°æ–¹ï¼Œå»ºè®®å…ˆè·³è¿‡ã€‚</p>
<p>å¯¹äº Dubbo ï¼Œé‡ç‚¹æ˜¯è¦å»ç†è§£ï¼Œå¤šåè®®ã€RPCã€å®¹é”™ç­‰ç­‰æ¨¡å—ï¼Œè€Œä¸æ˜¯ã€<strong>é…ç½®</strong>ã€‘ã€‚</p>
<p>ğŸ˜ˆ ä¼°è®¡å¥½å¤šèƒ–å‹è¢«ã€<strong>é…ç½®</strong>ã€‘è¿™ç« åŠé€€äº†æŠŠï¼Ÿï¼Ÿï¼Ÿ</p>
</blockquote>
<h1 id="1-æ¦‚è¿°">1. æ¦‚è¿°</h1>
<p>æˆ‘ä»¬éƒ½&ldquo;çŸ¥é“&rdquo;ï¼ŒDubbo çš„é…ç½®æ˜¯éå¸¸&ldquo;çµæ´»&rdquo;çš„ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç›®å‰æä¾›äº†å››ç§<strong>é…ç½®æ–¹å¼</strong>ï¼š</p>
<ol>
<li>API é…ç½®</li>
<li>å±æ€§é…ç½®</li>
<li>XML é…ç½®</li>
<li>æ³¨è§£é…ç½®</li>
</ol>
<p>psï¼šğŸ™‚ åç»­çš„å‡ ç¯‡æ–‡ç« ä¹Ÿæ˜¯æŒ‰ç…§è¿™æ ·çš„é¡ºåºï¼Œè§£æ Dubbo é…ç½®çš„æºç ã€‚</p>
<p>å†ä¾‹å¦‚ï¼Œå¯çµæ´»è®¾ç½®çš„<strong>é…ç½®é¡¹</strong>ï¼š</p>
<blockquote>
<p>FROM&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/introduction.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; schema é…ç½®å‚è€ƒæ‰‹å†Œã€‹</a></p>
<p>æ‰€æœ‰é…ç½®é¡¹åˆ†ä¸ºä¸‰å¤§ç±»ï¼Œå‚è§ä¸‹è¡¨ä¸­çš„&rdquo;ä½œç”¨&rdquo;ä¸€åˆ—ã€‚</p>
<ul>
<li>æœåŠ¡å‘ç°ï¼šè¡¨ç¤ºè¯¥é…ç½®é¡¹ç”¨äºæœåŠ¡çš„æ³¨å†Œä¸å‘ç°ï¼Œç›®çš„æ˜¯è®©æ¶ˆè´¹æ–¹æ‰¾åˆ°æä¾›æ–¹ã€‚</li>
<li>æœåŠ¡æ²»ç†ï¼šè¡¨ç¤ºè¯¥é…ç½®é¡¹ç”¨äºæ²»ç†æœåŠ¡é—´çš„å…³ç³»ï¼Œæˆ–ä¸ºå¼€å‘æµ‹è¯•æä¾›ä¾¿åˆ©æ¡ä»¶ã€‚</li>
<li>æ€§èƒ½è°ƒä¼˜ï¼šè¡¨ç¤ºè¯¥é…ç½®é¡¹ç”¨äºè°ƒä¼˜æ€§èƒ½ï¼Œä¸åŒçš„é€‰é¡¹å¯¹æ€§èƒ½ä¼šäº§ç”Ÿå½±å“ã€‚</li>
</ul>
<p>æ‰€æœ‰é…ç½®æœ€ç»ˆéƒ½å°†è½¬æ¢ä¸º Dubbo URL è¡¨ç¤ºï¼Œå¹¶ç”±æœåŠ¡æä¾›æ–¹ç”Ÿæˆï¼Œç»æ³¨å†Œä¸­å¿ƒä¼ é€’ç»™æ¶ˆè´¹æ–¹ï¼Œå„å±æ€§å¯¹åº” URL çš„å‚æ•°ï¼Œå‚è§é…ç½®é¡¹ä¸€è§ˆè¡¨ä¸­çš„ &ldquo;å¯¹åº”URLå‚æ•°&rdquo; åˆ—ã€‚</p>
</blockquote>
<p>psï¼šğŸ™‚ å¯èƒ½è½¬æ¢æˆ Dubbo&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java" target="_blank" rel="external nofollow noopener noreferrer">URL</a>&nbsp;ä¸å¤ªå¥½ç†è§£ã€‚è‰¯å¿ƒå¦‚ç¬”è€…ï¼Œåç»­æœ‰æ–‡ç« ä¼šè´¯ä¸²å®ƒã€‚</p>
<p>å½“ç„¶ï¼Œå‡¡äº‹éƒ½æœ‰ä¸¤é¢æ€§ï¼Œåœ¨ç¤¾åŒºé‡Œä¹Ÿå­˜åœ¨å»ºè®®çš„å£°éŸ³ï¼Œä¾‹å¦‚ï¼š<a href="https://github.com/alibaba/dubbo/issues/738" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠISSUE#738ï¼šXMLé…ç½®é¡¹é‡æ–°æ¢³ç†ã€‹</a>&nbsp;ï¼š</p>
<blockquote>
<p>ç›®å‰æœ‰ä¸€äº›é…ç½®é¡¹å­˜åœ¨æš´éœ²çš„ä½ç½®ä¸æ­£ç¡®ã€æš´éœ²ä¸å…¨é¢ã€æ–‡æ¡£å’Œå«ä¹‰ä¸åŒ¹é…ç­‰é—®é¢˜ï¼ŒæœŸæœ›åœ¨2.5.7ç‰ˆæœ¬å°†å·²çŸ¥é—®é¢˜äºˆä»¥æ•´ç†ä¿®å¤</p>
<p><strong>å¦‚æœä½¿ç”¨ä¸­æœ‰é‡åˆ°çš„é…ç½®é—®é¢˜ï¼Œè¯·åœ¨è¯„è®ºä¸­åˆ—å‡ºä»¥ä¾¿æ”¹è¿›</strong></p>
</blockquote>
<h1 id="2-é…ç½®ä¸€è§ˆ">2. é…ç½®ä¸€è§ˆ</h1>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹&nbsp;<code>dubbo-config-api</code>&nbsp;çš„<strong>é¡¹ç›®ç»“æ„</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Dubbo/2018_01_07/01.png" alt="dubbo-config-api é¡¹ç›®ç»“æ„" /></p>
<p>ä¸€è„¸æ‡µé€¼ï¼Œå¥½å¤šå•Šã€‚ä¸‹é¢æˆ‘ä»¬æ¥æ•´ç†ä¸‹<strong>é…ç½®ä¹‹é—´çš„å…³ç³»</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<blockquote>
<p>FROM&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/configuration/xml.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; XML é…ç½®ã€‹</a><br /><img src="http://static2.iocoder.cn/images/Dubbo/2018_01_07/02.png" alt="é…ç½®ä¹‹é—´çš„å…³ç³»" /></p>
</blockquote>
<p>ä»è¿™å¼ å›¾ä¸­ï¼Œå¯ä»¥çœ‹å‡ºåˆ†æˆ<strong>å››ä¸ª</strong>éƒ¨åˆ†ï¼š</p>
<ol>
<li>application-shared</li>
<li>provider-side</li>
<li>consumer-side</li>
<li>sub-config</li>
</ol>
<p>å®é™…ä¸Šï¼Œä¸Šå›¾å’Œç›®å‰ç‰ˆæœ¬çš„ä»£ç ä¼šå­˜åœ¨ä¸€ç‚¹ç‚¹å‡ºå…¥ï¼Œæˆ‘ä»¬åœ¨çœ‹çœ‹å®é™…çš„<strong>ç±»å…³ç³»</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Dubbo/2018_01_07/03.png" alt="é…ç½®ç±»å…³ç³»" /></p>
<ul>
<li><strong>çº¢å‹¾</strong>éƒ¨åˆ†ï¼Œapplication-shared ï¼Œåœ¨æœ¬æ–‡è¿›è¡Œåˆ†äº«ã€‚</li>
<li><strong>é»„æ¡†</strong>éƒ¨åˆ†ï¼Œprovider-side ï¼Œåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-2/?self">ã€ŠAPI é…ç½®ï¼ˆäºŒï¼‰ä¹‹æœåŠ¡æä¾›è€…ã€‹</a>&nbsp;åˆ†äº«ã€‚</li>
<li><strong>çº¢æ¡†</strong>éƒ¨åˆ†ï¼Œconsumer-side ï¼Œåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-3/?self">ã€ŠAPI é…ç½®ï¼ˆä¸‰ï¼‰ä¹‹æœåŠ¡æ¶ˆè´¹è€…ã€‹</a>&nbsp;åˆ†äº«ã€‚</li>
<li><strong>å…¶ä»–</strong>éƒ¨åˆ†ï¼Œsub-config ï¼Œåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-2/?self">ã€ŠAPI é…ç½®ï¼ˆäºŒï¼‰ä¹‹æœåŠ¡æä¾›è€…ã€‹</a>&nbsp;åˆ†äº«ã€‚</li>
</ul>
<h1 id="3-Config">3. Config</h1>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µ&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/configuration/api.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; API é…ç½®ã€‹</a>&nbsp;ï¼Œæä¾›çš„æ¶ˆè´¹è€…çš„åˆå§‹åŒ–ä»£ç ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="comment">// å½“å‰åº”ç”¨é…ç½®</span></span><br /><span class="line">ApplicationConfig application = <span class="keyword">new</span> ApplicationConfig();</span><br /><span class="line">application.setName(<span class="string">"yyy"</span>);</span><br /><br /><span class="line"><span class="comment">// è¿æ¥æ³¨å†Œä¸­å¿ƒé…ç½®</span></span><br /><span class="line">RegistryConfig registry = <span class="keyword">new</span> RegistryConfig();</span><br /><span class="line">registry.setAddress(<span class="string">"10.20.130.230:9090"</span>);</span><br /><span class="line">registry.setUsername(<span class="string">"aaa"</span>);</span><br /><span class="line">registry.setPassword(<span class="string">"bbb"</span>);</span><br /><br /><span class="line"><span class="comment">// æ³¨æ„ï¼šReferenceConfigä¸ºé‡å¯¹è±¡ï¼Œå†…éƒ¨å°è£…äº†ä¸æ³¨å†Œä¸­å¿ƒçš„è¿æ¥ï¼Œä»¥åŠä¸æœåŠ¡æä¾›æ–¹çš„è¿æ¥</span></span><br /><br /><span class="line"><span class="comment">// å¼•ç”¨è¿œç¨‹æœåŠ¡</span></span><br /><span class="line">ReferenceConfig&lt;XxxService&gt; reference = <span class="keyword">new</span> ReferenceConfig&lt;XxxService&gt;(); <span class="comment">// æ­¤å®ä¾‹å¾ˆé‡ï¼Œå°è£…äº†ä¸æ³¨å†Œä¸­å¿ƒçš„è¿æ¥ä»¥åŠä¸æä¾›è€…çš„è¿æ¥ï¼Œè¯·è‡ªè¡Œç¼“å­˜ï¼Œå¦åˆ™å¯èƒ½é€ æˆå†…å­˜å’Œè¿æ¥æ³„æ¼</span></span><br /><span class="line">reference.setApplication(application);</span><br /><span class="line">reference.setRegistry(registry); <span class="comment">// å¤šä¸ªæ³¨å†Œä¸­å¿ƒå¯ä»¥ç”¨setRegistries()</span></span><br /><span class="line">reference.setInterface(XxxService.class);</span><br /><span class="line">reference.setVersion(<span class="string">"1.0.0"</span>);</span><br /><br /><span class="line"><span class="comment">// å’Œæœ¬åœ°beanä¸€æ ·ä½¿ç”¨xxxService</span></span><br /><span class="line">XxxService xxxService = reference.get(); <span class="comment">// æ³¨æ„ï¼šæ­¤ä»£ç†å¯¹è±¡å†…éƒ¨å°è£…äº†æ‰€æœ‰é€šè®¯ç»†èŠ‚ï¼Œå¯¹è±¡è¾ƒé‡ï¼Œè¯·ç¼“å­˜å¤ç”¨</span></span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>å¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºäº† ApplicationConfig å’Œ RegistryConfig å¯¹è±¡ï¼Œè®¾ç½®åˆ° ReferenceConfig å¯¹è±¡ã€‚</li>
<li>å¦‚æœåˆ›å»º ModuleConfig æˆ– MonitorConfig å¯¹è±¡ï¼Œä¹Ÿæ˜¯å¯ä»¥è®¾ç½®åˆ° ReferenceConfig å¯¹è±¡ä¸­ã€‚</li>
</ul>
<h2 id="3-1-AbstractConfig">3.1 AbstractConfig</h2>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.AbstractConfig</code></a>&nbsp;ï¼Œ<strong>æŠ½è±¡</strong>é…ç½®ç±»ï¼Œé™¤äº† ArgumentConfig ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„é…ç½®ç±»éƒ½ç»§æ‰¿è¯¥ç±»ã€‚</p>
<p>AbstractConfig ä¸»è¦æä¾›é…ç½®è§£æä¸æ ¡éªŒç›¸å…³çš„å·¥å…·æ–¹æ³•ã€‚ä¸‹é¢æˆ‘ä»¬å¼€å§‹çœ‹çœ‹å®ƒçš„ä»£ç ã€‚</p>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L110" target="_blank" rel="external nofollow noopener noreferrer"><code>id</code></a>&nbsp;å±æ€§ï¼Œé…ç½®å¯¹è±¡çš„ç¼–å·ï¼Œé€‚ç”¨äºé™¤äº† API é…ç½®<strong>ä¹‹å¤–</strong>çš„ä¸‰ç§é…ç½®æ–¹å¼ï¼Œæ ‡è®°ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå¯ç”¨äºå¯¹è±¡ä¹‹é—´çš„å¼•ç”¨ã€‚ä¾‹å¦‚ XML çš„&nbsp;<code>&lt;dubbo:service provider="${PROVIDER_ID}"&gt;</code>&nbsp;ï¼Œå…¶ä¸­&nbsp;<code>provider</code>&nbsp;ä¸º&nbsp;<code>&lt;dubbo:provider&gt;</code>&nbsp;çš„ ID å±æ€§ã€‚</p>
<p>é‚£ä¸ºä»€ä¹ˆè¯´ä¸é€‚ç”¨ API é…ç½®å‘¢ï¼Ÿç›´æ¥&nbsp;<code>#setXXX(config)</code>&nbsp;å¯¹è±¡å³å¯ã€‚</p>
<hr />
<p>é…ç½®é¡¹æ ¡éªŒçš„å·¥å…·æ–¹æ³•ï¼Œä¾‹å¦‚å±æ€§å€¼é•¿åº¦é™åˆ¶ã€æ ¼å¼é™åˆ¶ç­‰ç­‰ï¼Œæ¯”è¾ƒç®€å•ã€‚ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<ul>
<li><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L49-L67" target="_blank" rel="external nofollow noopener noreferrer">é™æ€å±æ€§</a></li>
<li><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L413-L494" target="_blank" rel="external nofollow noopener noreferrer">é™æ€æ–¹æ³•</a></li>
</ul>
<hr />
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L244-L313" target="_blank" rel="external nofollow noopener noreferrer"><code>#appendParameters(parameters, config, prefix)</code></a>&nbsp;æ–¹æ³•ï¼Œå°†é…ç½®å¯¹è±¡çš„å±æ€§ï¼Œæ·»åŠ åˆ°å‚æ•°é›†åˆã€‚ä»£ç å¦‚ä¸‹ ï¼š</p>
<blockquote>
<p>åœ¨çœ‹å…·ä½“ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-1/">ã€Œ4. URLã€</a>&nbsp;å’Œ&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-1/">ã€Œ5. @Parameterã€</a>&nbsp;ã€‚</p>
</blockquote>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"> <span class="number">1</span>: <span class="function"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">appendParameters</span><span class="params">(Map&lt;String, String&gt; parameters, Object config, String prefix)</span> </span>{</span><br /><span class="line"> <span class="number">2</span>:     <span class="keyword">if</span> (config == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">3</span>:         <span class="keyword">return</span>;</span><br /><span class="line"> <span class="number">4</span>:     }</span><br /><span class="line"> <span class="number">5</span>:     Method[] methods = config.getClass().getMethods();</span><br /><span class="line"> <span class="number">6</span>:     <span class="keyword">for</span> (Method method : methods) {</span><br /><span class="line"> <span class="number">7</span>:         <span class="keyword">try</span> {</span><br /><span class="line"> <span class="number">8</span>:             String name = method.getName();</span><br /><span class="line"> <span class="number">9</span>:             <span class="keyword">if</span> ((name.startsWith(<span class="string">"get"</span>) || name.startsWith(<span class="string">"is"</span>))</span><br /><span class="line"><span class="number">10</span>:                     &amp;&amp; !<span class="string">"getClass"</span>.equals(name)</span><br /><span class="line"><span class="number">11</span>:                     &amp;&amp; Modifier.isPublic(method.getModifiers())</span><br /><span class="line"><span class="number">12</span>:                     &amp;&amp; method.getParameterTypes().length == <span class="number">0</span></span><br /><span class="line"><span class="number">13</span>:                     &amp;&amp; isPrimitive(method.getReturnType())) { <span class="comment">// æ–¹æ³•ä¸ºè·å–åŸºæœ¬ç±»å‹ï¼Œpublic çš„ getting æ–¹æ³•ã€‚</span></span><br /><span class="line"><span class="number">14</span>:                 Parameter parameter = method.getAnnotation(Parameter.class);</span><br /><span class="line"><span class="number">15</span>:                 <span class="keyword">if</span> (method.getReturnType() == Object.class || parameter != <span class="keyword">null</span> &amp;&amp; parameter.excluded()) {</span><br /><span class="line"><span class="number">16</span>:                     <span class="keyword">continue</span>;</span><br /><span class="line"><span class="number">17</span>:                 }</span><br /><span class="line"><span class="number">18</span>:                 <span class="comment">// è·å¾—å±æ€§å</span></span><br /><span class="line"><span class="number">19</span>:                 <span class="keyword">int</span> i = name.startsWith(<span class="string">"get"</span>) ? <span class="number">3</span> : <span class="number">2</span>;</span><br /><span class="line"><span class="number">20</span>:                 String prop = StringUtils.camelToSplitName(name.substring(i, i + <span class="number">1</span>).toLowerCase() + name.substring(i + <span class="number">1</span>), <span class="string">"."</span>);</span><br /><span class="line"><span class="number">21</span>:                 String key;</span><br /><span class="line"><span class="number">22</span>:                 <span class="keyword">if</span> (parameter != <span class="keyword">null</span> &amp;&amp; parameter.key() != <span class="keyword">null</span> &amp;&amp; parameter.key().length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">23</span>:                     key = parameter.key();</span><br /><span class="line"><span class="number">24</span>:                 } <span class="keyword">else</span> {</span><br /><span class="line"><span class="number">25</span>:                     key = prop;</span><br /><span class="line"><span class="number">26</span>:                 }</span><br /><span class="line"><span class="number">27</span>:                 <span class="comment">// è·å¾—å±æ€§å€¼</span></span><br /><span class="line"><span class="number">28</span>:                 Object value = method.invoke(config, <span class="keyword">new</span> Object[<span class="number">0</span>]);</span><br /><span class="line"><span class="number">29</span>:                 String str = String.valueOf(value).trim();</span><br /><span class="line"><span class="number">30</span>:                 <span class="keyword">if</span> (value != <span class="keyword">null</span> &amp;&amp; str.length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">31</span>:                     <span class="comment">// è½¬ä¹‰</span></span><br /><span class="line"><span class="number">32</span>:                     <span class="keyword">if</span> (parameter != <span class="keyword">null</span> &amp;&amp; parameter.escaped()) {</span><br /><span class="line"><span class="number">33</span>:                         str = URL.encode(str);</span><br /><span class="line"><span class="number">34</span>:                     }</span><br /><span class="line"><span class="number">35</span>:                     <span class="comment">// æ‹¼æ¥ï¼Œè¯¦ç»†è¯´æ˜å‚è§ `Parameter#append()` æ–¹æ³•çš„è¯´æ˜ã€‚</span></span><br /><span class="line"><span class="number">36</span>:                     <span class="keyword">if</span> (parameter != <span class="keyword">null</span> &amp;&amp; parameter.append()) {</span><br /><span class="line"><span class="number">37</span>:                         String pre = parameters.get(Constants.DEFAULT_KEY + <span class="string">"."</span> + key); <span class="comment">// default. é‡Œè·å–ï¼Œé€‚ç”¨äº ServiceConfig =ã€‹ProviderConfig ã€ReferenceConfig =ã€‹ConsumerConfig ã€‚</span></span><br /><span class="line"><span class="number">38</span>:                         <span class="keyword">if</span> (pre != <span class="keyword">null</span> &amp;&amp; pre.length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">39</span>:                             str = pre + <span class="string">","</span> + str;</span><br /><span class="line"><span class="number">40</span>:                         }</span><br /><span class="line"><span class="number">41</span>:                         pre = parameters.get(key); <span class="comment">// é€šè¿‡ `parameters` å±æ€§é…ç½®ï¼Œä¾‹å¦‚ `AbstractMethodConfig.parameters` ã€‚</span></span><br /><span class="line"><span class="number">42</span>:                         <span class="keyword">if</span> (pre != <span class="keyword">null</span> &amp;&amp; pre.length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">43</span>:                             str = pre + <span class="string">","</span> + str;</span><br /><span class="line"><span class="number">44</span>:                         }</span><br /><span class="line"><span class="number">45</span>:                     }</span><br /><span class="line"><span class="number">46</span>:                     <span class="keyword">if</span> (prefix != <span class="keyword">null</span> &amp;&amp; prefix.length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">47</span>:                         key = prefix + <span class="string">"."</span> + key;</span><br /><span class="line"><span class="number">48</span>:                     }</span><br /><span class="line"><span class="number">49</span>:                     parameters.put(key, str);</span><br /><span class="line"><span class="number">50</span>: <span class="comment">//                    System.out.println("kv:" + key + "\t" + str);</span></span><br /><span class="line"><span class="number">51</span>:                 } <span class="keyword">else</span> <span class="keyword">if</span> (parameter != <span class="keyword">null</span> &amp;&amp; parameter.required()) {</span><br /><span class="line"><span class="number">52</span>:                     <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(config.getClass().getSimpleName() + <span class="string">"."</span> + key + <span class="string">" == null"</span>);</span><br /><span class="line"><span class="number">53</span>:                 }</span><br /><span class="line"><span class="number">54</span>:             } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"getParameters"</span>.equals(name)</span><br /><span class="line"><span class="number">55</span>:                     &amp;&amp; Modifier.isPublic(method.getModifiers())</span><br /><span class="line"><span class="number">56</span>:                     &amp;&amp; method.getParameterTypes().length == <span class="number">0</span></span><br /><span class="line"><span class="number">57</span>:                     &amp;&amp; method.getReturnType() == Map.class) { <span class="comment">// `#getParameters()` æ–¹æ³•</span></span><br /><span class="line"><span class="number">58</span>:                 Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) method.invoke(config, <span class="keyword">new</span> Object[<span class="number">0</span>]);</span><br /><span class="line"><span class="number">59</span>:                 <span class="keyword">if</span> (map != <span class="keyword">null</span> &amp;&amp; map.size() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">60</span>:                     String pre = (prefix != <span class="keyword">null</span> &amp;&amp; prefix.length() &gt; <span class="number">0</span> ? prefix + <span class="string">"."</span> : <span class="string">""</span>);</span><br /><span class="line"><span class="number">61</span>:                     <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {</span><br /><span class="line"><span class="number">62</span>:                         parameters.put(pre + entry.getKey().replace(<span class="string">'-'</span>, <span class="string">'.'</span>), entry.getValue());</span><br /><span class="line"><span class="number">63</span>:                     }</span><br /><span class="line"><span class="number">64</span>:                 }</span><br /><span class="line"><span class="number">65</span>:             }</span><br /><span class="line"><span class="number">66</span>:         } <span class="keyword">catch</span> (Exception e) {</span><br /><span class="line"><span class="number">67</span>:             <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line"><span class="number">68</span>:         }</span><br /><span class="line"><span class="number">69</span>:     }</span><br /><span class="line"><span class="number">70</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li><code>parameters</code>&nbsp;ï¼Œå‚æ•°é›†åˆã€‚å®é™…ä¸Šï¼Œè¯¥é›†åˆä¼šç”¨äº&nbsp;<code>URL.parameters</code>&nbsp;ã€‚</li>
<li><code>config</code>&nbsp;ï¼Œé…ç½®å¯¹è±¡ã€‚</li>
<li><code>prefix</code>&nbsp;ï¼Œå±æ€§å‰ç¼€ã€‚ç”¨äºé…ç½®é¡¹æ·»åŠ åˆ°&nbsp;<code>parameters</code>&nbsp;ä¸­æ—¶çš„å‰ç¼€ã€‚</li>
<li>ç¬¬ 5 è¡Œï¼šè·å¾—æ‰€æœ‰æ–¹æ³•çš„æ•°ç»„ï¼Œä¸ºä¸‹é¢é€šè¿‡<strong>åå°„</strong>è·å¾—é…ç½®é¡¹çš„å€¼åšå‡†å¤‡ã€‚</li>
<li>ç¬¬ 6 è¡Œï¼š<strong>å¾ªç¯</strong>æ¯ä¸ªæ–¹æ³•ã€‚</li>
<li>ç¬¬ 9 è‡³ 13 è¡Œï¼šæ–¹æ³•ä¸ºè·å¾—<strong>åŸºæœ¬ç±»å‹</strong>&nbsp;+&nbsp;<code>public</code>&nbsp;çš„ getting æ–¹æ³•ã€‚
<ul>
<li>ç¬¬ 14 è‡³ 17 è¡Œï¼šè¿”å›å€¼ç±»å‹ä¸º Object æˆ–æ’é™¤(&nbsp;<a href="mailto:%60@Parameter.exclue" target="_blank" rel="external nofollow noopener noreferrer">`@Parameter.exclue</a>=true` )çš„é…ç½®é¡¹ï¼Œè·³è¿‡ã€‚</li>
<li>ç¬¬ 19 è‡³ 26 è¡Œï¼šè·å¾—é…ç½®é¡¹<strong>å</strong>ã€‚</li>
<li>ç¬¬ 28 è‡³ 48 è¡Œï¼šè·å¾—é…ç½®é¡¹<strong>å€¼</strong>ã€‚ä¸­é—´æœ‰ä¸€äº›é€»è¾‘å¤„ç†ï¼Œèƒ–å‹çœ‹ä¸‹ä»£ç çš„æ³¨é‡Šã€‚</li>
<li>ç¬¬ 49 è¡Œï¼šæ·»åŠ é…ç½®é¡¹åˆ°&nbsp;<code>parameters</code>&nbsp;ã€‚</li>
<li>ç¬¬ 51 è‡³ 53 è¡Œï¼šå½“&nbsp;<a href="mailto:%60@Parameter.required" target="_blank" rel="external nofollow noopener noreferrer">`@Parameter.required</a>&nbsp;= true` æ—¶ï¼Œæ ¡éªŒé…ç½®é¡¹éç©ºã€‚</li>
</ul>
</li>
<li>ç¬¬ 54 è‡³ 57 è¡Œï¼šå½“æ–¹æ³•ä¸º&nbsp;<code>#getParameters()</code>&nbsp;æ—¶ï¼Œ<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ApplicationConfig.java#L253-L255" target="_blank" rel="external nofollow noopener noreferrer">ä¾‹å¦‚</a>&nbsp;ã€‚
<ul>
<li>ç¬¬ 58 è¡Œï¼šé€šè¿‡åå°„ï¼Œè·å¾—&nbsp;<code>#getParameters()</code>&nbsp;çš„è¿”å›å€¼ä¸º&nbsp;<code>map</code>&nbsp;ã€‚</li>
<li>ç¬¬ 59 è‡³ 64 è¡Œï¼šå°†&nbsp;<code>map</code>&nbsp;æ·»åŠ åˆ°&nbsp;<code>parameters</code>&nbsp;ï¼Œkv æ ¼å¼ä¸º&nbsp;<code>prefix:entry.key</code>&nbsp;<code>entry.value</code>&nbsp;ã€‚</li>
<li>å› æ­¤ï¼Œé€šè¿‡&nbsp;<code>#getParameters()</code>&nbsp;å¯¹åº”çš„å±æ€§ï¼Œ<strong>åŠ¨æ€è®¾ç½®é…ç½®é¡¹ï¼Œæ‹“å±•å‡ºé Dubbo å†…ç½®å¥½çš„é€»è¾‘</strong>ã€‚</li>
</ul>
</li>
</ul>
<hr />
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L326-L363" target="_blank" rel="external nofollow noopener noreferrer"><code>#appendAttributes(parameters, config, prefix)</code></a>&nbsp;æ–¹æ³•ï¼Œå°†&nbsp;<code>@Parameter(attribute = true)</code>&nbsp;é…ç½®å¯¹è±¡çš„å±æ€§ï¼Œæ·»åŠ åˆ°å‚æ•°é›†åˆã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"> <span class="number">1</span>: <span class="function"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">appendAttributes</span><span class="params">(Map&lt;Object, Object&gt; parameters, Object config, String prefix)</span> </span>{</span><br /><span class="line"> <span class="number">2</span>:     <span class="keyword">if</span> (config == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">3</span>:         <span class="keyword">return</span>;</span><br /><span class="line"> <span class="number">4</span>:     }</span><br /><span class="line"> <span class="number">5</span>:     Method[] methods = config.getClass().getMethods();</span><br /><span class="line"> <span class="number">6</span>:     <span class="keyword">for</span> (Method method : methods) {</span><br /><span class="line"> <span class="number">7</span>:         <span class="keyword">try</span> {</span><br /><span class="line"> <span class="number">8</span>:             String name = method.getName();</span><br /><span class="line"> <span class="number">9</span>:             <span class="keyword">if</span> ((name.startsWith(<span class="string">"get"</span>) || name.startsWith(<span class="string">"is"</span>))</span><br /><span class="line"><span class="number">10</span>:                     &amp;&amp; !<span class="string">"getClass"</span>.equals(name)</span><br /><span class="line"><span class="number">11</span>:                     &amp;&amp; Modifier.isPublic(method.getModifiers())</span><br /><span class="line"><span class="number">12</span>:                     &amp;&amp; method.getParameterTypes().length == <span class="number">0</span></span><br /><span class="line"><span class="number">13</span>:                     &amp;&amp; isPrimitive(method.getReturnType())) { <span class="comment">// æ–¹æ³•ä¸ºè·å–åŸºæœ¬ç±»å‹ï¼Œpublic çš„ getting æ–¹æ³•ã€‚</span></span><br /><span class="line"><span class="number">14</span>:                 Parameter parameter = method.getAnnotation(Parameter.class);</span><br /><span class="line"><span class="number">15</span>:                 <span class="keyword">if</span> (parameter == <span class="keyword">null</span> || !parameter.attribute())</span><br /><span class="line"><span class="number">16</span>:                     <span class="keyword">continue</span>;</span><br /><span class="line"><span class="number">17</span>:                 <span class="comment">// è·å¾—å±æ€§å</span></span><br /><span class="line"><span class="number">18</span>:                 String key;</span><br /><span class="line"><span class="number">19</span>:                 <span class="keyword">if</span> (parameter != <span class="keyword">null</span> &amp;&amp; parameter.key() != <span class="keyword">null</span> &amp;&amp; parameter.key().length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">20</span>:                     key = parameter.key();</span><br /><span class="line"><span class="number">21</span>:                 } <span class="keyword">else</span> {</span><br /><span class="line"><span class="number">22</span>:                     <span class="keyword">int</span> i = name.startsWith(<span class="string">"get"</span>) ? <span class="number">3</span> : <span class="number">2</span>;</span><br /><span class="line"><span class="number">23</span>:                     key = name.substring(i, i + <span class="number">1</span>).toLowerCase() + name.substring(i + <span class="number">1</span>);</span><br /><span class="line"><span class="number">24</span>:                 }</span><br /><span class="line"><span class="number">25</span>:                 <span class="comment">// è·å¾—å±æ€§å€¼ï¼Œå­˜åœ¨åˆ™æ·»åŠ åˆ° `parameters` é›†åˆ</span></span><br /><span class="line"><span class="number">26</span>:                 Object value = method.invoke(config, <span class="keyword">new</span> Object[<span class="number">0</span>]);</span><br /><span class="line"><span class="number">27</span>:                 <span class="keyword">if</span> (value != <span class="keyword">null</span>) {</span><br /><span class="line"><span class="number">28</span>:                     <span class="keyword">if</span> (prefix != <span class="keyword">null</span> &amp;&amp; prefix.length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">29</span>:                         key = prefix + <span class="string">"."</span> + key;</span><br /><span class="line"><span class="number">30</span>:                     }</span><br /><span class="line"><span class="number">31</span>:                     parameters.put(key, value);</span><br /><span class="line"><span class="number">32</span>:                 }</span><br /><span class="line"><span class="number">33</span>:             }</span><br /><span class="line"><span class="number">34</span>:         } <span class="keyword">catch</span> (Exception e) {</span><br /><span class="line"><span class="number">35</span>:             <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line"><span class="number">36</span>:         }</span><br /><span class="line"><span class="number">37</span>:     }</span><br /><span class="line"><span class="number">38</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ä¸åŒäº&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L326-L363" target="_blank" rel="external nofollow noopener noreferrer"><code>#appendAttributes(parameters, config, prefix)</code></a>&nbsp;æ–¹æ³•ï¼Œä¸»è¦ç”¨äº&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/demos/events-notify.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; äº‹ä»¶é€šçŸ¥ã€‹</a>&nbsp;ï¼Œæ³¨è§£&nbsp;<code>@Parameter(attribute = true)</code>&nbsp;çš„å±æ€§å¦‚ä¸‹å›¾ï¼š<img src="http://static2.iocoder.cn/images/Dubbo/2018_01_07/05.png" alt="@Parameter(attribute = true)" /></li>
<li>ç¬¬ 9 è‡³ 13 è¡Œï¼šæ–¹æ³•ä¸ºè·å¾—<strong>åŸºæœ¬ç±»å‹</strong>&nbsp;+&nbsp;<code>public</code>&nbsp;çš„ getting æ–¹æ³•ã€‚</li>
<li>ç¬¬ 14 è‡³ 16 è¡Œï¼š<strong>éœ€è¦</strong>(&nbsp;<a href="mailto:%60@Parameter.exclue" target="_blank" rel="external nofollow noopener noreferrer">`@Parameter.exclue</a>=true` )çš„é…ç½®é¡¹ã€‚</li>
<li>ç¬¬ 17 è‡³ 24 è¡Œï¼šè·å¾—é…ç½®é¡¹<strong>å</strong>ã€‚</li>
<li>ç¬¬ 26 è‡³ 30 è¡Œï¼šè·å¾—é…ç½®é¡¹<strong>å€¼</strong>ã€‚</li>
<li>ç¬¬ 31 è¡Œï¼šæ·»åŠ é…ç½®é¡¹åˆ°&nbsp;<code>parameters</code>&nbsp;ã€‚</li>
</ul>
<hr />
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L139-L212" target="_blank" rel="external nofollow noopener noreferrer"><code>#appendProperties(config)</code></a>&nbsp;æ–¹æ³•ï¼Œè¯»å–ç¯å¢ƒå˜é‡å’Œ properties é…ç½®åˆ°é…ç½®å¯¹è±¡ã€‚åœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-properties/?self">ã€Šç²¾è¿› Dubbo æºç è§£æ &mdash;&mdash; å±æ€§é…ç½®ã€‹</a>&nbsp;è¯¦ç»†è§£æã€‚</p>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L505-L541" target="_blank" rel="external nofollow noopener noreferrer"><code>#appendAnnotation(annotationClass, annotation)</code></a>&nbsp;æ–¹æ³•ï¼Œè¯»å–æ³¨è§£é…ç½®åˆ°é…ç½®å¯¹è±¡ã€‚åœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-1/TODO">ã€Šç²¾è¿› Dubbo æºç è§£æ &mdash;&mdash; æ³¨è§£é…ç½®ã€‹</a>&nbsp;è¯¦ç»†è§£æã€‚</p>
<h2 id="3-2-ApplicationConfig">3.2 ApplicationConfig</h2>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ApplicationConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.ApplicationConfig</code></a>&nbsp;ï¼Œåº”ç”¨é…ç½®ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-application.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:applicationã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h2 id="3-3-RegistryConfig">3.3 RegistryConfig</h2>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/RegistryConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.RegistryConfig</code></a>&nbsp;ï¼Œæ³¨å†Œä¸­å¿ƒé…ç½®ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-registry.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:registryã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h2 id="3-4-ModuleConfig">3.4 ModuleConfig</h2>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ModuleConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.ModuleConfig</code></a>&nbsp;ï¼Œæ¨¡å—ä¿¡æ¯é…ç½®ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-module.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:moduleã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h2 id="3-5-MonitorConfig">3.5 MonitorConfig</h2>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/MonitorConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.MonitorConfig</code></a>&nbsp;ï¼Œç›‘æ§ä¸­å¿ƒé…ç½®ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-monitor.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:monitorã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h2 id="3-6-ArgumentConfig">3.6 ArgumentConfig</h2>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ArgumentConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.ArgumentConfig</code></a>&nbsp;ï¼Œæ–¹æ³•å‚æ•°é…ç½®ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-argument.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:argumentã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
<li>è¯¥é…ç½®ç±»è®¾ç½®åˆ° MethodConfig å¯¹è±¡ä¸­ï¼Œåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-2/?self">ã€ŠAPI é…ç½®ï¼ˆäºŒï¼‰ä¹‹æœåŠ¡æä¾›è€…ã€‹</a>&nbsp;æˆ‘ä»¬ä¼šçœ‹åˆ°ã€‚</li>
<li>åœ¨&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/demos/callback-parameter.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; å‚æ•°å›è°ƒã€‹</a>&nbsp;ç‰¹æ€§ä¸­ä½¿ç”¨ã€‚</li>
</ul>
<h1 id="4-URL">4. URL</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.common.URL</code></a>&nbsp;ï¼ŒDubbo URL ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">URL</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>{</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * åè®®å</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String protocol;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * ç”¨æˆ·å</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String username;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * å¯†ç </span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String password;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * by default, host to registry</span></span><br /><span class="line"><span class="comment">     * åœ°å€</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String host;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * by default, port to registry</span></span><br /><span class="line"><span class="comment">     * ç«¯å£</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> port;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * è·¯å¾„ï¼ˆæœåŠ¡åï¼‰</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String path;</span><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * å‚æ•°é›†åˆ</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, String&gt; parameters;</span><br />    <br /><span class="line">    <span class="comment">// ... çœç•¥å…¶ä»–ä»£ç </span></span><br />    <br /><span class="line">}</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>
<p>ä¸Šæ–‡æˆ‘ä»¬æåˆ°<strong>æ‰€æœ‰é…ç½®æœ€ç»ˆéƒ½å°†è½¬æ¢ä¸º Dubbo URL è¡¨ç¤ºï¼Œå¹¶ç”±æœåŠ¡æä¾›æ–¹ç”Ÿæˆï¼Œç»æ³¨å†Œä¸­å¿ƒä¼ é€’ç»™æ¶ˆè´¹æ–¹ï¼Œå„å±æ€§å¯¹åº” URL çš„å‚æ•°ï¼Œå‚è§é…ç½®é¡¹ä¸€è§ˆè¡¨ä¸­çš„ &ldquo;å¯¹åº”URLå‚æ•°&rdquo; åˆ—</strong>ã€‚é‚£ä¹ˆä¸€ä¸ª Service æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒçš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line">dubbo://192.168.3.17:20880/com.alibaba.dubbo.demo.DemoService?anyhost=true&amp;application=demo-provider&amp;default.delay=-1&amp;default.retries=0&amp;default.service.filter=demoFilter&amp;delay=-1&amp;dubbo=2.0.0&amp;generic=false&amp;interface=com.alibaba.dubbo.demo.DemoService&amp;methods=sayHello&amp;pid=19031&amp;side=provider&amp;timestamp=1519651641799</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>æ ¼å¼ä¸º&nbsp;<code>protocol://username:password@host:port/path?key=value&amp;key=value</code>&nbsp;ï¼Œé€šè¿‡&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java#L1176-L1217" target="_blank" rel="external nofollow noopener noreferrer"><code>URL#buildString(...)</code></a>&nbsp;æ–¹æ³•ç”Ÿæˆã€‚</li>
</ul>
</li>
<li>
<p><code>parameters</code>&nbsp;å±æ€§ï¼Œå‚æ•°é›†åˆã€‚ä»ä¸Šé¢çš„ Service URL ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé‡Œé¢çš„&nbsp;<code>key=value</code>&nbsp;ï¼Œå®é™…ä¸Šå°±æ˜¯ Service å¯¹åº”çš„é…ç½®é¡¹ã€‚è¯¥å±æ€§ï¼Œé€šè¿‡&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L244-L313" target="_blank" rel="external nofollow noopener noreferrer"><code>AbstractConfig#appendParameters(parameters, config, prefix)</code></a>&nbsp;æ–¹æ³•ç”Ÿæˆã€‚</p>
</li>
<li>ğŸ™‚ åœ¨åç»­çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç° URL ä½œä¸ºä¸€ä¸ª<strong>é€šç”¨æ¨¡å‹</strong>ï¼Œè´¯ç©¿æ•´ä¸ª RPC æµç¨‹ã€‚</li>
</ul>
<h1 id="5-Parameter">5. @Parameter</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/support/Parameter.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.support.@Parameter</code></a>&nbsp;ï¼ŒParameter å‚æ•°<strong>æ³¨è§£</strong>ï¼Œç”¨äº Dubbo URL çš„&nbsp;<code>parameters</code>&nbsp;æ‹¼æ¥ã€‚</p>
<p>åœ¨é…ç½®å¯¹è±¡çš„ getting æ–¹æ³•ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥æ³¨è§£çš„ä½¿ç”¨ï¼Œä¾‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Dubbo/2018_01_07/04.png" alt="@Parameter ä½¿ç”¨åœºæ™¯" /></p>
<p>@Parameter ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="meta">@Documented</span></span><br /><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br /><span class="line"><span class="meta">@Target</span>({ElementType.METHOD})</span><br /><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Parameter {</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * é”®ï¼ˆåˆ«åï¼‰</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function">String <span class="title">key</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ˜¯å¦å¿…å¡«</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">required</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ˜¯å¦å¿½ç•¥</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">excluded</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ˜¯å¦è½¬ä¹‰</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">escaped</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ˜¯å¦ä¸ºå±æ€§</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * ç›®å‰ç”¨äºã€Šäº‹ä»¶é€šçŸ¥ã€‹http://dubbo.apache.org/zh-cn/docs/user/demos/events-notify.html</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">attribute</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br /><br /><span class="line">    <span class="comment">/**</span></span><br /><span class="line"><span class="comment">     * æ˜¯å¦æ‹¼æ¥é»˜è®¤å±æ€§ï¼Œå‚è§ {<span class="doctag">@link</span> com.alibaba.dubbo.config.AbstractConfig#appendParameters(Map, Object, String)} æ–¹æ³•ã€‚</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * æˆ‘ä»¬æ¥çœ‹çœ‹ `#append() = true` çš„å±æ€§ï¼Œæœ‰å¦‚ä¸‹å››ä¸ªï¼š</span></span><br /><span class="line"><span class="comment">     *   + {<span class="doctag">@link</span> AbstractInterfaceConfig#getFilter()}</span></span><br /><span class="line"><span class="comment">     *   + {<span class="doctag">@link</span> AbstractInterfaceConfig#getListener()}</span></span><br /><span class="line"><span class="comment">     *   + {<span class="doctag">@link</span> AbstractReferenceConfig#getFilter()}</span></span><br /><span class="line"><span class="comment">     *   + {<span class="doctag">@link</span> AbstractReferenceConfig#getListener()}</span></span><br /><span class="line"><span class="comment">     *   + {<span class="doctag">@link</span> AbstractServiceConfig#getFilter()}</span></span><br /><span class="line"><span class="comment">     *   + {<span class="doctag">@link</span> AbstractServiceConfig#getListener()}</span></span><br /><span class="line"><span class="comment">     * é‚£ä¹ˆï¼Œä»¥ AbstractServiceConfig ä¸¾ä¾‹å­ã€‚</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * æˆ‘ä»¬çŸ¥é“ ProviderConfig å’Œ ServiceConfig ç»§æ‰¿ AbstractServiceConfig ç±»ï¼Œé‚£ä¹ˆ `filter` , `listener` å¯¹åº”çš„ç›¸åŒçš„é”®ã€‚</span></span><br /><span class="line"><span class="comment">     * ä¸‹é¢æˆ‘ä»¬ä»¥ `filter` ä¸¾ä¾‹å­ã€‚</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * åœ¨ ServiceConfig ä¸­ï¼Œé»˜è®¤ä¼š&lt;b&gt;ç»§æ‰¿&lt;/b&gt; ProviderConfig é…ç½®çš„ `filter` å’Œ `listener` ã€‚</span></span><br /><span class="line"><span class="comment">     * æ‰€ä»¥è¿™ä¸ªå±æ€§ï¼Œå°±æ˜¯ç”¨äºï¼Œåƒ ServiceConfig çš„è¿™ç§æƒ…å†µï¼Œä» ProviderConfig è¯»å–çˆ¶å±æ€§ã€‚</span></span><br /><span class="line"><span class="comment">     *</span></span><br /><span class="line"><span class="comment">     * ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœ `ProviderConfig.filter=aaaFilter` ï¼Œ`ServiceConfig.filter=bbbFilter` ï¼Œæœ€ç»ˆæš´éœ²åˆ° Dubbo URL æ—¶ï¼Œå‚æ•°ä¸º `service.filter=aaaFilter,bbbFilter` ã€‚</span></span><br /><span class="line"><span class="comment">     */</span></span><br /><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">append</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>èƒ–å‹å¯ä»¥ç®€å•çœ‹ä¸‹ä»£ç ä¸­çš„<strong>æ³¨é‡Š</strong>ï¼Œç»“åˆå…·ä½“ä½¿ç”¨çš„æ–¹æ³•ï¼Œåœ¨ç»†ç»†ç†è§£ã€‚</li>
</ul>
</div>