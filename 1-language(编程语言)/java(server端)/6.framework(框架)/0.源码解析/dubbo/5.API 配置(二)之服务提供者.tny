<header class="article-header">
<h1 class="article-title">API é…ç½®ï¼ˆäºŒï¼‰ä¹‹æœåŠ¡æä¾›è€…</h1>
</header>
<div class="article-entry">
<blockquote>
<p>æœ¬æ–‡åŸºäº Dubbo 2.6.1 ç‰ˆæœ¬ï¼Œæœ›çŸ¥æ‚‰ã€‚</p>
</blockquote>
<blockquote>
<p>å‹æƒ…æç¤ºï¼Œã€<strong>é…ç½®</strong>ã€‘è¿™å—çš„å†…å®¹ï¼Œä¼šç›¸å¯¹æ¯”è¾ƒæ¯ç‡¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœçœ‹åˆ°ä¸€äº›å¾ˆéš¾æ‡‚çš„åœ°æ–¹ï¼Œå»ºè®®å…ˆè·³è¿‡ã€‚</p>
<p>å¯¹äº Dubbo ï¼Œé‡ç‚¹æ˜¯è¦å»ç†è§£ï¼Œå¤šåè®®ã€RPCã€å®¹é”™ç­‰ç­‰æ¨¡å—ï¼Œè€Œä¸æ˜¯ã€<strong>é…ç½®</strong>ã€‘ã€‚</p>
<p>ğŸ˜ˆ ä¼°è®¡å¥½å¤šèƒ–å‹è¢«ã€<strong>é…ç½®</strong>ã€‘è¿™ç« åŠé€€äº†æŠŠï¼Ÿï¼Ÿï¼Ÿ</p>
</blockquote>
<h1 id="1-æ¦‚è¿°">1. æ¦‚è¿°</h1>
<p>æœ¬æ–‡æ¥&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-1/">ã€ŠAPI é…ç½®ï¼ˆä¸€ï¼‰ä¹‹åº”ç”¨ã€‹</a>&nbsp;ï¼Œåˆ†äº«<strong>æœåŠ¡æä¾›è€…</strong>ç›¸å…³çš„é…ç½®ï¼šåŒ…æ‹¬ provider-config å’Œ sub-config éƒ¨åˆ†ã€‚</p>
<p><img src="http://static2.iocoder.cn/images/Dubbo/2018_01_07/03.png" alt="é…ç½®ç±»å…³ç³»" /></p>
<ul>
<li><strong>é»„æ¡†</strong>éƒ¨åˆ†ï¼Œprovider-side</li>
<li><strong>å…¶ä»–</strong>éƒ¨åˆ†ï¼Œsub-config</li>
</ul>
<hr />
<p>è¿˜æ˜¯è€æ ·å­ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µ&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/configuration/api.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; API é…ç½®ã€‹</a>&nbsp;ï¼ŒæœåŠ¡æä¾›è€…çš„åˆå§‹åŒ–ä»£ç ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"><span class="comment">// æœåŠ¡å®ç°</span></span><br /><span class="line">XxxService xxxService = <span class="keyword">new</span> XxxServiceImpl();</span><br /><br /><span class="line"><span class="comment">// å½“å‰åº”ç”¨é…ç½®</span></span><br /><span class="line">ApplicationConfig application = <span class="keyword">new</span> ApplicationConfig();</span><br /><span class="line">application.setName(<span class="string">"xxx"</span>);</span><br /><br /><span class="line"><span class="comment">// è¿æ¥æ³¨å†Œä¸­å¿ƒé…ç½®</span></span><br /><span class="line">RegistryConfig registry = <span class="keyword">new</span> RegistryConfig();</span><br /><span class="line">registry.setAddress(<span class="string">"10.20.130.230:9090"</span>);</span><br /><span class="line">registry.setUsername(<span class="string">"aaa"</span>);</span><br /><span class="line">registry.setPassword(<span class="string">"bbb"</span>);</span><br /><br /><span class="line"><span class="comment">// æœåŠ¡æä¾›è€…åè®®é…ç½®</span></span><br /><span class="line">ProtocolConfig protocol = <span class="keyword">new</span> ProtocolConfig();</span><br /><span class="line">protocol.setName(<span class="string">"dubbo"</span>);</span><br /><span class="line">protocol.setPort(<span class="number">12345</span>);</span><br /><span class="line">protocol.setThreads(<span class="number">200</span>);</span><br /><br /><span class="line"><span class="comment">// æ³¨æ„ï¼šServiceConfigä¸ºé‡å¯¹è±¡ï¼Œå†…éƒ¨å°è£…äº†ä¸æ³¨å†Œä¸­å¿ƒçš„è¿æ¥ï¼Œä»¥åŠå¼€å¯æœåŠ¡ç«¯å£</span></span><br /><br /><span class="line"><span class="comment">// æœåŠ¡æä¾›è€…æš´éœ²æœåŠ¡é…ç½®</span></span><br /><span class="line">ServiceConfig&lt;XxxService&gt; service = <span class="keyword">new</span> ServiceConfig&lt;XxxService&gt;(); <span class="comment">// æ­¤å®ä¾‹å¾ˆé‡ï¼Œå°è£…äº†ä¸æ³¨å†Œä¸­å¿ƒçš„è¿æ¥ï¼Œè¯·è‡ªè¡Œç¼“å­˜ï¼Œå¦åˆ™å¯èƒ½é€ æˆå†…å­˜å’Œè¿æ¥æ³„æ¼</span></span><br /><span class="line">service.setApplication(application);</span><br /><span class="line">service.setRegistry(registry); <span class="comment">// å¤šä¸ªæ³¨å†Œä¸­å¿ƒå¯ä»¥ç”¨setRegistries()</span></span><br /><span class="line">service.setProtocol(protocol); <span class="comment">// å¤šä¸ªåè®®å¯ä»¥ç”¨setProtocols()</span></span><br /><span class="line">service.setInterface(XxxService.class);</span><br /><span class="line">service.setRef(xxxService);</span><br /><span class="line">service.setVersion(<span class="string">"1.0.0"</span>);</span><br /><br /><span class="line"><span class="comment">// æš´éœ²åŠæ³¨å†ŒæœåŠ¡</span></span><br /><span class="line">service.export();</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ç›¸æ¯” ReferenceConfig çš„åˆå§‹åŒ–ï¼Œä¼šå¤šåˆ›å»º ProtocolConfig å¯¹è±¡ï¼Œè®¾ç½®åˆ° ServiceConfig å¯¹è±¡ä¸­ã€‚</li>
</ul>
<blockquote>
<p>å‹æƒ…æç¤ºï¼šæœ¬æ–‡å‰é¢éƒ¨åˆ†ä¼šæ¯”è¾ƒçç¢ï¼Œé‡ç‚¹åœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-2/">ã€Œ8. ServiceConfigã€</a>&nbsp;éƒ¨åˆ†ã€‚</p>
</blockquote>
<h1 id="2-ProtocolConfig">2. ProtocolConfig</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ProtocolConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.ProtocolConfig</code></a>&nbsp;ï¼ŒæœåŠ¡æä¾›è€…åè®®é…ç½®ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-protocol.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:protocolã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h1 id="3-AbstractMethodConfig">3. AbstractMethodConfig</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractMethodConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.AbstractMethodConfig</code></a>&nbsp;ï¼Œæ–¹æ³•çº§é…ç½®çš„æŠ½è±¡ç±»ã€‚</p>
<ul>
<li><strong>éƒ¨åˆ†</strong>å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-method.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:methodã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h1 id="4-MethodConfig">4. MethodConfig</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractMethodConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.MethodConfig</code></a>&nbsp;ï¼Œç»§æ‰¿ AbstractMethodConfig ï¼Œæ–¹æ³•çº§é…ç½®ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œ<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-method.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:methodã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h1 id="5-AbstractInterfaceConfig">5. AbstractInterfaceConfig</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.AbstractInterfaceConfig</code></a>&nbsp;ï¼Œç»§æ‰¿ AbstractMethodConfig ï¼ŒæŠ½è±¡æ¥å£é…ç½®ç±»ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œ<strong>éœ€è¦å¯»æ‰¾</strong>åœ¨&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-service.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:serviceã€‹</a>&nbsp;æˆ–&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-reference.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:referenceã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
<li>ä¸‹é¢çš„æ–¹æ³•ï¼Œä¼šåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-2/">ã€Œ8. ServiceConfigã€</a>&nbsp;çš„åˆå§‹åŒ–è¢«è°ƒç”¨ï¼Œèƒ–å‹å¯éœ€è¦çš„æ—¶å€™ï¼Œç‚¹å‡»æŸ¥çœ‹ã€‚</li>
<li><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L156-L187" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkApplication()</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒ ApplicationConfig é…ç½®ã€‚<strong>å®é™…ä¸Š</strong>ï¼Œè¯¥æ–¹æ³•ä¼šåˆå§‹åŒ– ApplicationConfig çš„é…ç½®å±æ€§ã€‚
<ul>
<li>ğŸ™‚ ç›´æ¥ç‚¹å‡»æ–¹æ³•æŸ¥çœ‹ï¼Œè¾ƒä¸ºç®€å•ï¼Œå·²ç»æ·»åŠ è¯¦ç»†æ³¨é‡Šã€‚</li>
</ul>
</li>
<li><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L122-L154" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkRegistry()</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒ RegistryConfig é…ç½®ã€‚<strong>å®é™…ä¸Š</strong>ï¼Œè¯¥æ–¹æ³•ä¼šåˆå§‹åŒ– RegistryConfig çš„é…ç½®å±æ€§ã€‚
<ul>
<li>ğŸ™‚ ç›´æ¥ç‚¹å‡»æ–¹æ³•æŸ¥çœ‹ï¼Œè¾ƒä¸ºç®€å•ï¼Œå·²ç»æ·»åŠ è¯¦ç»†æ³¨é‡Šã€‚</li>
</ul>
</li>
<li><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L280-L317" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkInterfaceAndMethods(interfaceClass, methods)</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒæ¥å£å’Œæ–¹æ³•ã€‚ä¸»è¦æ˜¯ä¸¤æ–¹é¢ï¼š
<ul>
<li>1ã€ æ¥å£ç±»éç©ºï¼Œå¹¶æ˜¯æ¥å£</li>
<li>2ã€ æ–¹æ³•åœ¨æ¥å£ä¸­å·²å®šä¹‰</li>
<li>ğŸ™‚ ç›´æ¥ç‚¹å‡»æ–¹æ³•æŸ¥çœ‹ï¼Œè¾ƒä¸ºç®€å•ï¼Œå·²ç»æ·»åŠ è¯¦ç»†æ³¨é‡Šã€‚</li>
</ul>
</li>
<li><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L319-L368" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkStubAndMock(interfaceClass)</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒ Stub å’Œ Mock ç›¸å…³çš„é…ç½®ã€‚</li>
<li>ä»¥ä¸Šæœªåˆ—ä¸¾çš„&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L189-L233" target="_blank" rel="external nofollow noopener noreferrer"><code>#loadRegistries(provider)</code></a>&nbsp;å’Œ&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L235-L278" target="_blank" rel="external nofollow noopener noreferrer"><code>#loadMonitor(registryURL)</code></a>&nbsp;æ–¹æ³•ï¼Œåœ¨<strong>åç»­æ–‡ç« </strong>éœ€è¦ä½¿ç”¨åˆ°æ—¶ï¼Œåœ¨è¯¦ç»†åˆ†äº«ã€‚</li>
</ul>
<h1 id="6-AbstractServiceConfig">6. AbstractServiceConfig</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractServiceConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.AbstractServiceConfig</code></a>&nbsp;ï¼Œå®ç° AbstractInterfaceConfig ï¼ŒæŠ½è±¡æœåŠ¡é…ç½®ç±»ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œ<strong>éœ€è¦å¯»æ‰¾</strong>åœ¨&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-service.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:serviceã€‹</a>&nbsp;æˆ–&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-provider.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:providerã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h1 id="7-ProviderConfig">7. ProviderConfig</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ProviderConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.ProviderConfig</code></a>&nbsp;ï¼Œå®ç° AbstractServiceConfig ï¼ŒæœåŠ¡æä¾›è€…ç¼ºçœå€¼é…ç½®ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-provider.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:providerã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<h1 id="8-ServiceConfig">8. ServiceConfig</h1>
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java" target="_blank" rel="external nofollow noopener noreferrer"><code>com.alibaba.dubbo.config.ServiceConfig</code></a>&nbsp;ï¼ŒæœåŠ¡æä¾›è€…æš´éœ²<strong>æœåŠ¡é…ç½®ç±»</strong>ã€‚</p>
<ul>
<li>å…·ä½“å±æ€§çš„è§£é‡Šï¼Œå‚è§&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-service.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; dubbo:serviceã€‹</a>&nbsp;æ–‡æ¡£ã€‚</li>
</ul>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬è¿›å…¥<strong>æ­£æˆ</strong>ã€‚</p>
<p>åœ¨æ–‡åˆçš„ ServiceConfig çš„åˆå§‹åŒ–ç¤ºä¾‹ä»£ç ä¸­ï¼Œæœ€åè°ƒç”¨çš„æ˜¯&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L239" target="_blank" rel="external nofollow noopener noreferrer"><code>ServiceConfig#export()</code></a>&nbsp;æ–¹æ³•ã€‚ä»æ–¹æ³•çš„å‘½åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ<strong>æš´éœ²æœåŠ¡</strong>ã€‚è¯¥æ–¹æ³•ä¸»è¦åšäº†å¦‚ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li><strong>è¿›ä¸€æ­¥åˆå§‹åŒ–</strong>&nbsp;ServiceConfig å¯¹è±¡ã€‚</li>
<li><strong>æ ¡éªŒ</strong>&nbsp;ServiceConfig å¯¹è±¡çš„é…ç½®é¡¹ã€‚</li>
<li>ä½¿ç”¨ ServiceConfig å¯¹è±¡ï¼Œ<strong>ç”Ÿæˆ</strong>&nbsp;Dubbo URL å¯¹è±¡<strong>æ•°ç»„</strong>ã€‚</li>
<li>ä½¿ç”¨ Dubbo URL å¯¹è±¡ï¼Œ<strong>æš´éœ²æœåŠ¡</strong>ã€‚</li>
</ol>
<p>ğŸ˜ˆ æœ¬æ–‡é‡ç‚¹åœ¨æœåŠ¡æä¾›è€…ç›¸å…³çš„é…ç½®ï¼Œå› æ­¤åªè§£æ&nbsp;<strong>1+2+3</strong>&nbsp;éƒ¨åˆ†( ä¸åŒ…æ‹¬ 4 )ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"> <span class="number">1</span>: <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">export</span><span class="params">()</span> </span>{</span><br /><span class="line"> <span class="number">2</span>:     <span class="comment">// å½“ export æˆ–è€… delay æœªé…ç½®ï¼Œä» ProviderConfig å¯¹è±¡è¯»å–ã€‚</span></span><br /><span class="line"> <span class="number">3</span>:     <span class="keyword">if</span> (provider != <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">4</span>:         <span class="keyword">if</span> (export == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">5</span>:             export = provider.getExport();</span><br /><span class="line"> <span class="number">6</span>:         }</span><br /><span class="line"> <span class="number">7</span>:         <span class="keyword">if</span> (delay == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">8</span>:             delay = provider.getDelay();</span><br /><span class="line"> <span class="number">9</span>:         }</span><br /><span class="line"><span class="number">10</span>:     }</span><br /><span class="line"><span class="number">11</span>:     <span class="comment">// ä¸æš´éœ²æœåŠ¡( export = false ) ï¼Œåˆ™ä¸è¿›è¡Œæš´éœ²æœåŠ¡é€»è¾‘ã€‚</span></span><br /><span class="line"><span class="number">12</span>:     <span class="keyword">if</span> (export != <span class="keyword">null</span> &amp;&amp; !export) {</span><br /><span class="line"><span class="number">13</span>:         <span class="keyword">return</span>;</span><br /><span class="line"><span class="number">14</span>:     }</span><br /><span class="line"><span class="number">15</span>: </span><br /><span class="line"><span class="number">16</span>:     <span class="comment">// å»¶è¿Ÿæš´éœ²</span></span><br /><span class="line"><span class="number">17</span>:     <span class="keyword">if</span> (delay != <span class="keyword">null</span> &amp;&amp; delay &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">18</span>:         delayExportExecutor.schedule(<span class="keyword">new</span> Runnable() {</span><br /><span class="line"><span class="number">19</span>:             <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br /><span class="line"><span class="number">20</span>:                 doExport();</span><br /><span class="line"><span class="number">21</span>:             }</span><br /><span class="line"><span class="number">22</span>:         }, delay, TimeUnit.MILLISECONDS);</span><br /><span class="line"><span class="number">23</span>:     <span class="comment">// ç«‹å³æš´éœ²</span></span><br /><span class="line"><span class="number">24</span>:     } <span class="keyword">else</span> {</span><br /><span class="line"><span class="number">25</span>:         doExport();</span><br /><span class="line"><span class="number">26</span>:     }</span><br /><span class="line"><span class="number">27</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ç¬¬ 2 è‡³ 10 è¡Œï¼šå½“&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractServiceConfig.java#L48" target="_blank" rel="external nofollow noopener noreferrer"><code>export</code></a>&nbsp;æˆ–&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractServiceConfig.java#L45" target="_blank" rel="external nofollow noopener noreferrer"><code>delay</code></a>&nbsp;æœªé…ç½®æ—¶ï¼Œä» ProviderConfig å¯¹è±¡è¯»å–ã€‚</li>
<li>ç¬¬ 11 è‡³ 14 è¡Œï¼šå½“é…ç½®ä¸éœ€è¦æš´éœ²æœåŠ¡(&nbsp;<code>export = false</code>&nbsp;)æ—¶ï¼Œç›´æ¥è¿”å›ã€‚</li>
<li>ç¬¬ 17 è‡³ 22 è¡Œï¼šå½“é…ç½®å»¶è¿Ÿæš´éœ²(&nbsp;<code>delay &gt; 0</code>&nbsp;)æ—¶ï¼Œä½¿ç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L86" target="_blank" rel="external nofollow noopener noreferrer"><code>delayExportExecutor</code></a>&nbsp;<strong>å»¶è¿Ÿ</strong>è°ƒåº¦ï¼Œè°ƒç”¨&nbsp;<code>#doExport()</code>&nbsp;æ–¹æ³•ã€‚
<ul>
<li><a href="http://dubbo.apache.org/zh-cn/docs/user/demos/delay-publish.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; å»¶è¿Ÿæš´éœ²ã€‹</a></li>
</ul>
</li>
<li>ç¬¬ 23 è‡³ 26 è¡Œï¼šç«‹å³æš´éœ²ï¼Œè°ƒç”¨&nbsp;<code>#doExport()</code>&nbsp;æ–¹æ³•ã€‚</li>
</ul>
<hr />
<p><a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L267-L391" target="_blank" rel="external nofollow noopener noreferrer"><code>#doExport()</code></a>&nbsp;æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line">  <span class="number">1</span>: <span class="function"><span class="keyword">protected</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">doExport</span><span class="params">()</span> </span>{</span><br /><span class="line">  <span class="number">2</span>:     <span class="comment">// æ£€æŸ¥æ˜¯å¦å¯ä»¥æš´éœ²ï¼Œè‹¥å¯ä»¥ï¼Œæ ‡è®°å·²ç»æš´éœ²ã€‚</span></span><br /><span class="line">  <span class="number">3</span>:     <span class="keyword">if</span> (unexported) {</span><br /><span class="line">  <span class="number">4</span>:         <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Already unexported!"</span>);</span><br /><span class="line">  <span class="number">5</span>:     }</span><br /><span class="line">  <span class="number">6</span>:     <span class="keyword">if</span> (exported) {</span><br /><span class="line">  <span class="number">7</span>:         <span class="keyword">return</span>;</span><br /><span class="line">  <span class="number">8</span>:     }</span><br /><span class="line">  <span class="number">9</span>:     exported = <span class="keyword">true</span>;</span><br /><span class="line"> <span class="number">10</span>:     <span class="comment">// æ ¡éªŒæ¥å£åéç©º</span></span><br /><span class="line"> <span class="number">11</span>:     <span class="keyword">if</span> (interfaceName == <span class="keyword">null</span> || interfaceName.length() == <span class="number">0</span>) {</span><br /><span class="line"> <span class="number">12</span>:         <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"&lt;dubbo:service interface=\"\" /&gt; interface not allow null!"</span>);</span><br /><span class="line"> <span class="number">13</span>:     }</span><br /><span class="line"> <span class="number">14</span>:     <span class="comment">// æ‹¼æ¥å±æ€§é…ç½®ï¼ˆç¯å¢ƒå˜é‡ + properties å±æ€§ï¼‰åˆ° ProviderConfig å¯¹è±¡</span></span><br /><span class="line"> <span class="number">15</span>:     checkDefault();</span><br /><span class="line"> <span class="number">16</span>:     <span class="comment">// ä» ProviderConfig å¯¹è±¡ä¸­ï¼Œè¯»å– applicationã€moduleã€registriesã€monitorã€protocols é…ç½®å¯¹è±¡ã€‚</span></span><br /><span class="line"> <span class="number">17</span>:     <span class="keyword">if</span> (provider != <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">18</span>:         <span class="keyword">if</span> (application == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">19</span>:             application = provider.getApplication();</span><br /><span class="line"> <span class="number">20</span>:         }</span><br /><span class="line"> <span class="number">21</span>:         <span class="keyword">if</span> (<span class="keyword">module</span> == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">22</span>:             <span class="keyword">module</span> = provider.getModule();</span><br /><span class="line"> <span class="number">23</span>:         }</span><br /><span class="line"> <span class="number">24</span>:         <span class="keyword">if</span> (registries == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">25</span>:             registries = provider.getRegistries();</span><br /><span class="line"> <span class="number">26</span>:         }</span><br /><span class="line"> <span class="number">27</span>:         <span class="keyword">if</span> (monitor == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">28</span>:             monitor = provider.getMonitor();</span><br /><span class="line"> <span class="number">29</span>:         }</span><br /><span class="line"> <span class="number">30</span>:         <span class="keyword">if</span> (protocols == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">31</span>:             protocols = provider.getProtocols();</span><br /><span class="line"> <span class="number">32</span>:         }</span><br /><span class="line"> <span class="number">33</span>:     }</span><br /><span class="line"> <span class="number">34</span>:     <span class="comment">// ä» ModuleConfig å¯¹è±¡ä¸­ï¼Œè¯»å– registriesã€monitor é…ç½®å¯¹è±¡ã€‚</span></span><br /><span class="line"> <span class="number">35</span>:     <span class="keyword">if</span> (<span class="keyword">module</span> != <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">36</span>:         <span class="keyword">if</span> (registries == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">37</span>:             registries = <span class="keyword">module</span>.getRegistries();</span><br /><span class="line"> <span class="number">38</span>:         }</span><br /><span class="line"> <span class="number">39</span>:         <span class="keyword">if</span> (monitor == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">40</span>:             monitor = <span class="keyword">module</span>.getMonitor();</span><br /><span class="line"> <span class="number">41</span>:         }</span><br /><span class="line"> <span class="number">42</span>:     }</span><br /><span class="line"> <span class="number">43</span>:     <span class="comment">// ä» ApplicationConfig å¯¹è±¡ä¸­ï¼Œè¯»å– registriesã€monitor é…ç½®å¯¹è±¡ã€‚</span></span><br /><span class="line"> <span class="number">44</span>:     <span class="keyword">if</span> (application != <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">45</span>:         <span class="keyword">if</span> (registries == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">46</span>:             registries = application.getRegistries();</span><br /><span class="line"> <span class="number">47</span>:         }</span><br /><span class="line"> <span class="number">48</span>:         <span class="keyword">if</span> (monitor == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">49</span>:             monitor = application.getMonitor();</span><br /><span class="line"> <span class="number">50</span>:         }</span><br /><span class="line"> <span class="number">51</span>:     }</span><br /><span class="line"> <span class="number">52</span>:     <span class="comment">// æ³›åŒ–æ¥å£çš„å®ç°</span></span><br /><span class="line"> <span class="number">53</span>:     <span class="keyword">if</span> (ref <span class="keyword">instanceof</span> GenericService) {</span><br /><span class="line"> <span class="number">54</span>:         interfaceClass = GenericService.class;</span><br /><span class="line"> <span class="number">55</span>:         <span class="keyword">if</span> (StringUtils.isEmpty(generic)) {</span><br /><span class="line"> <span class="number">56</span>:             generic = Boolean.TRUE.toString();</span><br /><span class="line"> <span class="number">57</span>:         }</span><br /><span class="line"> <span class="number">58</span>:     <span class="comment">// æ™®é€šæ¥å£çš„å®ç°</span></span><br /><span class="line"> <span class="number">59</span>:     } <span class="keyword">else</span> {</span><br /><span class="line"> <span class="number">60</span>:         <span class="keyword">try</span> {</span><br /><span class="line"> <span class="number">61</span>:             interfaceClass = Class.forName(interfaceName, <span class="keyword">true</span>, Thread.currentThread().getContextClassLoader());</span><br /><span class="line"> <span class="number">62</span>:         } <span class="keyword">catch</span> (ClassNotFoundException e) {</span><br /><span class="line"> <span class="number">63</span>:             <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line"> <span class="number">64</span>:         }</span><br /><span class="line"> <span class="number">65</span>:         <span class="comment">// æ ¡éªŒæ¥å£å’Œæ–¹æ³•</span></span><br /><span class="line"> <span class="number">66</span>:         checkInterfaceAndMethods(interfaceClass, methods);</span><br /><span class="line"> <span class="number">67</span>:         <span class="comment">// æ ¡éªŒæŒ‡å‘çš„ service å¯¹è±¡</span></span><br /><span class="line"> <span class="number">68</span>:         checkRef();</span><br /><span class="line"> <span class="number">69</span>:         generic = Boolean.FALSE.toString();</span><br /><span class="line"> <span class="number">70</span>:     }</span><br /><span class="line"> <span class="number">71</span>:     <span class="comment">// å¤„ç†æœåŠ¡æ¥å£å®¢æˆ·ç«¯æœ¬åœ°ä»£ç†( `local` )ç›¸å…³ã€‚å®é™…ç›®å‰å·²ç»åºŸå¼ƒï¼Œä½¿ç”¨ `stub` å±æ€§ï¼Œå‚è§ `AbstractInterfaceConfig#setLocal` æ–¹æ³•ã€‚</span></span><br /><span class="line"> <span class="number">72</span>:     <span class="keyword">if</span> (local != <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">73</span>:         <span class="comment">// è®¾ä¸º trueï¼Œè¡¨ç¤ºä½¿ç”¨ç¼ºçœä»£ç†ç±»åï¼Œå³ï¼šæ¥å£å + Local åç¼€</span></span><br /><span class="line"> <span class="number">74</span>:         <span class="keyword">if</span> (<span class="string">"true"</span>.equals(local)) {</span><br /><span class="line"> <span class="number">75</span>:             local = interfaceName + <span class="string">"Local"</span>;</span><br /><span class="line"> <span class="number">76</span>:         }</span><br /><span class="line"> <span class="number">77</span>:         Class&lt;?&gt; localClass;</span><br /><span class="line"> <span class="number">78</span>:         <span class="keyword">try</span> {</span><br /><span class="line"> <span class="number">79</span>:             localClass = ClassHelper.forNameWithThreadContextClassLoader(local);</span><br /><span class="line"> <span class="number">80</span>:         } <span class="keyword">catch</span> (ClassNotFoundException e) {</span><br /><span class="line"> <span class="number">81</span>:             <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line"> <span class="number">82</span>:         }</span><br /><span class="line"> <span class="number">83</span>:         <span class="keyword">if</span> (!interfaceClass.isAssignableFrom(localClass)) {</span><br /><span class="line"> <span class="number">84</span>:             <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"The local implementation class "</span> + localClass.getName() + <span class="string">" not implement interface "</span> + interfaceName);</span><br /><span class="line"> <span class="number">85</span>:         }</span><br /><span class="line"> <span class="number">86</span>:     }</span><br /><span class="line"> <span class="number">87</span>:     <span class="comment">// å¤„ç†æœåŠ¡æ¥å£å®¢æˆ·ç«¯æœ¬åœ°ä»£ç†( `stub` )ç›¸å…³</span></span><br /><span class="line"> <span class="number">88</span>:     <span class="keyword">if</span> (stub != <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">89</span>:         <span class="comment">// è®¾ä¸º trueï¼Œè¡¨ç¤ºä½¿ç”¨ç¼ºçœä»£ç†ç±»åï¼Œå³ï¼šæ¥å£å + Stub åç¼€</span></span><br /><span class="line"> <span class="number">90</span>:         <span class="keyword">if</span> (<span class="string">"true"</span>.equals(stub)) {</span><br /><span class="line"> <span class="number">91</span>:             stub = interfaceName + <span class="string">"Stub"</span>;</span><br /><span class="line"> <span class="number">92</span>:         }</span><br /><span class="line"> <span class="number">93</span>:         Class&lt;?&gt; stubClass;</span><br /><span class="line"> <span class="number">94</span>:         <span class="keyword">try</span> {</span><br /><span class="line"> <span class="number">95</span>:             stubClass = ClassHelper.forNameWithThreadContextClassLoader(stub);</span><br /><span class="line"> <span class="number">96</span>:         } <span class="keyword">catch</span> (ClassNotFoundException e) {</span><br /><span class="line"> <span class="number">97</span>:             <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e.getMessage(), e);</span><br /><span class="line"> <span class="number">98</span>:         }</span><br /><span class="line"> <span class="number">99</span>:         <span class="keyword">if</span> (!interfaceClass.isAssignableFrom(stubClass)) {</span><br /><span class="line"><span class="number">100</span>:             <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"The stub implementation class "</span> + stubClass.getName() + <span class="string">" not implement interface "</span> + interfaceName);</span><br /><span class="line"><span class="number">101</span>:         }</span><br /><span class="line"><span class="number">102</span>:     }</span><br /><span class="line"><span class="number">103</span>:     <span class="comment">// æ ¡éªŒ ApplicationConfig é…ç½®ã€‚</span></span><br /><span class="line"><span class="number">104</span>:     checkApplication();</span><br /><span class="line"><span class="number">105</span>:     <span class="comment">// æ ¡éªŒ RegistryConfig é…ç½®ã€‚</span></span><br /><span class="line"><span class="number">106</span>:     checkRegistry();</span><br /><span class="line"><span class="number">107</span>:     <span class="comment">// æ ¡éªŒ ProtocolConfig é…ç½®æ•°ç»„ã€‚</span></span><br /><span class="line"><span class="number">108</span>:     checkProtocol();</span><br /><span class="line"><span class="number">109</span>:     <span class="comment">// è¯»å–ç¯å¢ƒå˜é‡å’Œ properties é…ç½®åˆ° ServiceConfig å¯¹è±¡ã€‚</span></span><br /><span class="line"><span class="number">110</span>:     appendProperties(<span class="keyword">this</span>);</span><br /><span class="line"><span class="number">111</span>:     <span class="comment">// æ ¡éªŒ Stub å’Œ Mock ç›¸å…³çš„é…ç½®</span></span><br /><span class="line"><span class="number">112</span>:     checkStubAndMock(interfaceClass);</span><br /><span class="line"><span class="number">113</span>:     <span class="comment">// æœåŠ¡è·¯å¾„ï¼Œç¼ºçœä¸ºæ¥å£å</span></span><br /><span class="line"><span class="number">114</span>:     <span class="keyword">if</span> (path == <span class="keyword">null</span> || path.length() == <span class="number">0</span>) {</span><br /><span class="line"><span class="number">115</span>:         path = interfaceName;</span><br /><span class="line"><span class="number">116</span>:     }</span><br /><span class="line"><span class="number">117</span>:     <span class="comment">// æš´éœ²æœåŠ¡</span></span><br /><span class="line"><span class="number">118</span>:     doExportUrls();</span><br /><span class="line"><span class="number">119</span>:     <span class="comment">// TODO èŠ‹è‰¿ï¼Œç­‰å¾… qos</span></span><br /><span class="line"><span class="number">120</span>:     ProviderModel providerModel = <span class="keyword">new</span> ProviderModel(getUniqueServiceName(), <span class="keyword">this</span>, ref);</span><br /><span class="line"><span class="number">121</span>:     ApplicationModel.initProviderModel(getUniqueServiceName(), providerModel);</span><br /><span class="line"><span class="number">122</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ç¬¬ 2 è‡³ 9 è¡Œï¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥æš´éœ²ã€‚è‹¥å¯ä»¥ï¼Œæ ‡è®°å·²ç»æš´éœ²(&nbsp;<code>exported = true</code>&nbsp;)ã€‚</li>
<li>ç¬¬ 10 è‡³ 13 è¡Œï¼šæ ¡éªŒæ¥å£å&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L111" target="_blank" rel="external nofollow noopener noreferrer"><code>interfaceName</code></a>&nbsp;éç©ºã€‚</li>
<li>ç¬¬ 15 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L791-L800" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkDefault()</code></a>&nbsp;æ–¹æ³•ï¼Œè¯»å–<strong>å±æ€§é…ç½®</strong>( ç¯å¢ƒå˜é‡ + properties å±æ€§ )åˆ° ProviderConfig å¯¹è±¡ã€‚
<ul>
<li>å…³äº&ldquo;<strong>å±æ€§é…ç½®</strong>&rdquo; ï¼Œåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-properties/?self">ã€Šç²¾å°½ Dubbo æºç è§£æ &mdash;&mdash; å±æ€§é…ç½®ã€‹</a>&nbsp;è¯¦ç»†è§£æã€‚</li>
<li>ğŸ™‚ ç›´æ¥ç‚¹å‡»æ–¹æ³•æŸ¥çœ‹ï¼Œè¾ƒä¸ºç®€å•ï¼Œå·²ç»æ·»åŠ è¯¦ç»†æ³¨é‡Šã€‚</li>
</ul>
</li>
<li>ç¬¬ 16 è‡³ 33 è¡Œï¼šä» ProviderConfig å¯¹è±¡ä¸­ï¼Œè¯»å–&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L102" target="_blank" rel="external nofollow noopener noreferrer"><code>application</code></a>ã€<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L105" target="_blank" rel="external nofollow noopener noreferrer"><code>module</code></a>ã€<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L108" target="_blank" rel="external nofollow noopener noreferrer"><code>registries</code></a>ã€<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L77" target="_blank" rel="external nofollow noopener noreferrer"><code>monitor</code></a>ã€<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractServiceConfig.java#L64" target="_blank" rel="external nofollow noopener noreferrer"><code>protocols</code></a>&nbsp;å¯¹è±¡ã€‚</li>
<li>ç¬¬ 34 è‡³ 42 è¡Œï¼šä» ModuleConfig å¯¹è±¡ä¸­ï¼Œè¯»å–&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L108" target="_blank" rel="external nofollow noopener noreferrer"><code>registries</code></a>ã€<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L77" target="_blank" rel="external nofollow noopener noreferrer"><code>monitor</code></a>&nbsp;å¯¹è±¡ã€‚</li>
<li>ç¬¬ 43 è‡³ 51 è¡Œï¼šä» ApplicationConfig å¯¹è±¡ä¸­ï¼Œè¯»å–&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L108" target="_blank" rel="external nofollow noopener noreferrer"><code>registries</code></a>ã€<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L77" target="_blank" rel="external nofollow noopener noreferrer"><code>monitor</code></a>&nbsp;å¯¹è±¡ã€‚</li>
<li>ç¬¬ 52 è‡³ 57 è¡Œï¼šæ³›åŒ–æ¥å£çš„å®ç°ã€‚
<ul>
<li><a href="http://dubbo.apache.org/zh-cn/docs/user/demos/generic-service.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; æ³›åŒ–æ¥å£ã€‹</a></li>
</ul>
</li>
<li>ç¬¬ 58 è‡³ 70 è¡Œï¼šæ™®é€šæ¥å£çš„å®ç°ã€‚
<ul>
<li>ç¬¬ 60 è‡³ 64 è¡Œï¼šæ ¹æ®&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L105" target="_blank" rel="external nofollow noopener noreferrer"><code>interfaceName</code></a>&nbsp;ï¼Œè·å¾—å¯¹åº”çš„<strong>æ¥å£ç±»</strong>ï¼Œå¹¶èµ‹å€¼ç»™&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L111" target="_blank" rel="external nofollow noopener noreferrer"><code>interfaceClass</code></a>ã€‚</li>
<li>ç¬¬ 66 è¡Œï¼šè°ƒç”¨&nbsp;<code>#checkInterfaceAndMethods(interfaceClass, methods)</code>&nbsp;æ–¹æ³•ï¼Œæ£€æŸ¥æ¥å£å’Œæ–¹æ³•ã€‚
<ul>
<li>ğŸ™‚ æœ¬æ–‡æœ‰å·²ç»æœ‰è¿™ä¸ªæ–¹æ³•çš„è§£æã€‚</li>
</ul>
</li>
<li>ç¬¬ 68 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L393-L408" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkRef()</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒæŒ‡å‘çš„ Service å¯¹è±¡ã€‚</li>
<li>ç¬¬ 69 è¡Œï¼šæ ‡è®°&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L138" target="_blank" rel="external nofollow noopener noreferrer"><code>generic</code></a>&nbsp;ä¸º<strong>é</strong>æ³›åŒ–å®ç°ã€‚</li>
</ul>
</li>
<li>ç¬¬ 71 è‡³ 86 è¡Œï¼šå¤„ç†æœåŠ¡æ¥å£å®¢æˆ·ç«¯æœ¬åœ°ä»£ç†(&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L55-L63" target="_blank" rel="external nofollow noopener noreferrer"><code>local</code></a>&nbsp;)ç›¸å…³ã€‚<strong>å®é™…ç›®å‰å·²ç»åºŸå¼ƒï¼Œæ­¤å¤„ä¸»è¦ç”¨äºå…¼å®¹</strong>ï¼Œä½¿ç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L64-L74" target="_blank" rel="external nofollow noopener noreferrer"><code>stub</code></a>å±æ€§ï¼Œå‚è§&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L379-L390" target="_blank" rel="external nofollow noopener noreferrer"><code>AbstractInterfaceConfig#setLocal(local)</code></a>&nbsp;æ–¹æ³•çš„<strong>æ³¨é‡Šè¯´æ˜</strong>ã€‚</li>
<li>ç¬¬ 87 è‡³ 102 è¡Œï¼šå¤„ç†æœåŠ¡æ¥å£å®¢æˆ·ç«¯æœ¬åœ°ä»£ç†(&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L64-L74" target="_blank" rel="external nofollow noopener noreferrer"><code>stub</code></a>&nbsp;å±æ€§ï¼Œå‚è§&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L379-L390" target="_blank" rel="external nofollow noopener noreferrer"><code>AbstractInterfaceConfig#setLocal(local)</code></a>&nbsp;)ç›¸å…³ã€‚</li>
<li>ç¬¬ 104 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L156-L187" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkApplication()</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒ ApplicationConfig é…ç½®ã€‚
<ul>
<li>ğŸ™‚ ç›´æ¥ç‚¹å‡»æ–¹æ³•æŸ¥çœ‹ï¼Œè¾ƒä¸ºç®€å•ï¼Œå·²ç»æ·»åŠ è¯¦ç»†æ³¨é‡Šã€‚</li>
</ul>
</li>
<li>ç¬¬ 106 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L122-L154" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkRegistry()</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒ RegistryConfig é…ç½®ã€‚
<ul>
<li>ğŸ™‚ ç›´æ¥ç‚¹å‡»æ–¹æ³•æŸ¥çœ‹ï¼Œè¾ƒä¸ºç®€å•ï¼Œå·²ç»æ·»åŠ è¯¦ç»†æ³¨é‡Šã€‚</li>
</ul>
</li>
<li>ç¬¬ 108 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L802-L823" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkProtocol()</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒ ProtocolConfig é…ç½®æ•°ç»„ã€‚
<ul>
<li>ğŸ™‚ ç›´æ¥ç‚¹å‡»æ–¹æ³•æŸ¥çœ‹ï¼Œè¾ƒä¸ºç®€å•ï¼Œå·²ç»æ·»åŠ è¯¦ç»†æ³¨é‡Šã€‚</li>
</ul>
</li>
<li>ç¬¬ 110 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L132-L212" target="_blank" rel="external nofollow noopener noreferrer"><code>#appendProperties(config)</code></a>&nbsp;æ–¹æ³•ï¼Œè¯»å–<strong>å±æ€§é…ç½®</strong>( ç¯å¢ƒå˜é‡ + properties å±æ€§ )åˆ° ServiceConfig å¯¹è±¡ï¼ˆ<strong>è‡ªå·±</strong>ï¼‰ã€‚</li>
<li>ç¬¬ 112 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractInterfaceConfig.java#L319-L368" target="_blank" rel="external nofollow noopener noreferrer"><code>#checkStubAndMock(interfaceClass)</code></a>&nbsp;æ–¹æ³•ï¼Œæ ¡éªŒ Stub å’Œ Mock ç›¸å…³çš„é…ç½®ã€‚</li>
<li>ç¬¬ 113 è‡³ 116 è¡Œï¼šæœåŠ¡è·¯å¾„&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L115" target="_blank" rel="external nofollow noopener noreferrer"><code>path</code></a>&nbsp;ä¸ºç©ºæ—¶ï¼Œç¼ºçœä¸ºæ¥å£åã€‚</li>
<li>ç¬¬ 118 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L430-L439" target="_blank" rel="external nofollow noopener noreferrer"><code>#doExportUrls()</code></a>&nbsp;æ–¹æ³•ï¼Œ<strong>æš´éœ²æœåŠ¡</strong>ã€‚æ­¤æ–¹æ³•åŒ…å«äº†æˆ‘ä»¬ä¸Šè¿°çš„&nbsp;<strong>3+4</strong>&nbsp;éƒ¨åˆ†ã€‚</li>
<li>ç¬¬ 119 è‡³ 121 è¡Œï¼š// TODO èŠ‹è‰¿ï¼Œç­‰å¾… qos</li>
</ul>
<hr />
<p>å› ä¸ºæœ¬æ–‡ä¸åˆ†äº«&nbsp;<strong>4</strong>&nbsp;éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä»¬åªçœ‹&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L430-L439" target="_blank" rel="external nofollow noopener noreferrer"><code>#doExportUrls()</code></a>&nbsp;æ–¹æ³•ä¸­ï¼Œè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L441-L621" target="_blank" rel="external nofollow noopener noreferrer"><code>#doExportUrlsFor1Protocol(protocolConfig, registryURLs)</code></a>&nbsp;æ–¹æ³•ï¼Œå’Œ&nbsp;<strong>3</strong>&nbsp;æœ‰å…³çš„éƒ¨åˆ†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line">  <span class="number">1</span>: <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doExportUrlsFor1Protocol</span><span class="params">(ProtocolConfig protocolConfig, List&lt;URL&gt; registryURLs)</span> </span>{</span><br /><span class="line">  <span class="number">2</span>:     <span class="comment">// åè®®å</span></span><br /><span class="line">  <span class="number">3</span>:     String name = protocolConfig.getName();</span><br /><span class="line">  <span class="number">4</span>:     <span class="keyword">if</span> (name == <span class="keyword">null</span> || name.length() == <span class="number">0</span>) {</span><br /><span class="line">  <span class="number">5</span>:         name = <span class="string">"dubbo"</span>;</span><br /><span class="line">  <span class="number">6</span>:     }</span><br /><span class="line">  <span class="number">7</span>: </span><br /><span class="line">  <span class="number">8</span>:     <span class="comment">// å°† `side`ï¼Œ`dubbo`ï¼Œ`timestamp`ï¼Œ`pid` å‚æ•°ï¼Œæ·»åŠ åˆ° `map` é›†åˆä¸­ã€‚</span></span><br /><span class="line">  <span class="number">9</span>:     Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br /><span class="line"> <span class="number">10</span>:     map.put(Constants.SIDE_KEY, Constants.PROVIDER_SIDE);</span><br /><span class="line"> <span class="number">11</span>:     map.put(Constants.DUBBO_VERSION_KEY, Version.getVersion());</span><br /><span class="line"> <span class="number">12</span>:     map.put(Constants.TIMESTAMP_KEY, String.valueOf(System.currentTimeMillis()));</span><br /><span class="line"> <span class="number">13</span>:     <span class="keyword">if</span> (ConfigUtils.getPid() &gt; <span class="number">0</span>) {</span><br /><span class="line"> <span class="number">14</span>:         map.put(Constants.PID_KEY, String.valueOf(ConfigUtils.getPid()));</span><br /><span class="line"> <span class="number">15</span>:     }</span><br /><span class="line"> <span class="number">16</span>:     <span class="comment">// å°†å„ç§é…ç½®å¯¹è±¡ï¼Œæ·»åŠ åˆ° `map` é›†åˆä¸­ã€‚</span></span><br /><span class="line"> <span class="number">17</span>:     appendParameters(map, application);</span><br /><span class="line"> <span class="number">18</span>:     appendParameters(map, <span class="keyword">module</span>);</span><br /><span class="line"> <span class="number">19</span>:     appendParameters(map, provider, Constants.DEFAULT_KEY); <span class="comment">// ProviderConfig ï¼Œä¸º ServiceConfig çš„é»˜è®¤å±æ€§ï¼Œå› æ­¤æ·»åŠ  `default` å±æ€§å‰ç¼€ã€‚</span></span><br /><span class="line"> <span class="number">20</span>:     appendParameters(map, protocolConfig);</span><br /><span class="line"> <span class="number">21</span>:     appendParameters(map, <span class="keyword">this</span>);</span><br /><span class="line"> <span class="number">22</span>:     <span class="comment">// å°† MethodConfig å¯¹è±¡æ•°ç»„ï¼Œæ·»åŠ åˆ° `map` é›†åˆä¸­ã€‚</span></span><br /><span class="line"> <span class="number">23</span>:     <span class="keyword">if</span> (methods != <span class="keyword">null</span> &amp;&amp; !methods.isEmpty()) {</span><br /><span class="line"> <span class="number">24</span>:         <span class="keyword">for</span> (MethodConfig method : methods) {</span><br /><span class="line"> <span class="number">25</span>:             <span class="comment">// å°† MethodConfig å¯¹è±¡ï¼Œæ·»åŠ åˆ° `map` é›†åˆä¸­ã€‚</span></span><br /><span class="line"> <span class="number">26</span>:             appendParameters(map, method, method.getName());</span><br /><span class="line"> <span class="number">27</span>:             <span class="comment">// å½“ é…ç½®äº† `MethodConfig.retry = false` æ—¶ï¼Œå¼ºåˆ¶ç¦ç”¨é‡è¯•</span></span><br /><span class="line"> <span class="number">28</span>:             String retryKey = method.getName() + <span class="string">".retry"</span>;</span><br /><span class="line"> <span class="number">29</span>:             <span class="keyword">if</span> (map.containsKey(retryKey)) {</span><br /><span class="line"> <span class="number">30</span>:                 String retryValue = map.remove(retryKey);</span><br /><span class="line"> <span class="number">31</span>:                 <span class="keyword">if</span> (<span class="string">"false"</span>.equals(retryValue)) {</span><br /><span class="line"> <span class="number">32</span>:                     map.put(method.getName() + <span class="string">".retries"</span>, <span class="string">"0"</span>);</span><br /><span class="line"> <span class="number">33</span>:                 }</span><br /><span class="line"> <span class="number">34</span>:             }</span><br /><span class="line"> <span class="number">35</span>:             <span class="comment">// å°† ArgumentConfig å¯¹è±¡æ•°ç»„ï¼Œæ·»åŠ åˆ° `map` é›†åˆä¸­ã€‚</span></span><br /><span class="line"> <span class="number">36</span>:             List&lt;ArgumentConfig&gt; arguments = method.getArguments();</span><br /><span class="line"> <span class="number">37</span>:             <span class="keyword">if</span> (arguments != <span class="keyword">null</span> &amp;&amp; !arguments.isEmpty()) {</span><br /><span class="line"> <span class="number">38</span>:                 <span class="keyword">for</span> (ArgumentConfig argument : arguments) {</span><br /><span class="line"> <span class="number">39</span>:                     <span class="comment">// convert argument type</span></span><br /><span class="line"> <span class="number">40</span>:                     <span class="keyword">if</span> (argument.getType() != <span class="keyword">null</span> &amp;&amp; argument.getType().length() &gt; <span class="number">0</span>) { <span class="comment">// æŒ‡å®šäº†ç±»å‹</span></span><br /><span class="line"> <span class="number">41</span>:                         Method[] methods = interfaceClass.getMethods();</span><br /><span class="line"> <span class="number">42</span>:                         <span class="comment">// visit all methods</span></span><br /><span class="line"> <span class="number">43</span>:                         <span class="keyword">if</span> (methods != <span class="keyword">null</span> &amp;&amp; methods.length &gt; <span class="number">0</span>) {</span><br /><span class="line"> <span class="number">44</span>:                             <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; methods.length; i++) {</span><br /><span class="line"> <span class="number">45</span>:                                 String methodName = methods[i].getName();</span><br /><span class="line"> <span class="number">46</span>:                                 <span class="comment">// target the method, and get its signature</span></span><br /><span class="line"> <span class="number">47</span>:                                 <span class="keyword">if</span> (methodName.equals(method.getName())) { <span class="comment">// æ‰¾åˆ°æŒ‡å®šæ–¹æ³•</span></span><br /><span class="line"> <span class="number">48</span>:                                     Class&lt;?&gt;[] argTypes = methods[i].getParameterTypes();</span><br /><span class="line"> <span class="number">49</span>:                                     <span class="comment">// one callback in the method</span></span><br /><span class="line"> <span class="number">50</span>:                                     <span class="keyword">if</span> (argument.getIndex() != -<span class="number">1</span>) { <span class="comment">// æŒ‡å®šå•ä¸ªå‚æ•°çš„ä½ç½® + ç±»å‹</span></span><br /><span class="line"> <span class="number">51</span>:                                         <span class="keyword">if</span> (argTypes[argument.getIndex()].getName().equals(argument.getType())) {</span><br /><span class="line"> <span class="number">52</span>:                                             <span class="comment">// å°† ArgumentConfig å¯¹è±¡ï¼Œæ·»åŠ åˆ° `map` é›†åˆä¸­ã€‚</span></span><br /><span class="line"> <span class="number">53</span>:                                             appendParameters(map, argument, method.getName() + <span class="string">"."</span> + argument.getIndex()); <span class="comment">// `${methodName}.${index}`</span></span><br /><span class="line"> <span class="number">54</span>:                                         } <span class="keyword">else</span> {</span><br /><span class="line"> <span class="number">55</span>:                                             <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"argument config error : the index attribute and type attribute not match :index :"</span> + argument.getIndex() + <span class="string">", type:"</span> + argument.getType());</span><br /><span class="line"> <span class="number">56</span>:                                         }</span><br /><span class="line"> <span class="number">57</span>:                                     } <span class="keyword">else</span> {</span><br /><span class="line"> <span class="number">58</span>:                                         <span class="comment">// multiple callbacks in the method</span></span><br /><span class="line"> <span class="number">59</span>:                                         <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; argTypes.length; j++) {</span><br /><span class="line"> <span class="number">60</span>:                                             Class&lt;?&gt; argClazz = argTypes[j];</span><br /><span class="line"> <span class="number">61</span>:                                             <span class="keyword">if</span> (argClazz.getName().equals(argument.getType())) {</span><br /><span class="line"> <span class="number">62</span>:                                                 <span class="comment">// å°† ArgumentConfig å¯¹è±¡ï¼Œæ·»åŠ åˆ° `map` é›†åˆä¸­ã€‚</span></span><br /><span class="line"> <span class="number">63</span>:                                                 appendParameters(map, argument, method.getName() + <span class="string">"."</span> + j); <span class="comment">// `${methodName}.${index}`</span></span><br /><span class="line"> <span class="number">64</span>:                                                 <span class="keyword">if</span> (argument.getIndex() != -<span class="number">1</span> &amp;&amp; argument.getIndex() != j) { <span class="comment">// å¤šä½™çš„åˆ¤æ–­ï¼Œå› ä¸º `argument.getIndex() == -1` ã€‚</span></span><br /><span class="line"> <span class="number">65</span>:                                                     <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"argument config error : the index attribute and type attribute not match :index :"</span> + argument.getIndex() + <span class="string">", type:"</span> + argument.getType());</span><br /><span class="line"> <span class="number">66</span>:                                                 }</span><br /><span class="line"> <span class="number">67</span>:                                             }</span><br /><span class="line"> <span class="number">68</span>:                                         }</span><br /><span class="line"> <span class="number">69</span>:                                     }</span><br /><span class="line"> <span class="number">70</span>:                                 }</span><br /><span class="line"> <span class="number">71</span>:                             }</span><br /><span class="line"> <span class="number">72</span>:                         }</span><br /><span class="line"> <span class="number">73</span>:                     } <span class="keyword">else</span> <span class="keyword">if</span> (argument.getIndex() != -<span class="number">1</span>) { <span class="comment">// æŒ‡å®šå•ä¸ªå‚æ•°çš„ä½ç½®</span></span><br /><span class="line"> <span class="number">74</span>:                         <span class="comment">// å°† ArgumentConfig å¯¹è±¡ï¼Œæ·»åŠ åˆ° `map` é›†åˆä¸­ã€‚</span></span><br /><span class="line"> <span class="number">75</span>:                         appendParameters(map, argument, method.getName() + <span class="string">"."</span> + argument.getIndex()); <span class="comment">// `${methodName}.${index}`</span></span><br /><span class="line"> <span class="number">76</span>:                     } <span class="keyword">else</span> {</span><br /><span class="line"> <span class="number">77</span>:                         <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"argument config must set index or type attribute.eg: &lt;dubbo:argument index='0' .../&gt; or &lt;dubbo:argument type=xxx .../&gt;"</span>);</span><br /><span class="line"> <span class="number">78</span>:                     }</span><br /><span class="line"> <span class="number">79</span>: </span><br /><span class="line"> <span class="number">80</span>:                 }</span><br /><span class="line"> <span class="number">81</span>:             }</span><br /><span class="line"> <span class="number">82</span>:         } <span class="comment">// end of methods for</span></span><br /><span class="line"> <span class="number">83</span>:     }</span><br /><span class="line"> <span class="number">84</span>: </span><br /><span class="line"> <span class="number">85</span>:     <span class="comment">// genericã€methodsã€revision</span></span><br /><span class="line"> <span class="number">86</span>:     <span class="keyword">if</span> (ProtocolUtils.isGeneric(generic)) {</span><br /><span class="line"> <span class="number">87</span>:         map.put(<span class="string">"generic"</span>, generic);</span><br /><span class="line"> <span class="number">88</span>:         map.put(<span class="string">"methods"</span>, Constants.ANY_VALUE);</span><br /><span class="line"> <span class="number">89</span>:     } <span class="keyword">else</span> {</span><br /><span class="line"> <span class="number">90</span>:         String revision = Version.getVersion(interfaceClass, version);</span><br /><span class="line"> <span class="number">91</span>:         <span class="keyword">if</span> (revision != <span class="keyword">null</span> &amp;&amp; revision.length() &gt; <span class="number">0</span>) {</span><br /><span class="line"> <span class="number">92</span>:             map.put(<span class="string">"revision"</span>, revision); <span class="comment">// ä¿®è®¢å·</span></span><br /><span class="line"> <span class="number">93</span>:         }</span><br /><span class="line"> <span class="number">94</span>: </span><br /><span class="line"> <span class="number">95</span>:         String[] methods = Wrapper.getWrapper(interfaceClass).getMethodNames(); <span class="comment">// è·å¾—æ–¹æ³•æ•°ç»„</span></span><br /><span class="line"> <span class="number">96</span>:         <span class="keyword">if</span> (methods.length == <span class="number">0</span>) {</span><br /><span class="line"> <span class="number">97</span>:             logger.warn(<span class="string">"NO method found in service interface "</span> + interfaceClass.getName());</span><br /><span class="line"> <span class="number">98</span>:             map.put(<span class="string">"methods"</span>, Constants.ANY_VALUE);</span><br /><span class="line"> <span class="number">99</span>:         } <span class="keyword">else</span> {</span><br /><span class="line"><span class="number">100</span>:             map.put(<span class="string">"methods"</span>, StringUtils.join(<span class="keyword">new</span> HashSet&lt;String&gt;(Arrays.asList(methods)), <span class="string">","</span>));</span><br /><span class="line"><span class="number">101</span>:         }</span><br /><span class="line"><span class="number">102</span>:     }</span><br /><span class="line"><span class="number">103</span>:     <span class="comment">// token ï¼Œå‚è§ã€Šä»¤ç‰Œæ ¡éªŒã€‹http://dubbo.apache.org/zh-cn/docs/user/demos/token-authorization.html</span></span><br /><span class="line"><span class="number">104</span>:     <span class="keyword">if</span> (!ConfigUtils.isEmpty(token)) {</span><br /><span class="line"><span class="number">105</span>:         <span class="keyword">if</span> (ConfigUtils.isDefault(token)) {</span><br /><span class="line"><span class="number">106</span>:             map.put(<span class="string">"token"</span>, UUID.randomUUID().toString());</span><br /><span class="line"><span class="number">107</span>:         } <span class="keyword">else</span> {</span><br /><span class="line"><span class="number">108</span>:             map.put(<span class="string">"token"</span>, token);</span><br /><span class="line"><span class="number">109</span>:         }</span><br /><span class="line"><span class="number">110</span>:     }</span><br /><span class="line"><span class="number">111</span>:     <span class="comment">// åè®®ä¸º injvm æ—¶ï¼Œä¸æ³¨å†Œï¼Œä¸é€šçŸ¥ã€‚</span></span><br /><span class="line"><span class="number">112</span>:     <span class="keyword">if</span> (<span class="string">"injvm"</span>.equals(protocolConfig.getName())) {</span><br /><span class="line"><span class="number">113</span>:         protocolConfig.setRegister(<span class="keyword">false</span>);</span><br /><span class="line"><span class="number">114</span>:         map.put(<span class="string">"notify"</span>, <span class="string">"false"</span>);</span><br /><span class="line"><span class="number">115</span>:     }</span><br /><span class="line"><span class="number">116</span>:     <span class="comment">// export service</span></span><br /><span class="line"><span class="number">117</span>:     String contextPath = protocolConfig.getContextpath();</span><br /><span class="line"><span class="number">118</span>:     <span class="keyword">if</span> ((contextPath == <span class="keyword">null</span> || contextPath.length() == <span class="number">0</span>) &amp;&amp; provider != <span class="keyword">null</span>) {</span><br /><span class="line"><span class="number">119</span>:         contextPath = provider.getContextpath();</span><br /><span class="line"><span class="number">120</span>:     }</span><br /><span class="line"><span class="number">121</span>: </span><br /><span class="line"><span class="number">122</span>:     <span class="comment">// hostã€port</span></span><br /><span class="line"><span class="number">123</span>:     String host = <span class="keyword">this</span>.findConfigedHosts(protocolConfig, registryURLs, map);</span><br /><span class="line"><span class="number">124</span>:     Integer port = <span class="keyword">this</span>.findConfigedPorts(protocolConfig, name, map);</span><br /><span class="line"><span class="number">125</span>: </span><br /><span class="line"><span class="number">126</span>:     <span class="comment">// åˆ›å»º Dubbo URL å¯¹è±¡</span></span><br /><span class="line"><span class="number">127</span>:     URL url = <span class="keyword">new</span> URL(name, host, port, (contextPath == <span class="keyword">null</span> || contextPath.length() == <span class="number">0</span> ? <span class="string">""</span> : contextPath + <span class="string">"/"</span>) + path, map);</span><br /><span class="line"><span class="number">128</span>: </span><br /><span class="line"><span class="number">129</span>:     <span class="comment">// é…ç½®è§„åˆ™ï¼Œå‚è§ã€Šé…ç½®è§„åˆ™ã€‹http://dubbo.apache.org/zh-cn/docs/user/demos/config-rule.html</span></span><br /><span class="line"><span class="number">130</span>:     <span class="keyword">if</span> (ExtensionLoader.getExtensionLoader(ConfiguratorFactory.class)</span><br /><span class="line"><span class="number">131</span>:             .hasExtension(url.getProtocol())) {</span><br /><span class="line"><span class="number">132</span>:         url = ExtensionLoader.getExtensionLoader(ConfiguratorFactory.class)</span><br /><span class="line"><span class="number">133</span>:                 .getExtension(url.getProtocol()).getConfigurator(url).configure(url);</span><br /><span class="line"><span class="number">134</span>:     }</span><br /><span class="line"><span class="number">135</span>: </span><br /><span class="line"><span class="number">136</span>:     <span class="comment">// çœç•¥ã€æœåŠ¡æš´éœ²ã€‘é€»è¾‘</span></span><br /><span class="line"><span class="number">137</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ç¬¬ 2 è‡³ 6 è¡Œï¼šåè®®åç©ºæ—¶ï¼Œç¼ºçœ&nbsp;<code>"dubbo"</code>&nbsp;ã€‚</li>
<li>ç¬¬ 9 è¡Œï¼šåˆ›å»ºå‚æ•°é›†åˆ&nbsp;<code>map</code>&nbsp;ï¼Œç”¨äºä¸‹é¢åˆ›å»º Dubbo URL çš„&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/9d38b6f9f95798755141d6140e311e8fd51fecc1/dubbo-common/src/main/java/com/alibaba/dubbo/common/URL.java#L109" target="_blank" rel="external nofollow noopener noreferrer"><code>parameters</code></a>&nbsp;å±æ€§ã€‚</li>
<li>ç¬¬ 10 è‡³ 15 è¡Œï¼šå°†&nbsp;<code>side</code>&nbsp;<code>dubbo</code>&nbsp;<code>timestamp</code>&nbsp;<code>timestamp</code>&nbsp;<code>pid</code>&nbsp;æ·»åŠ åˆ°&nbsp;<code>map</code>&nbsp;ä¸­ã€‚</li>
<li>ç¬¬ 16 è‡³ 21 è¡Œï¼šè°ƒç”¨&nbsp;<code>#appendParameters(map, config)</code>&nbsp;æ–¹æ³•ï¼Œå°†å„ç§é…ç½®å¯¹è±¡æ·»åŠ åˆ°&nbsp;<code>map</code>&nbsp;ä¸­ã€‚
<ul>
<li>ğŸ™‚&nbsp;<code>#appendParameters(map, config)</code>&nbsp;æ–¹æ³•ï¼Œåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-1/?self">ã€ŠAPI é…ç½®ï¼ˆä¸€ï¼‰ä¹‹åº”ç”¨ã€‹</a></li>
</ul>
</li>
<li>ç¬¬ 22 è‡³ 83 è¡Œï¼šè°ƒç”¨ MethodConfig å¯¹è±¡<strong>æ•°ç»„</strong>ï¼Œæ·»åŠ åˆ°&nbsp;<code>map</code>&nbsp;ä¸­ã€‚
<ul>
<li>ç›®çš„æ˜¯å°†<strong>æ¯ä¸ª</strong>&nbsp;MethodConfig å’Œå…¶å¯¹åº”çš„ ArgumentConfig å¯¹è±¡æ•°ç»„ï¼Œæ·»åŠ åˆ°&nbsp;<code>map</code>&nbsp;ä¸­ã€‚</li>
<li>ğŸ™‚ ä»£ç æ¯”è¾ƒå†—é•¿ï¼Œèƒ–å‹è€å¿ƒçœ‹æ³¨é‡Šï¼Œå»ºè®®è¿›è¡Œè°ƒè¯•æ¯ç§æƒ…å†µã€‚</li>
</ul>
</li>
<li>ç¬¬ 85 è‡³ 102 è¡Œï¼šå°†&nbsp;<code>generic</code>&nbsp;<code>methods</code>&nbsp;<code>revision</code>&nbsp;åˆ°&nbsp;<code>map</code>&nbsp;ä¸­ã€‚
<ul>
<li><code>revision</code>&nbsp;ï¼Œå¯èƒ½æ¯”è¾ƒéš¾ç†è§£ï¼Œåœ¨&nbsp;<a href="http://svip.iocoder.cn/Dubbo/configuration-api-2/">ã€Œ10. Versionã€</a>&nbsp;è¯¦ç»†è§£æã€‚</li>
</ul>
</li>
<li>ç¬¬ 103 è‡³ 110 è¡Œï¼šå°†&nbsp;<code>token</code>&nbsp;æ·»åŠ åˆ°&nbsp;<code>map</code>&nbsp;ä¸­ã€‚
<ul>
<li><a href="http://dubbo.apache.org/zh-cn/docs/user/demos/token-authorization.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; ä»¤ç‰ŒéªŒè¯ã€‹</a></li>
</ul>
</li>
<li>ç¬¬ 111 è‡³ 115 è¡Œï¼šå½“åè®®ä¸º&nbsp;<code>injvm</code>&nbsp;æ—¶ï¼Œæ·»åŠ &nbsp;<code>notify = false</code>&nbsp;åˆ°&nbsp;<code>map</code>&nbsp;ä¸­ï¼Œè¡¨ç¤ºä¸æ³¨å†Œï¼Œä¸é€šçŸ¥ã€‚
<ul>
<li><a href="http://dubbo.apache.org/zh-cn/docs/user/demos/local-call.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; æœ¬åœ°è°ƒç”¨ã€‹</a></li>
</ul>
</li>
<li>ç¬¬ 116 è‡³ 120 è¡Œï¼šè·å¾—&nbsp;<code>contextPath</code>&nbsp;ï¼ŒåŸºç¡€è·¯å¾„ï¼Œå³java webåº”ç”¨ä¸­å¸¸è¯´çš„context path ã€‚</li>
<li>ç¬¬ 123 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/d3c3975f320c78452f96098b04441fed4c00ab70/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L661-L744" target="_blank" rel="external nofollow noopener noreferrer"><code>#this.findConfigedHosts(protocolConfig, registryURLs, map)</code></a>&nbsp;æ–¹æ³•ï¼Œè·å¾—æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡æä¾›è€… Host ã€‚
<ul>
<li><a href="http://dubbo.apache.org/zh-cn/docs/user/demos/hostname-binding.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; ä¸»æœºç»‘å®šã€‹</a></li>
<li><a href="https://segmentfault.com/a/1190000010550512" target="_blank" rel="external nofollow noopener noreferrer">ã€Šdubboæ³¨å†ŒæœåŠ¡IPè§£æå¼‚å¸¸åŠIPè§£ææºç åˆ†æã€‹</a></li>
<li>æŒ‡å®šæœåŠ¡æ³¨å†Œåœ°å€ï¼Œå‚è§&nbsp;<a href="https://github.com/dubbo/dubbo-docker-sample" target="_blank" rel="external nofollow noopener noreferrer">dubbo-docker-sample</a>&nbsp;ç¤ºä¾‹é¡¹ç›®ã€‚</li>
<li>ğŸ™‚ ä»£ç æ¯”è¾ƒå†—é•¿ï¼Œèƒ–å‹è€å¿ƒçœ‹æ³¨é‡Šï¼Œå»ºè®®è¿›è¡Œè°ƒè¯•æ¯ç§æƒ…å†µã€‚</li>
</ul>
</li>
<li>ç¬¬ 124 è¡Œï¼šè°ƒç”¨&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/d3c3975f320c78452f96098b04441fed4c00ab70/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/ServiceConfig.java#L746-L800" target="_blank" rel="external nofollow noopener noreferrer"><code>#findConfigedHosts(protocolConfig, name, map)</code></a>&nbsp;æ–¹æ³•ï¼Œè·å¾—æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡æä¾›è€… Port ã€‚
<ul>
<li>ğŸ™‚ ä»£ç æ¯”è¾ƒå†—é•¿ï¼Œèƒ–å‹è€å¿ƒçœ‹æ³¨é‡Šï¼Œå»ºè®®è¿›è¡Œè°ƒè¯•æ¯ç§æƒ…å†µã€‚</li>
</ul>
</li>
<li>ç¬¬ 127 è¡Œï¼šåˆ›å»º Dubbo URL ã€‚</li>
<li>ç¬¬ 129 è‡³ 134 è¡Œï¼šé…ç½®è§„åˆ™ï¼Œåç»­è¯¦ç»†è§£æã€‚
<ul>
<li><a href="http://dubbo.apache.org/zh-cn/docs/user/demos/config-rule.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; é…ç½®è§„åˆ™ã€‹</a></li>
</ul>
</li>
<li>ç¬¬ 136 è¡Œï¼š<strong>çœç•¥</strong>ã€æœåŠ¡æš´éœ²ã€‘é€»è¾‘ã€‚</li>
</ul>
<h1 id="9-ä¸ºä»€ä¹ˆç»§æ‰¿ï¼Ÿï¼Ÿï¼Ÿ">9. ä¸ºä»€ä¹ˆç»§æ‰¿ï¼Ÿï¼Ÿï¼Ÿ</h1>
<p>æˆ‘ä»¬ä»¥ ServiceConfig å’Œ ProviderConfig æ¥ä¸¾ä¾‹å­ï¼Œä¸¤è€…éƒ½ç»§æ‰¿ AbstractServiceConfigã€‚<br />ä»å±æ€§ä¸Šï¼Œä¸¤è€…æœ‰ç›¸åŒçš„å±æ€§ï¼Œä¾‹å¦‚&nbsp;<code>group</code>&nbsp;/&nbsp;<code>version</code>&nbsp;ã€‚<br />åŒæ—¶ï¼Œä¹Ÿå­˜åœ¨ç€ä¸€äº›å·®å¼‚ï¼Œä¾‹å¦‚&nbsp;<code>ServiceConfig.interfaceName</code>&nbsp;/&nbsp;<code>ProviderConfig.host</code>&nbsp;ã€‚</p>
<p>å¦å¤–ï¼Œæˆ‘ä»¬åœ¨çœ‹çœ‹ ServiceConfig å’Œ MethodConfig ï¼Œä¸¤è€…éƒ½ç»§æ‰¿ AbstractMethodConfigã€‚<br />åœ¨ ServiceConfig ä¸­ï¼Œå¯ä»¥é…ç½®ä¸‹å±æ‰€æœ‰æ–¹æ³•çš„&nbsp;<code>retries</code>&nbsp;æ¬¡æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨ MethodConfig ä¸­<strong>è‡ªå®šä¹‰</strong><code>retries</code>&nbsp;æ¬¡æ•°ã€‚</p>
<p>é€šè¿‡ç»§æ‰¿ï¼Œè·å¾—ç›¸åŒçš„å±æ€§ã€‚</p>
<h1 id="10-Version">10. Version</h1>
<p><a href="https://github.com/alibaba/dubbo/blob/0423219d839404186b8a5ec7dec37f6addeb58d9/dubbo-common/src/main/java/com/alibaba/dubbo/common/Version.java" target="_blank" rel="external nofollow noopener noreferrer"><code>Version#getVersion(cls, defaultVersion)</code></a>&nbsp;æ–¹æ³•ï¼Œè·å¾—ç‰ˆæœ¬å·ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"> <span class="number">1</span>: <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getVersion</span><span class="params">(Class&lt;?&gt; cls, String defaultVersion)</span> </span>{</span><br /><span class="line"> <span class="number">2</span>:     <span class="keyword">try</span> {</span><br /><span class="line"> <span class="number">3</span>:         <span class="comment">// find version info from MANIFEST.MF first</span></span><br /><span class="line"> <span class="number">4</span>:         String version = cls.getPackage().getImplementationVersion();</span><br /><span class="line"> <span class="number">5</span>:         <span class="keyword">if</span> (version == <span class="keyword">null</span> || version.length() == <span class="number">0</span>) {</span><br /><span class="line"> <span class="number">6</span>:             version = cls.getPackage().getSpecificationVersion();</span><br /><span class="line"> <span class="number">7</span>:         }</span><br /><span class="line"> <span class="number">8</span>:         <span class="keyword">if</span> (version == <span class="keyword">null</span> || version.length() == <span class="number">0</span>) {</span><br /><span class="line"> <span class="number">9</span>:             <span class="comment">// guess version fro jar file name if nothing's found from MANIFEST.MF</span></span><br /><span class="line"><span class="number">10</span>:             CodeSource codeSource = cls.getProtectionDomain().getCodeSource();</span><br /><span class="line"><span class="number">11</span>:             <span class="keyword">if</span> (codeSource == <span class="keyword">null</span>) {</span><br /><span class="line"><span class="number">12</span>:                 logger.info(<span class="string">"No codeSource for class "</span> + cls.getName() + <span class="string">" when getVersion, use default version "</span> + defaultVersion);</span><br /><span class="line"><span class="number">13</span>:             } <span class="keyword">else</span> {</span><br /><span class="line"><span class="number">14</span>:                 String file = codeSource.getLocation().getFile();</span><br /><span class="line"><span class="number">15</span>:                 <span class="keyword">if</span> (file != <span class="keyword">null</span> &amp;&amp; file.length() &gt; <span class="number">0</span> &amp;&amp; file.endsWith(<span class="string">".jar"</span>)) {</span><br /><span class="line"><span class="number">16</span>:                     file = file.substring(<span class="number">0</span>, file.length() - <span class="number">4</span>);</span><br /><span class="line"><span class="number">17</span>:                     <span class="keyword">int</span> i = file.lastIndexOf(<span class="string">'/'</span>);</span><br /><span class="line"><span class="number">18</span>:                     <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) {</span><br /><span class="line"><span class="number">19</span>:                         file = file.substring(i + <span class="number">1</span>);</span><br /><span class="line"><span class="number">20</span>:                     }</span><br /><span class="line"><span class="number">21</span>:                     i = file.indexOf(<span class="string">"-"</span>);</span><br /><span class="line"><span class="number">22</span>:                     <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) {</span><br /><span class="line"><span class="number">23</span>:                         file = file.substring(i + <span class="number">1</span>);</span><br /><span class="line"><span class="number">24</span>:                     }</span><br /><span class="line"><span class="number">25</span>:                     <span class="keyword">while</span> (file.length() &gt; <span class="number">0</span> &amp;&amp; !Character.isDigit(file.charAt(<span class="number">0</span>))) {</span><br /><span class="line"><span class="number">26</span>:                         i = file.indexOf(<span class="string">"-"</span>);</span><br /><span class="line"><span class="number">27</span>:                         <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) {</span><br /><span class="line"><span class="number">28</span>:                             file = file.substring(i + <span class="number">1</span>);</span><br /><span class="line"><span class="number">29</span>:                         } <span class="keyword">else</span> {</span><br /><span class="line"><span class="number">30</span>:                             <span class="keyword">break</span>;</span><br /><span class="line"><span class="number">31</span>:                         }</span><br /><span class="line"><span class="number">32</span>:                     }</span><br /><span class="line"><span class="number">33</span>:                     version = file;</span><br /><span class="line"><span class="number">34</span>:                 }</span><br /><span class="line"><span class="number">35</span>:             }</span><br /><span class="line"><span class="number">36</span>:         }</span><br /><span class="line"><span class="number">37</span>:         <span class="comment">// return default version if no version info is found</span></span><br /><span class="line"><span class="number">38</span>:         <span class="keyword">return</span> version == <span class="keyword">null</span> || version.length() == <span class="number">0</span> ? defaultVersion : version;</span><br /><span class="line"><span class="number">39</span>:     } <span class="keyword">catch</span> (Throwable e) {</span><br /><span class="line"><span class="number">40</span>:         <span class="comment">// return default version when any exception is thrown</span></span><br /><span class="line"><span class="number">41</span>:         logger.error(<span class="string">"return default version, ignore exception "</span> + e.getMessage(), e);</span><br /><span class="line"><span class="number">42</span>:         <span class="keyword">return</span> defaultVersion;</span><br /><span class="line"><span class="number">43</span>:     }</span><br /><span class="line"><span class="number">44</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>ç¬¬ 3 è‡³ 7 è¡Œï¼šä»&nbsp;<code>MAINFEST.MF</code>&nbsp;ä¸­è·å¾—ç‰ˆæœ¬å·ã€‚ä»¥&nbsp;<a href="http://central.maven.org/maven2/org/springframework/boot/spring-boot-starter/1.5.10.RELEASE/spring-boot-starter-1.5.10.RELEASE.jar" target="_blank" rel="external nofollow noopener noreferrer">spring-boot-starter-1.5.10.RELEASE.jar</a>&nbsp;ä¸¾ä¾‹å­ï¼š<img src="http://static2.iocoder.cn/images/Dubbo/2018_01_10/01.png" alt="MAINFEST.MF" /></li>
<li>ç¬¬ 8 è‡³ 36 è¡Œï¼šè‹¥è·å–ä¸åˆ°ï¼Œä» jar åŒ…<strong>å‘½å</strong>ä¸­<strong>å¯èƒ½</strong>å¸¦çš„ç‰ˆæœ¬å·ä½œä¸ºç»“æœã€‚ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œ<code>1.5.10.RELEASE</code>&nbsp;ã€‚</li>
<li>ç¬¬ 38 è¡Œï¼šè¿”å›ç‰ˆæœ¬å·ã€‚è‹¥ä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤ç‰ˆæœ¬å·ã€‚</li>
</ul>
</div>