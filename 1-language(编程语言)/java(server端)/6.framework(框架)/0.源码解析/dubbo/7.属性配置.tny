<header class="article-header">
<h1 class="article-title">å±æ€§é…ç½®</h1>
</header>
<div class="article-entry">
<blockquote>
<p>æœ¬æ–‡åŸºäº Dubbo 2.6.1 ç‰ˆæœ¬ï¼Œæœ›çŸ¥æ‚‰ã€‚</p>
</blockquote>
<blockquote>
<p>å‹æƒ…æç¤ºï¼Œã€<strong>é…ç½®</strong>ã€‘è¿™å—çš„å†…å®¹ï¼Œä¼šç›¸å¯¹æ¯”è¾ƒæ¯ç‡¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœçœ‹åˆ°ä¸€äº›å¾ˆéš¾æ‡‚çš„åœ°æ–¹ï¼Œå»ºè®®å…ˆè·³è¿‡ã€‚</p>
<p>å¯¹äº Dubbo ï¼Œé‡ç‚¹æ˜¯è¦å»ç†è§£ï¼Œå¤šåè®®ã€RPCã€å®¹é”™ç­‰ç­‰æ¨¡å—ï¼Œè€Œä¸æ˜¯ã€<strong>é…ç½®</strong>ã€‘ã€‚</p>
<p>ğŸ˜ˆ ä¼°è®¡å¥½å¤šèƒ–å‹è¢«ã€<strong>é…ç½®</strong>ã€‘è¿™ç« åŠé€€äº†æŠŠï¼Ÿï¼Ÿï¼Ÿ</p>
</blockquote>
<h1 id="1-æ¦‚è¿°">1. æ¦‚è¿°</h1>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹<strong>å±æ€§é…ç½®</strong>çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>FROM&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/configuration/properties.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; å±æ€§é…ç½®ã€‹</a></p>
<p>å¦‚æœå…¬å…±é…ç½®å¾ˆ<strong>ç®€å•</strong>ï¼Œæ²¡æœ‰å¤šæ³¨å†Œä¸­å¿ƒï¼Œå¤šåè®®ç­‰æƒ…å†µï¼Œæˆ–è€…æƒ³å¤šä¸ª Spring å®¹å™¨æƒ³å…±äº«é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨&nbsp;<code>dubbo.properties</code>&nbsp;ä½œä¸ºç¼ºçœé…ç½®ã€‚</p>
<p>Dubbo å°†è‡ªåŠ¨åŠ è½½ classpath æ ¹ç›®å½•ä¸‹çš„&nbsp;<code>dubbo.properties</code>ï¼Œå¯ä»¥é€šè¿‡JVMå¯åŠ¨å‚æ•°&nbsp;<code>-Ddubbo.properties.file=xxx.properties</code>&nbsp;æ”¹å˜ç¼ºçœé…ç½®ä½ç½®ã€‚</p>
</blockquote>
<p>ä»å®šä¹‰ä¸Šï¼Œå¾ˆå…³é”®çš„ä¸€ä¸ªè¯æ˜¯ &ldquo;<strong>ç®€å•</strong>&rdquo; ã€‚</p>
<ul>
<li><strong>å±æ€§é…ç½®</strong>ï¼Œä¸æ”¯æŒå¤šæ³¨å†Œä¸­å¿ƒï¼Œå¤šåè®®ç­‰æƒ…å†µï¼ŒåŸå› è§ä»£ç ã€‚</li>
<li><strong>å¤–éƒ¨åŒ–é…ç½®</strong>ï¼Œèƒ½å¤Ÿè§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼Œæ„Ÿå…´è¶£çš„èƒ–å‹å¯ä»¥è‡ªå·±çœ‹ä¸‹&nbsp;<a href="https://github.com/mercyblitz/blogs/blob/master/java/dubbo/Dubbo-Externalized-Configuration.md" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo å¤–éƒ¨åŒ–é…ç½®ï¼ˆExternalized Configurationï¼‰ã€‹</a>&nbsp;ã€‚å½“ç„¶ï¼Œè¿™å—å†…å®¹åé¢åˆ†äº«ï¼Œä¸åœ¨æœ¬æ–‡çš„èŒƒç•´ã€‚</li>
</ul>
<p>OK ï¼Œä¸‹é¢åœ¨å¼€å§‹çœ‹çœ‹å…·ä½“ä»£ç ä¹‹å‰ï¼Œèƒ–å‹å…ˆä»”ç»†é˜…è¯»ä¸‹&nbsp;<a href="http://dubbo.apache.org/zh-cn/docs/user/configuration/properties.html" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo ç”¨æˆ·æŒ‡å— &mdash;&mdash; å±æ€§é…ç½®ã€‹</a>&nbsp;ï¼Œæœ‰åŠ©äºä¸‹é¢ä»£ç çš„ç†è§£ã€‚</p>
<h1 id="2-AbstractConfig">2. AbstractConfig</h1>
<p>åœ¨ AbstractConfig ä¸­ï¼Œæä¾›äº†&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/d3c3975f320c78452f96098b04441fed4c00ab70/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L132-L212" target="_blank" rel="external nofollow noopener noreferrer"><code>#appendProperties(config)</code></a>&nbsp;æ–¹æ³•ï¼Œè¯»å–<strong>å¯åŠ¨å‚æ•°å˜é‡</strong>å’Œ&nbsp;<strong>properties é…ç½®</strong>åˆ°é…ç½®å¯¹è±¡ã€‚åœ¨å‰é¢çš„å‡ ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬å¤šæ¬¡çœ‹åˆ°è¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://static2.iocoder.cn/images/Dubbo/2018_01_13/01.png" alt="è¯»å–è°ƒç”¨" /></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"> <span class="number">1</span>: <span class="function"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">appendProperties</span><span class="params">(AbstractConfig config)</span> </span>{</span><br /><span class="line"> <span class="number">2</span>:     <span class="keyword">if</span> (config == <span class="keyword">null</span>) {</span><br /><span class="line"> <span class="number">3</span>:         <span class="keyword">return</span>;</span><br /><span class="line"> <span class="number">4</span>:     }</span><br /><span class="line"> <span class="number">5</span>:     String prefix = <span class="string">"dubbo."</span> + getTagName(config.getClass()) + <span class="string">"."</span>;</span><br /><span class="line"> <span class="number">6</span>:     Method[] methods = config.getClass().getMethods();</span><br /><span class="line"> <span class="number">7</span>:     <span class="keyword">for</span> (Method method : methods) {</span><br /><span class="line"> <span class="number">8</span>:         <span class="keyword">try</span> {</span><br /><span class="line"> <span class="number">9</span>:             String name = method.getName();</span><br /><span class="line"><span class="number">10</span>:             <span class="keyword">if</span> (name.length() &gt; <span class="number">3</span> &amp;&amp; name.startsWith(<span class="string">"set"</span>) &amp;&amp; Modifier.isPublic(method.getModifiers()) <span class="comment">// æ–¹æ³•æ˜¯ public çš„ setting æ–¹æ³•ã€‚</span></span><br /><span class="line"><span class="number">11</span>:                     &amp;&amp; method.getParameterTypes().length == <span class="number">1</span> &amp;&amp; isPrimitive(method.getParameterTypes()[<span class="number">0</span>])) { <span class="comment">// æ–¹æ³•çš„å”¯ä¸€å‚æ•°æ˜¯åŸºæœ¬æ•°æ®ç±»å‹</span></span><br /><span class="line"><span class="number">12</span>:                 <span class="comment">// è·å¾—å±æ€§åï¼Œä¾‹å¦‚ `ApplicationConfig#setName(...)` æ–¹æ³•ï¼Œå¯¹åº”çš„å±æ€§åä¸º name ã€‚</span></span><br /><span class="line"><span class="number">13</span>:                 String property = StringUtils.camelToSplitName(name.substring(<span class="number">3</span>, <span class="number">4</span>).toLowerCase() + name.substring(<span class="number">4</span>), <span class="string">"."</span>);</span><br /><span class="line"><span class="number">14</span>: </span><br /><span class="line"><span class="number">15</span>:                 <span class="comment">// ã€å¯åŠ¨å‚æ•°å˜é‡ã€‘ä¼˜å…ˆä»å¸¦æœ‰ `Config#id` çš„é…ç½®ä¸­è·å–ï¼Œä¾‹å¦‚ï¼š`dubbo.application.demo-provider.name` ã€‚</span></span><br /><span class="line"><span class="number">16</span>:                 String value = <span class="keyword">null</span>;</span><br /><span class="line"><span class="number">17</span>:                 <span class="keyword">if</span> (config.getId() != <span class="keyword">null</span> &amp;&amp; config.getId().length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">18</span>:                     String pn = prefix + config.getId() + <span class="string">"."</span> + property; <span class="comment">// å¸¦æœ‰ `Config#id`</span></span><br /><span class="line"><span class="number">19</span>:                     value = System.getProperty(pn);</span><br /><span class="line"><span class="number">20</span>:                     <span class="keyword">if</span> (!StringUtils.isBlank(value)) {</span><br /><span class="line"><span class="number">21</span>:                         logger.info(<span class="string">"Use System Property "</span> + pn + <span class="string">" to config dubbo"</span>);</span><br /><span class="line"><span class="number">22</span>:                     }</span><br /><span class="line"><span class="number">23</span>:                 }</span><br /><span class="line"><span class="number">24</span>:                 <span class="comment">// ã€å¯åŠ¨å‚æ•°å˜é‡ã€‘è·å–ä¸åˆ°ï¼Œå…¶æ¬¡ä¸å¸¦ `Config#id` çš„é…ç½®ä¸­è·å–ï¼Œä¾‹å¦‚ï¼š`dubbo.application.name` ã€‚</span></span><br /><span class="line"><span class="number">25</span>:                 <span class="keyword">if</span> (value == <span class="keyword">null</span> || value.length() == <span class="number">0</span>) {</span><br /><span class="line"><span class="number">26</span>:                     String pn = prefix + property; <span class="comment">// // ä¸å¸¦ `Config#id`</span></span><br /><span class="line"><span class="number">27</span>:                     value = System.getProperty(pn);</span><br /><span class="line"><span class="number">28</span>:                     <span class="keyword">if</span> (!StringUtils.isBlank(value)) {</span><br /><span class="line"><span class="number">29</span>:                         logger.info(<span class="string">"Use System Property "</span> + pn + <span class="string">" to config dubbo"</span>);</span><br /><span class="line"><span class="number">30</span>:                     }</span><br /><span class="line"><span class="number">31</span>:                 }</span><br /><span class="line"><span class="number">32</span>:                 <span class="keyword">if</span> (value == <span class="keyword">null</span> || value.length() == <span class="number">0</span>) {</span><br /><span class="line"><span class="number">33</span>:                     <span class="comment">// è¦†ç›–ä¼˜å…ˆçº§ä¸ºï¼šå¯åŠ¨å‚æ•°å˜é‡ &gt; XML é…ç½® &gt; properties é…ç½®ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ getter åˆ¤æ–­ XML æ˜¯å¦å·²ç»è®¾ç½®</span></span><br /><span class="line"><span class="number">34</span>:                     Method getter;</span><br /><span class="line"><span class="number">35</span>:                     <span class="keyword">try</span> {</span><br /><span class="line"><span class="number">36</span>:                         getter = config.getClass().getMethod(<span class="string">"get"</span> + name.substring(<span class="number">3</span>), <span class="keyword">new</span> Class&lt;?&gt;[<span class="number">0</span>]);</span><br /><span class="line"><span class="number">37</span>:                     } <span class="keyword">catch</span> (NoSuchMethodException e) {</span><br /><span class="line"><span class="number">38</span>:                         <span class="keyword">try</span> {</span><br /><span class="line"><span class="number">39</span>:                             getter = config.getClass().getMethod(<span class="string">"is"</span> + name.substring(<span class="number">3</span>), <span class="keyword">new</span> Class&lt;?&gt;[<span class="number">0</span>]);</span><br /><span class="line"><span class="number">40</span>:                         } <span class="keyword">catch</span> (NoSuchMethodException e2) {</span><br /><span class="line"><span class="number">41</span>:                             getter = <span class="keyword">null</span>;</span><br /><span class="line"><span class="number">42</span>:                         }</span><br /><span class="line"><span class="number">43</span>:                     }</span><br /><span class="line"><span class="number">44</span>:                     <span class="keyword">if</span> (getter != <span class="keyword">null</span>) {</span><br /><span class="line"><span class="number">45</span>:                         <span class="keyword">if</span> (getter.invoke(config, <span class="keyword">new</span> Object[<span class="number">0</span>]) == <span class="keyword">null</span>) { <span class="comment">// ä½¿ç”¨ getter åˆ¤æ–­ XML æ˜¯å¦å·²ç»è®¾ç½®</span></span><br /><span class="line"><span class="number">46</span>:                             <span class="comment">// ã€properties é…ç½®ã€‘ä¼˜å…ˆä»å¸¦æœ‰ `Config#id` çš„é…ç½®ä¸­è·å–ï¼Œä¾‹å¦‚ï¼š`dubbo.application.demo-provider.name` ã€‚</span></span><br /><span class="line"><span class="number">47</span>:                             <span class="keyword">if</span> (config.getId() != <span class="keyword">null</span> &amp;&amp; config.getId().length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">48</span>:                                 value = ConfigUtils.getProperty(prefix + config.getId() + <span class="string">"."</span> + property);</span><br /><span class="line"><span class="number">49</span>:                             }</span><br /><span class="line"><span class="number">50</span>:                             <span class="comment">// ã€properties é…ç½®ã€‘è·å–ä¸åˆ°ï¼Œå…¶æ¬¡ä¸å¸¦ `Config#id` çš„é…ç½®ä¸­è·å–ï¼Œä¾‹å¦‚ï¼š`dubbo.application.name` ã€‚</span></span><br /><span class="line"><span class="number">51</span>:                             <span class="keyword">if</span> (value == <span class="keyword">null</span> || value.length() == <span class="number">0</span>) {</span><br /><span class="line"><span class="number">52</span>:                                 value = ConfigUtils.getProperty(prefix + property);</span><br /><span class="line"><span class="number">53</span>:                             }</span><br /><span class="line"><span class="number">54</span>:                             <span class="comment">// ã€properties é…ç½®ã€‘è€ç‰ˆæœ¬å…¼å®¹ï¼Œè·å–ä¸åˆ°ï¼Œæœ€åä¸å¸¦ `Config#id` çš„é…ç½®ä¸­è·å–ï¼Œä¾‹å¦‚ï¼š`dubbo.protocol.name` ã€‚</span></span><br /><span class="line"><span class="number">55</span>:                             <span class="keyword">if</span> (value == <span class="keyword">null</span> || value.length() == <span class="number">0</span>) {</span><br /><span class="line"><span class="number">56</span>:                                 String legacyKey = legacyProperties.get(prefix + property);</span><br /><span class="line"><span class="number">57</span>:                                 <span class="keyword">if</span> (legacyKey != <span class="keyword">null</span> &amp;&amp; legacyKey.length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">58</span>:                                     value = convertLegacyValue(legacyKey, ConfigUtils.getProperty(legacyKey));</span><br /><span class="line"><span class="number">59</span>:                                 }</span><br /><span class="line"><span class="number">60</span>:                             }</span><br /><span class="line"><span class="number">61</span>: </span><br /><span class="line"><span class="number">62</span>:                         }</span><br /><span class="line"><span class="number">63</span>:                     }</span><br /><span class="line"><span class="number">64</span>:                 }</span><br /><span class="line"><span class="number">65</span>:                 <span class="comment">// è·å–åˆ°å€¼ï¼Œè¿›è¡Œåå°„è®¾ç½®ã€‚</span></span><br /><span class="line"><span class="number">66</span>:                 <span class="keyword">if</span> (value != <span class="keyword">null</span> &amp;&amp; value.length() &gt; <span class="number">0</span>) {</span><br /><span class="line"><span class="number">67</span>:                     method.invoke(config, <span class="keyword">new</span> Object[]{convertPrimitive(method.getParameterTypes()[<span class="number">0</span>], value)});</span><br /><span class="line"><span class="number">68</span>:                 }</span><br /><span class="line"><span class="number">69</span>:             }</span><br /><span class="line"><span class="number">70</span>:         } <span class="keyword">catch</span> (Exception e) {</span><br /><span class="line"><span class="number">71</span>:             logger.error(e.getMessage(), e);</span><br /><span class="line"><span class="number">72</span>:         }</span><br /><span class="line"><span class="number">73</span>:     }</span><br /><span class="line"><span class="number">74</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
<ul>
<li>
<p>ç¬¬ 5 è¡Œï¼šè·å¾—é…ç½®é¡¹<strong>å‰ç¼€</strong>ã€‚æ­¤å¤„çš„&nbsp;<a href="https://github.com/YunaiV/dubbo/blob/d3c3975f320c78452f96098b04441fed4c00ab70/dubbo-config/dubbo-config-api/src/main/java/com/alibaba/dubbo/config/AbstractConfig.java#L214-L230" target="_blank" rel="external nofollow noopener noreferrer"><code>#getTagName(Class&lt;?&gt;)</code></a>&nbsp;æ–¹æ³•ï¼Œä½¿ç”¨é…ç½®ç±»çš„ç±»åï¼Œè·å¾—å¯¹åº”çš„å±æ€§æ ‡ç­¾ã€‚è¯¥æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java">
<table>
<tbody>
<tr>
<td class="code">
<pre><span class="line"> <span class="number">1</span>: <span class="comment">/**</span></span><br /><span class="line"><span class="comment"> 2:  * é…ç½®ç±»åçš„åç¼€</span></span><br /><span class="line"><span class="comment"> 3:  * ä¾‹å¦‚ï¼ŒServiceConfig åç¼€ä¸º Configï¼›ServiceBean åç¼€ä¸º Beanã€‚</span></span><br /><span class="line"><span class="comment"> 4:  */</span></span><br /><span class="line"> <span class="number">5</span>: <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] SUFFIXES = <span class="keyword">new</span> String[]{<span class="string">"Config"</span>, <span class="string">"Bean"</span>};</span><br /><span class="line"> <span class="number">6</span>: </span><br /><span class="line"> <span class="number">7</span>: <span class="comment">/**</span></span><br /><span class="line"><span class="comment"> 8:  * è·å–ç±»åå¯¹åº”çš„å±æ€§æ ‡ç­¾ï¼Œä¾‹å¦‚ï¼ŒServiceConfig å¯¹åº”ä¸º service ã€‚</span></span><br /><span class="line"><span class="comment"> 9:  *</span></span><br /><span class="line"><span class="comment">10:  * <span class="doctag">@param</span> cls ç±»å</span></span><br /><span class="line"><span class="comment">11:  * <span class="doctag">@return</span> æ ‡ç­¾</span></span><br /><span class="line"><span class="comment">12:  */</span></span><br /><span class="line"><span class="number">13</span>: <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getTagName</span><span class="params">(Class&lt;?&gt; cls)</span> </span>{</span><br /><span class="line"><span class="number">14</span>:     String tag = cls.getSimpleName();</span><br /><span class="line"><span class="number">15</span>:     <span class="keyword">for</span> (String suffix : SUFFIXES) {</span><br /><span class="line"><span class="number">16</span>:         <span class="keyword">if</span> (tag.endsWith(suffix)) {</span><br /><span class="line"><span class="number">17</span>:             tag = tag.substring(<span class="number">0</span>, tag.length() - suffix.length());</span><br /><span class="line"><span class="number">18</span>:             <span class="keyword">break</span>;</span><br /><span class="line"><span class="number">19</span>:         }</span><br /><span class="line"><span class="number">20</span>:     }</span><br /><span class="line"><span class="number">21</span>:     tag = tag.toLowerCase();</span><br /><span class="line"><span class="number">22</span>:     <span class="keyword">return</span> tag;</span><br /><span class="line"><span class="number">23</span>: }</span></pre>
</td>
</tr>
</tbody>
</table>
</figure>
</li>
<li>
<p>ç¬¬ 6 è¡Œï¼šè·å¾—é…ç½®ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œç”¨äºä¸‹é¢é€šè¿‡<strong>åå°„</strong>è·å¾—é…ç½®é¡¹çš„å±æ€§åï¼Œå†ç”¨å±æ€§åï¼Œå»è¯»å–<strong>å¯åŠ¨å‚æ•°å˜é‡</strong>å’Œ&nbsp;<strong>properties é…ç½®</strong>åˆ°é…ç½®å¯¹è±¡ã€‚</p>
</li>
<li>
<p>ç¬¬ 10 è‡³ 11 è¡Œï¼špublic &amp;&amp; setting æ–¹æ³• &amp;&amp;&nbsp;<strong>å”¯ä¸€</strong>å‚æ•°ä¸ºåŸºæœ¬ç±»å‹ã€‚</p>
<ul>
<li>å…¶ä¸­<strong>å”¯ä¸€</strong>å‚æ•°ä¸º<strong>åŸºæœ¬ç±»å‹</strong>ï¼Œå†³å®šäº†ä¸€ä¸ªé…ç½®å¯¹è±¡æ— æ³•è®¾ç½®å¦å¤–ä¸€ä¸ªé…ç½®å¯¹è±¡<strong>æ•°ç»„</strong>ä¸ºå±æ€§ï¼Œå³<strong>æ²¡æœ‰å¤šæ³¨å†Œä¸­å¿ƒï¼Œå¤šåè®®ç­‰æƒ…å†µ</strong>ã€‚ä¾‹å¦‚ï¼ŒServiceConfig æ— æ³•é€šè¿‡<strong>å±æ€§é…ç½®</strong>è®¾ç½®å¤šä¸ª ProtocolConfig å¯¹è±¡ã€‚</li>
<li>å½“ç„¶ä¸Šè¿°é—®é¢˜ï¼Œæ­£å¦‚æ–‡åˆæ‰€è¯´ï¼Œ<a href="https://github.com/mercyblitz/blogs/blob/master/java/dubbo/Dubbo-Externalized-Configuration.md" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo å¤–éƒ¨åŒ–é…ç½®ï¼ˆExternalized Configurationï¼‰ã€‹</a>&nbsp;å·²ç»æ”¯æŒã€‚</li>
<li>
<p>å¦å¤–ï¼Œ<strong>å±æ€§é…ç½®</strong>å’Œ<strong>å¤–éƒ¨åŒ–é…ç½®</strong>æœ‰ä¸€å®šçš„ç›¸ä¼¼ç‚¹ï¼š</p>
<blockquote>
<p>FROM&nbsp;<a href="https://github.com/mercyblitz/blogs/blob/master/java/dubbo/Dubbo-Externalized-Configuration.md" target="_blank" rel="external nofollow noopener noreferrer">ã€ŠDubbo å¤–éƒ¨åŒ–é…ç½®ï¼ˆExternalized Configurationï¼‰ã€‹</a></p>
</blockquote>
<p>åœ¨ Dubbo å®˜æ–¹ç”¨æˆ·æ‰‹å†Œçš„<a href="http://dubbo.apache.org/zh-cn/docs/user/configuration/properties.html" target="_blank" rel="external nofollow noopener noreferrer">&ldquo;å±æ€§é…ç½®&rdquo;</a>ç« èŠ‚ä¸­ï¼Œ<code>dubbo.properties</code>&nbsp;é…ç½®å±æ€§èƒ½å¤Ÿæ˜ å°„åˆ°&nbsp;<code>ApplicationConfig</code>ã€<code>ProtocolConfig</code>&nbsp;ä»¥åŠ&nbsp;<code>RegistryConfig</code>&nbsp;çš„å­—æ®µã€‚ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œ<code>dubbo.properties</code>&nbsp;ä¹Ÿæ˜¯ Dubbo çš„å¤–éƒ¨åŒ–é…ç½®ã€‚</p>
</li>
</ul>
</li>
<li>
<p>ç¬¬ 13 è¡Œï¼šè·å¾—å±æ€§åã€‚ä¾‹å¦‚ï¼Œ<code>ApplicationConfig#setName(...)</code>&nbsp;æ–¹æ³•ï¼Œå¯¹åº”çš„å±æ€§åä¸º&nbsp;<code>"name"</code>&nbsp;ã€‚</p>
</li>
<li>
<p>è¯»å–çš„<strong>è¦†ç›–ç­–ç•¥</strong>å¦‚ä¸‹ï¼š</p>
<blockquote>
<p><img src="http://static2.iocoder.cn/images/Dubbo/2018_01_13/02.png" alt="è¦†ç›–ç­–ç•¥" /></p>
</blockquote>
</li>
<li>
<p>ç¬¬ 15 è‡³ 31 è¡Œï¼šä¼˜å…ˆä»ã€<strong>å¯åŠ¨å‚æ•°å˜é‡</strong>ã€‘è·å–é…ç½®é¡¹çš„å€¼ã€‚</p>
<ul>
<li>ğŸ™‚ æœ‰<strong>ä¸¤ç§</strong>æƒ…å†µï¼Œèƒ–å‹ç»†çœ‹ä¸‹æ³¨é‡Šã€‚</li>
</ul>
</li>
<li>ç¬¬ 33 è‡³ 45 è¡Œï¼šå› ä¸º XMLé…ç½® çš„ä¼˜å…ˆçº§<strong>å¤§äº</strong>&nbsp;propertiesé…ç½®ï¼Œå› æ­¤éœ€è¦<strong>è·å–å¹¶ä½¿ç”¨</strong>&nbsp;getting æ–¹æ³•ï¼Œåˆ¤æ–­é…ç½®å¯¹è±¡<strong>å·²ç»æ‹¥æœ‰</strong>è¯¥é…ç½®é¡¹çš„å€¼ã€‚å¦‚æœæœ‰ï¼Œåˆ™ä¸ä» propertiesé…ç½® è¯»å–å¯¹åº”çš„å€¼ã€‚</li>
<li>
<p>ç¬¬ 46 è‡³ 59 è¡Œï¼šæœ€åä»ã€<strong>propertiesé…ç½®</strong>ã€‘è·å–é…ç½®é¡¹çš„å€¼ã€‚</p>
<ul>
<li>ğŸ™‚ æœ‰<strong>ä¸‰ç§</strong>æƒ…å†µï¼Œå‰ä¸¤ç§å’Œã€<strong>å¯åŠ¨å‚æ•°å˜é‡</strong>ã€‘ç›¸åŒã€‚</li>
<li>
<p>æœ€åä¸€ç§ï¼Œä¸»è¦æ˜¯å…¼å®¹è€ç‰ˆæœ¬çš„é…ç½®é¡¹ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="Java"> <span class="number">1</span>: <span class="comment">/**</span>
<span class="comment"> 2:  * æ–°è€ç‰ˆæœ¬çš„ properties çš„ key æ˜ å°„</span>
<span class="comment"> 3:  *</span>
<span class="comment"> 4:  * keyï¼šæ–°ç‰ˆæœ¬çš„é…ç½® æ˜ å°„</span>
<span class="comment"> 5:  * valueï¼šæ—§ç‰ˆæœ¬çš„é…ç½® æ˜ å°„</span>
<span class="comment"> 6:  *</span>
<span class="comment"> 7:  * æ¥è‡ª 2012/3/8 ä¸‹åˆ 5ï¼š51 cb1f705 æäº¤</span>
<span class="comment"> 8:  * DUBBO-251 å¢åŠ APIè¦†ç›–dubbo.propertiesçš„æµ‹è¯•ï¼Œä»¥åŠæ—§ç‰ˆæœ¬é…ç½®é¡¹æµ‹è¯•ã€‚</span>
<span class="comment"> 9:  */</span>
<span class="number">10</span>: <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, String&gt; legacyProperties = <span class="keyword">new</span> HashMap&lt;String, String&gt;();
<span class="number">11</span>: 
<span class="number">12</span>: <span class="comment">/**</span>
<span class="comment">13:  * å°†é”®å¯¹åº”çš„å€¼è½¬æ¢æˆç›®æ ‡çš„å€¼ã€‚</span>
<span class="comment">14:  *</span>
<span class="comment">15:  * å› ä¸ºï¼Œæ–°è€é…ç½®å¯èƒ½æœ‰ä¸€äº›å·®å¼‚ï¼Œé€šè¿‡è¯¥æ–¹æ³•è¿›è¡Œè½¬æ¢ã€‚</span>
<span class="comment">16:  *</span>
<span class="comment">17:  * <span class="doctag">@param</span> key é”®</span>
<span class="comment">18:  * <span class="doctag">@param</span> value å€¼</span>
<span class="comment">19:  * <span class="doctag">@return</span> è½¬æ¢åçš„å€¼</span>
<span class="comment">20:  */</span>
<span class="number">21</span>: <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">convertLegacyValue</span><span class="params">(String key, String value)</span> </span>{
<span class="number">22</span>:     <span class="keyword">if</span> (value != <span class="keyword">null</span> &amp;&amp; value.length() &gt; <span class="number">0</span>) {
<span class="number">23</span>:         <span class="keyword">if</span> (<span class="string">"dubbo.service.max.retry.providers"</span>.equals(key)) {
<span class="number">24</span>:             <span class="keyword">return</span> String.valueOf(Integer.parseInt(value) - <span class="number">1</span>);
<span class="number">25</span>:         } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"dubbo.service.allow.no.provider"</span>.equals(key)) {
<span class="number">26</span>:             <span class="keyword">return</span> String.valueOf(!Boolean.parseBoolean(value));
<span class="number">27</span>:         }
<span class="number">28</span>:     }
<span class="number">29</span>:     <span class="keyword">return</span> value;
<span class="number">30</span>: }
</code></pre>
<ul>
<li>x</li>
</ul>
</li>
</ul>
</li>
<li>ç¬¬ 65 è‡³ 68 è¡Œï¼šæœ‰å€¼ï¼Œé€šè¿‡åå°„è¿›è¡Œè®¾ç½®åˆ°é…ç½®å¯¹è±¡ä¸­ã€‚</li>
<li>ç¬¬ 70 è‡³ 72 è¡Œï¼šé€»è¾‘ä¸­é—´å‘ç”Ÿå¼‚å¸¸ï¼Œ<strong>ä¸æŠ›å‡ºå¼‚å¸¸</strong>ï¼Œä»…æ‰“å°é”™è¯¯æ—¥å¿—ã€‚</li>
</ul>
</div>