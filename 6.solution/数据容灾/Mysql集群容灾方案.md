<article class="Post-Main Post-NormalMain" tabindex="-1"><header class="Post-Header"><h1 class="Post-Title">五大常见的MySQL高可用方案</h1><div class="Post-Author"><div class="AuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="UCloud云计算"><meta itemprop="image" content="https://pic1.zhimg.com/v2-1dc87385b84f19ecc188295ad43e40a7_l.jpg"><meta itemprop="url" content="https://www.zhihu.com/people/ucloud-yun-ji-suan"><meta itemprop="zhihu:followerCount"><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover1-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover1-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/org/ucloud-yun-ji-suan"><img class="Avatar Avatar--round AuthorInfo-avatar" width="38" height="38" src="https://pic1.zhimg.com/v2-1dc87385b84f19ecc188295ad43e40a7_xs.jpg" srcset="https://pic1.zhimg.com/v2-1dc87385b84f19ecc188295ad43e40a7_l.jpg 2x" alt="UCloud云计算"></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover2-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover2-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/org/ucloud-yun-ji-suan">UCloud云计算</a></div></div><a class="UserLink-badge" data-tooltip="已认证的官方帐号" href="https://www.zhihu.com/question/48510028" target="_blank" rel="noopener noreferrer"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--BadgeCert" fill="currentColor" viewBox="0 0 24 24" width="18" height="18"><g fill="none" fill-rule="evenodd"><path fill="#0F88EB" d="M2.64 13.39c1.068.895 1.808 2.733 1.66 4.113l.022-.196c-.147 1.384.856 2.4 2.24 2.278l-.198.016c1.387-.122 3.21.655 4.083 1.734l-.125-.154c.876 1.084 2.304 1.092 3.195.027l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.387.123-3.21-.654-4.083-1.733l.125.153c-.876-1.083-2.304-1.092-3.195-.027l.127-.152c-.895 1.068-2.733 1.808-4.113 1.662l.198.02c-1.386-.147-2.4.857-2.279 2.24L4.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.878-1.092 2.304-.027 3.195l-.152-.127z"></path><path fill="#FFF" d="M9.78 15.728l-2.633-2.999s-.458-.705.242-1.362c.7-.657 1.328-.219 1.328-.219l1.953 2.132 4.696-4.931s.663-.348 1.299.198c.636.545.27 1.382.27 1.382s-3.466 3.858-5.376 5.782c-.98.93-1.778.017-1.778.017z"></path></g></svg></span></a></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="AuthorInfo-badgeText">已认证的官方帐号</div></div></div></div></div></div><div><span class="Voters"><button type="button" class="Button Button--plain">315 人<!-- -->赞同了该文章</button></span></div></header><div class="Post-RichTextContainer"><div class="RichText ztext Post-RichText"><h2>1.	概述</h2><p>我们在考虑MySQL数据库的高可用的架构时，主要要考虑如下几方面：</p><ul><li>如果数据库发生了宕机或者意外中断等故障，能尽快恢复数据库的可用性，尽可能的减少停机时间，保证业务不会因为数据库的故障而中断。</li><li>用作备份、只读副本等功能的非主节点的数据应该和主节点的数据实时或者最终保持一致。</li><li>当业务发生数据库切换时，切换前后的数据库内容应当一致，不会因为数据缺失或者数据不一致而影响业务。</li></ul><p>关于对高可用的分级在这里我们不做详细的讨论，这里只讨论常用高可用方案的优缺点以及高可用方案的选型。</p><br><br><h2>2.	高可用方案</h2><p><b>2.1.	主从或主主半同步复制</b></p><p>使用双节点数据库，搭建单向或者双向的半同步复制。在5.7以后的版本中，由于lossless replication、logical多线程复制等一些列新特性的引入，使得MySQL原生半同步复制更加可靠。</p><p>常见架构如下：</p><figure><noscript><img src="https://pic2.zhimg.com/v2-fe9da1725e2c5b934858e32884f620b9_b.jpg" data-rawwidth="640" data-rawheight="283" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic2.zhimg.com/v2-fe9da1725e2c5b934858e32884f620b9_r.jpg"/></noscript><img src="https://pic2.zhimg.com/80/v2-fe9da1725e2c5b934858e32884f620b9_hd.jpg" data-rawwidth="640" data-rawheight="283" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic2.zhimg.com/v2-fe9da1725e2c5b934858e32884f620b9_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-fe9da1725e2c5b934858e32884f620b9_b.jpg" data-lazy-status="ok"></figure><p>通常会和proxy、keepalived等第三方软件同时使用，即可以用来监控数据库的健康，又可以执行一系列管理命令。如果主库发生故障，切换到备库后仍然可以继续使用数据库。</p><p><b>优点：</b><br></p><ol><li>架构比较简单，使用原生半同步复制作为数据同步的依据；<br></li><li>双节点，没有主机宕机后的选主问题，直接切换即可；<br></li><li>双节点，需求资源少，部署简单；<br></li></ol><br><p><b>缺点：</b></p><ol><li>完全依赖于半同步复制，如果半同步复制退化为异步复制，数据一致性无法得到保证；<br></li><li>需要额外考虑haproxy、keepalived的高可用机制。<br></li></ol><br><br><p><b>2.2.	半同步复制优化</b></p><p>半同步复制机制是可靠的。如果半同步复制一直是生效的，那么便可以认为数据是一致的。但是由于网络波动等一些客观原因，导致半同步复制发生超时而切换为异步复制，那么这时便不能保证数据的一致性。所以尽可能的保证半同步复制，便可提高数据的一致性。</p><p>该方案同样使用双节点架构，但是在原有半同复制的基础上做了功能上的优化，使半同步复制的机制变得更加可靠。</p><p>可参考的优化方案如下：</p><blockquote><b>2.2.1.	双通道复制</b></blockquote><figure><noscript><img src="https://pic2.zhimg.com/v2-2dc5690ad14b6b1b6f031316288748cd_b.jpg" data-rawwidth="640" data-rawheight="244" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic2.zhimg.com/v2-2dc5690ad14b6b1b6f031316288748cd_r.jpg"/></noscript><img src="https://pic2.zhimg.com/80/v2-2dc5690ad14b6b1b6f031316288748cd_hd.jpg" data-rawwidth="640" data-rawheight="244" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic2.zhimg.com/v2-2dc5690ad14b6b1b6f031316288748cd_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-2dc5690ad14b6b1b6f031316288748cd_b.jpg" data-lazy-status="ok"></figure><p>半同步复制由于发生超时后，复制断开，当再次建立起复制时，同时建立两条通道，其中一条半同步复制通道从当前位置开始复制，保证从机知道当前主机执行的进度。另外一条异步复制通道开始追补从机落后的数据。当异步复制通道追赶到半同步复制的起始位置时，恢复半同步复制。</p><blockquote><b>2.2.2.	binlog文件服务器</b></blockquote><figure><noscript><img src="https://pic1.zhimg.com/v2-a0000eb96694d02b65861b3bbbbbd520_b.jpg" data-rawwidth="640" data-rawheight="310" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic1.zhimg.com/v2-a0000eb96694d02b65861b3bbbbbd520_r.jpg"/></noscript><img src="https://pic1.zhimg.com/80/v2-a0000eb96694d02b65861b3bbbbbd520_hd.jpg" data-rawwidth="640" data-rawheight="310" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic1.zhimg.com/v2-a0000eb96694d02b65861b3bbbbbd520_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-a0000eb96694d02b65861b3bbbbbd520_b.jpg" data-lazy-status="ok"></figure><p>搭建两条半同步复制通道，其中连接文件服务器的半同步通道正常情况下不启用，当主从的半同步复制发生网络问题退化后，启动与文件服务器的半同步复制通道。当主从半同步复制恢复后，关闭与文件服务器的半同步复制通道。</p><p><b>优点：</b></p><ol><li>双节点，需求资源少，部署简单；<br></li><li>架构简单，没有选主的问题，直接切换即可;<br></li><li>相比于原生复制，优化后的半同步复制更能保证数据的一致性。<br></li></ol><br><p><b>缺点：</b></p><ol><li>需要修改内核源码或者使用mysql通信协议。需要对源码有一定的了解，并能做一定程度的二次开发。<br></li><li>依旧依赖于半同步复制，没有从根本上解决数据一致性问题。<br></li></ol><br><br><p><b>2.3.	高可用架构优化</b></p><p>将双节点数据库扩展到多节点数据库，或者多节点数据库集群。可以根据自己的需要选择一主两从、一主多从或者多主多从的集群。</p><p>由于半同步复制，存在接收到一个从机的成功应答即认为半同步复制成功的特性，所以多从半同步复制的可靠性要优于单从半同步复制的可靠性。并且多节点同时宕机的几率也要小于单节点宕机的几率，所以多节点架构在一定程度上可以认为高可用性是好于双节点架构。</p><p>但是由于数据库数量较多，所以需要数据库管理软件来保证数据库的可维护性。可以选择MMM、MHA或者各个版本的proxy等等。常见方案如下：</p><blockquote><b>2.3.1.	MHA+多节点集群</b></blockquote><figure><noscript><img src="https://pic2.zhimg.com/v2-e19ddbd1f50cf6932c1f3605f5ac0941_b.jpg" data-rawwidth="640" data-rawheight="329" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic2.zhimg.com/v2-e19ddbd1f50cf6932c1f3605f5ac0941_r.jpg"/></noscript><img src="https://pic2.zhimg.com/80/v2-e19ddbd1f50cf6932c1f3605f5ac0941_hd.jpg" data-rawwidth="640" data-rawheight="329" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic2.zhimg.com/v2-e19ddbd1f50cf6932c1f3605f5ac0941_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-e19ddbd1f50cf6932c1f3605f5ac0941_b.jpg" data-lazy-status="ok"></figure><p>MHA Manager会定时探测集群中的master节点，当master出现故障时，它可以自动将最新数据的slave提升为新的master，然后将所有其他的slave重新指向新的master，整个故障转移过程对应用程序完全透明。</p><br><p>MHA Node运行在每台MySQL服务器上，主要作用是切换时处理二进制日志，确保切换尽量少丢数据。</p><p>MHA也可以扩展到如下的多节点集群：</p><figure><noscript><img src="https://pic3.zhimg.com/v2-7560a91e8d7be58e3c9293896dfa1d1e_b.jpg" data-rawwidth="640" data-rawheight="405" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic3.zhimg.com/v2-7560a91e8d7be58e3c9293896dfa1d1e_r.jpg"/></noscript><img src="https://pic3.zhimg.com/80/v2-7560a91e8d7be58e3c9293896dfa1d1e_hd.jpg" data-rawwidth="640" data-rawheight="405" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic3.zhimg.com/v2-7560a91e8d7be58e3c9293896dfa1d1e_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-7560a91e8d7be58e3c9293896dfa1d1e_b.jpg" data-lazy-status="ok"></figure><p><b>优点：</b></p><ol><li>可以进行故障的自动检测和转移;<br></li><li>可扩展性较好，可以根据需要扩展MySQL的节点数量和结构;<br></li><li>相比于双节点的MySQL复制，三节点/多节点的MySQL发生不可用的概率更低<br></li></ol><br><p><b>缺点：</b></p><ol><li>至少需要三节点，相对于双节点需要更多的资源;<br></li><li>逻辑较为复杂，发生故障后排查问题，定位问题更加困难;<br></li><li>数据一致性仍然靠原生半同步复制保证，仍然存在数据不一致的风险;<br></li><li>可能因为网络分区发生脑裂现象;<br></li></ol><br><br><blockquote><b>2.3.2.	zookeeper+proxy</b></blockquote><p>Zookeeper使用分布式算法保证集群数据的一致性，使用zookeeper可以有效的保证proxy的高可用性，可以较好的避免网络分区现象的产生。</p><figure><noscript><img src="https://pic2.zhimg.com/v2-c6f098dfb3313fdf3cd5bbd0f567a191_b.jpg" data-rawwidth="640" data-rawheight="396" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic2.zhimg.com/v2-c6f098dfb3313fdf3cd5bbd0f567a191_r.jpg"/></noscript><img src="https://pic2.zhimg.com/80/v2-c6f098dfb3313fdf3cd5bbd0f567a191_hd.jpg" data-rawwidth="640" data-rawheight="396" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic2.zhimg.com/v2-c6f098dfb3313fdf3cd5bbd0f567a191_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-c6f098dfb3313fdf3cd5bbd0f567a191_b.jpg" data-lazy-status="ok"></figure><p><b>优点：</b></p><br><ol><li>较好的保证了整个系统的高可用性，包括proxy、MySQL;<br></li><li>扩展性较好，可以扩展为大规模集群;<br></li></ol><br><p><b>缺点：</b></p><ol><li>数据一致性仍然依赖于原生的mysql半同步复制;<br></li><li>引入zk，整个系统的逻辑变得更加复杂;<br></li></ol><br><br><p><b>2.4.	共享存储</b></p><p>共享存储实现了数据库服务器和存储设备的解耦，不同数据库之间的数据同步不再依赖于MySQL的原生复制功能，而是通过磁盘数据同步的手段，来保证数据的一致性。</p><blockquote><b>2.4.1.	SAN共享储存</b></blockquote><p>SAN的概念是允许存储设备和处理器（服务器）之间建立直接的高速网络（与LAN相比）连接，通过这种连接实现数据的集中式存储。常用架构如下：</p><br><figure><noscript><img src="https://pic2.zhimg.com/v2-4085e9c4803ca4174d8c689c73365f35_b.jpg" data-rawwidth="640" data-rawheight="549" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic2.zhimg.com/v2-4085e9c4803ca4174d8c689c73365f35_r.jpg"/></noscript><img src="https://pic2.zhimg.com/80/v2-4085e9c4803ca4174d8c689c73365f35_hd.jpg" data-rawwidth="640" data-rawheight="549" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic2.zhimg.com/v2-4085e9c4803ca4174d8c689c73365f35_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-4085e9c4803ca4174d8c689c73365f35_b.jpg" data-lazy-status="ok"></figure><p>使用共享存储时，MySQL服务器能够正常挂载文件系统并操作，如果主库发生宕机，备库可以挂载相同的文件系统，保证主库和备库使用相同的数据。</p><br><p><b>优点：</b></p><ol><li>两节点即可，部署简单，切换逻辑简单；<br></li><li>很好的保证数据的强一致性；<br></li><li>不会因为MySQL的逻辑错误发生数据不一致的情况；</li></ol><br><b>缺点：</b><br><ol><li>需要考虑共享存储的高可用；<br></li><li>价格昂贵；<br></li></ol><br><br><blockquote><b>2.4.2.	 DRBD磁盘复制</b></blockquote><p> DRBD是一种基于软件、基于网络的块复制存储解决方案，主要用于对服务器之间的磁盘、分区、逻辑卷等进行数据镜像，当用户将数据写入本地磁盘时，还会将数据发送到网络中另一台主机的磁盘上，这样的本地主机(主节点)与远程主机(备节点)的数据就可以保证实时同步。常用架构如下：</p><figure><noscript><img src="https://pic3.zhimg.com/v2-a3f9aa5fe410927ee676f3b331b296e2_b.jpg" data-rawwidth="600" data-rawheight="561" class="origin_image zh-lightbox-thumb" width="600" data-original="https://pic3.zhimg.com/v2-a3f9aa5fe410927ee676f3b331b296e2_r.jpg"/></noscript><img src="https://pic3.zhimg.com/80/v2-a3f9aa5fe410927ee676f3b331b296e2_hd.jpg" data-rawwidth="600" data-rawheight="561" class="origin_image zh-lightbox-thumb lazy" width="600" data-original="https://pic3.zhimg.com/v2-a3f9aa5fe410927ee676f3b331b296e2_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-a3f9aa5fe410927ee676f3b331b296e2_b.jpg" data-lazy-status="ok"></figure><p>当本地主机出现问题，远程主机上还保留着一份相同的数据，可以继续使用，保证了数据的安全。</p><p>DRBD是linux内核模块实现的快级别的同步复制技术，可以与SAN达到相同的共享存储效果。</p><br><p><b>优点：</b></p><ol><li>两节点即可，部署简单，切换逻辑简单；<br></li><li>相比于SAN储存网络，价格低廉；<br></li><li>保证数据的强一致性；<br></li></ol><br><p><b>缺点：</b></p><ol><li>对io性能影响较大；<br></li><li>从库不提供读操作；<br></li></ol><br><br><br><b>2.5.	分布式协议</b><p>分布式协议可以很好解决数据一致性问题。比较常见的方案如下：</p><blockquote><b>2.5.1.	 MySQL cluster</b></blockquote><p>MySQL cluster是官方集群的部署方案，通过使用NDB存储引擎实时备份冗余数据，实现数据库的高可用性和数据一致性。</p><figure><noscript><img src="https://pic2.zhimg.com/v2-6cf80978af495002c66642ee3a47ae7d_b.jpg" data-rawwidth="640" data-rawheight="649" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic2.zhimg.com/v2-6cf80978af495002c66642ee3a47ae7d_r.jpg"/></noscript><img src="https://pic2.zhimg.com/80/v2-6cf80978af495002c66642ee3a47ae7d_hd.jpg" data-rawwidth="640" data-rawheight="649" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic2.zhimg.com/v2-6cf80978af495002c66642ee3a47ae7d_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-6cf80978af495002c66642ee3a47ae7d_b.jpg" data-lazy-status="ok"></figure><p><b>优点：</b></p><ol><li>全部使用官方组件，不依赖于第三方软件；<br></li><li>可以实现数据的强一致性；<br></li></ol><br><p><b>缺点：</b></p><ol><li>国内使用的较少；<br></li><li>配置较复杂，需要使用NDB储存引擎，与MySQL常规引擎存在一定差异；<br></li><li>至少三节点；<br></li></ol><br><br><blockquote><b>2.5.2.	Galera </b></blockquote><p>基于Galera的MySQL高可用集群， 是多主数据同步的MySQL集群解决方案，使用简单，没有单点故障，可用性高。常见架构如下：</p><br><figure><noscript><img src="https://pic4.zhimg.com/v2-3047946f17ab5adc21f1c283704c32db_b.jpg" data-rawwidth="640" data-rawheight="474" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic4.zhimg.com/v2-3047946f17ab5adc21f1c283704c32db_r.jpg"/></noscript><img src="https://pic4.zhimg.com/80/v2-3047946f17ab5adc21f1c283704c32db_hd.jpg" data-rawwidth="640" data-rawheight="474" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic4.zhimg.com/v2-3047946f17ab5adc21f1c283704c32db_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-3047946f17ab5adc21f1c283704c32db_b.jpg" data-lazy-status="ok"></figure><p><b>优点：</b></p><ol><li>多主写入，无延迟复制，能保证数据强一致性；<br></li><li>有成熟的社区，有互联网公司在大规模的使用；<br></li><li>自动故障转移，自动添加、剔除节点；<br></li></ol><br><p><b>缺点：</b></p><ol><li>需要为原生MySQL节点打wsrep补丁<br></li><li>只支持innodb储存引擎<br></li><li>至少三节点；</li></ol><br><br><blockquote><b>2.5.3.	 POAXS</b></blockquote>Paxos 算法解决的问题是一个分布式系统如何就某个值（决议）达成一致。这个算法被认为是同类算法中最有效的。Paxos与MySQL相结合可以实现在分布式的MySQL数据的强一致性。常见架构如下：<figure><noscript><img src="https://pic3.zhimg.com/v2-47cfe3cfafa0ba925ac728ef0d238636_b.jpg" data-rawwidth="640" data-rawheight="450" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic3.zhimg.com/v2-47cfe3cfafa0ba925ac728ef0d238636_r.jpg"/></noscript><img src="https://pic3.zhimg.com/80/v2-47cfe3cfafa0ba925ac728ef0d238636_hd.jpg" data-rawwidth="640" data-rawheight="450" class="origin_image zh-lightbox-thumb lazy" width="640" data-original="https://pic3.zhimg.com/v2-47cfe3cfafa0ba925ac728ef0d238636_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-47cfe3cfafa0ba925ac728ef0d238636_b.jpg" data-lazy-status="ok"></figure><p><b>优点：</b></p><ol><li>多主写入，无延迟复制，能保证数据强一致性；<br></li><li>有成熟理论基础；<br></li><li>自动故障转移，自动添加、剔除节点；<br></li></ol><br><p><b>缺点：</b></p><ol><li>只支持innodb储存引擎<br></li><li>至少三节点；<br></li></ol><br><br><h2>3.	总结</h2><p>随着人们对数据一致性的要求不断的提高，越来越多的方法被尝试用来解决分布式数据一致性的问题，如MySQL自身的优化、MySQL集群架构的优化、Paxos、Raft、2PC算法的引入等等。</p><p>而使用分布式算法用来解决MySQL数据库数据一致性的问题的方法，也越来越被人们所接受，一系列成熟的产品如PhxSQL、MariaDB Galera Cluster、Percona XtraDB Cluster等越来越多的被大规模使用。</p><p>随着官方MySQL Group Replication的GA，使用分布式协议来解决数据一致性问题已经成为了主流的方向。期望越来越多优秀的解决方案被提出，MySQL高可用问题可以被更好的解决。</p><br><p><b>参考文献</b></p><br><p>[2015 OTN]彭立勋-DoubleBinlog方案.pdf</p><p>——————</p><br><h2>其他阅读推荐：</h2><a href="https://zhuanlan.zhihu.com/p/25080236" class="internal" data-za-detail-view-id="1043">我如何使用 Django + Vue.js 快速构建项目</a><a href="https://zhuanlan.zhihu.com/p/25478007" class="internal" data-za-detail-view-id="1043">一起学 Node.js | 使用 Express + MongoDB 搭建多人博客</a><br><p><b>本文由『UCloud存储研发团队』提供。</b><br></p><br><br><blockquote><p>关于作者：</p><p><b>王松磊，</b>现任职于UCloud，从事MySQL数据库内核研发工作。主要负责UCloud云数据库udb的内核故障排查工作以及数据库新特性的研发工作。<br></p></blockquote><br><blockquote><h2>福利时间</h2><p>如果你想亲自上手，在云上部署体验以上技术实践过程，大U为大家争取到了100元 UCloud云服务代金券，够大家免费使用1个月的1核/2G/20G数据盘云主机。</p><p>立即 <a href="https://link.zhihu.com/?target=https%3A//account.ucloud.cn/cas/register" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">注册UCloud</a>，在活动／邀请码一栏填入：zhihu-ucloud，即可获得代金券。</p><p>有需求的同学快去领代金券吧，有问题请添加UCloud运营小妹个人微信号：Surdur进行咨询。</p></blockquote><br><p>「UCloud机构号」将独家分享云计算领域的技术洞见、行业资讯以及一切你想知道的相关讯息。欢迎提问&amp;求关注 o(*////▽////*)q~<br></p><p>以上。</p></div></div><div class="ContentItem-time">编辑于 2017-06-08</div><div class="Post-topicsAndReviewer"><div class="TopicList Post-Topics"><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19550358&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19550358" target="_blank"><div class="Popover"><div id="Popover3-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover3-content">云计算</div></div></a></span></div><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19554128&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19554128" target="_blank"><div class="Popover"><div id="Popover4-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover4-content">MySQL</div></div></a></span></div><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19552067&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="//www.zhihu.com/topic/19552067" target="_blank"><div class="Popover"><div id="Popover5-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover5-content">数据库</div></div></a></span></div></div></div><div><div class="Sticky RichContent-actions is-fixed is-bottom" style="width: 690px; bottom: 0px; left: 207.5px;"><div class="ContentItem-actions" data-za-detail-view-path-module="BottomBar" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Post&quot;,&quot;id&quot;:&quot;25960208&quot;}}}"><span><button aria-label="赞同 315" type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 315</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button BottomActions-CommentBtn Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>9 条评论</button><div class="Popover ShareMenu"><div class="ShareMenu-toggler" id="Popover6-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover6-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button><div class="Post-ActionMenuButton"><div class="Popover"><div id="Popover7-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover7-content"><button type="button" class="Button Button--plain Button--withIcon Button--iconOnly"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"></path></svg></span></button></div></div></div></div></div><div class="Sticky--holder" style="position: static; top: auto; right: auto; bottom: 0px; left: 0px; display: block; float: none; margin: 0px 0px 10px; height: 54px;"></div></div></article>