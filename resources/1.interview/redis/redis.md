    1、什么是Redis？简述它的优缺点？

    Redis本质上是一个Key-Value类型的内存数据库，很像memcached，整个数据库统统加载在内存当中进行操作，定期通过异步操作把数据库数据flush到硬盘上进行保存。

    因为是纯内存操作，Redis的性能非常出色，每秒可以处理超过 10万次读写操作，是已知性能最快的Key-Value DB。

    Redis的出色之处不仅仅是性能，Redis最大的魅力是支持保存多种数据结构，此外单个value的最大限制是1GB，不像 memcached只能保存1MB的数据，因此Redis可以用来实现很多有用的功能。

    比方说用他的List来做FIFO双向链表，实现一个轻量级的高性 能消息队列服务，用他的Set可以做高性能的tag系统等等。

    另外Redis也可以对存入的Key-Value设置expire时间，因此也可以被当作一 个功能加强版的memcached来用。 Redis的主要缺点是数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，因此Redis适合的场景主要局限在较小数据量的高性能操作和运算上。

    2、Redis相比memcached有哪些优势？

    (1) memcached所有的值均是简单的字符串，redis作为其替代者，支持更为丰富的数据类型

    (2) redis的速度比memcached快很多

    (3) redis可以持久化其数据

    3、Redis支持哪几种数据类型？

    String、List、Set、Sorted Set、hashes

    4、Redis主要消耗什么物理资源？

    内存。

    5、Redis的全称是什么？

    Remote Dictionary Server。

    6、Redis有哪几种数据淘汰策略？

    noeviction:返回错误当内存限制达到并且客户端尝试执行会让更多内存被使用的命令（大部分的写入指令，但DEL和几个例外）

    allkeys-lru: 尝试回收最少使用的键（LRU），使得新添加的数据有空间存放。

    volatile-lru: 尝试回收最少使用的键（LRU），但仅限于在过期集合的键,使得新添加的数据有空间存放。

    allkeys-random: 回收随机的键使得新添加的数据有空间存放。

    volatile-random: 回收随机的键使得新添加的数据有空间存放，但仅限于在过期集合的键。

    volatile-ttl: 回收在过期集合的键，并且优先回收存活时间（TTL）较短的键,使得新添加的数据有空间存放。

    7、Redis官方为什么不提供Windows版本？

    因为目前Linux版本已经相当稳定，而且用户量很大，无需开发windows版本，反而会带来兼容性等问题。

    8、一个字符串类型的值能存储最大容量是多少？

    512M

    9、为什么Redis需要把所有数据放到内存中？

    Redis为了达到最快的读写速度将数据都读到内存中，并通过异步的方式将数据写入磁盘。

    所以redis具有快速和数据持久化的特征。如果不将数据放在内存中，磁盘I/O速度为严重影响redis的性能。

    在内存越来越便宜的今天，redis将会越来越受欢迎。 如果设置了最大使用的内存，则数据已有记录数达到内存限值后不能继续插入新值。

    10、Redis集群方案应该怎么做？都有哪些方案？

    1.codis。

    目前用的最多的集群方案，基本和twemproxy一致的效果，但它支持在 节点数量改变情况下，旧节点数据可恢复到新hash节点。

    2.redis cluster3.0自带的集群，特点在于他的分布式算法不是一致性hash，而是hash槽的概念，以及自身支持节点设置从节点。具体看官方文档介绍。

    3.在业务代码层实现，起几个毫无关联的redis实例，在代码层，对key 进行hash计算，然后去对应的redis实例操作数据。 这种方式对hash层代码要求比较高，考虑部分包括，节点失效后的替代算法方案，数据震荡后的自动脚本恢复，实例的监控，等等。

    11、Redis集群方案什么情况下会导致整个集群不可用？

    有A，B，C三个节点的集群,在没有复制模型的情况下,如果节点B失败了，那么整个集群就会以为缺少5501-11000这个范围的槽而不可用。

    12、MySQL里有2000w数据，redis中只存20w的数据，如何保证redis中的数据都是热点数据？

    redis内存数据集大小上升到一定大小的时候，就会施行数据淘汰策略。

    13、Redis有哪些适合的场景？

    （1）会话缓存（Session Cache）

    最常用的一种使用Redis的情景是会话缓存（session cache）。用Redis缓存会话比其他存储（如Memcached）的优势在于：Redis提供持久化。当维护一个不是严格要求一致性的缓存时，如果用户的购物车信息全部丢失，大部分人都会不高兴的，现在，他们还会这样吗？

    幸运的是，随着 Redis 这些年的改进，很容易找到怎么恰当的使用Redis来缓存会话的文档。甚至广为人知的商业平台Magento也提供Redis的插件。

    （2）全页缓存（FPC）

    除基本的会话token之外，Redis还提供很简便的FPC平台。回到一致性问题，即使重启了Redis实例，因为有磁盘的持久化，用户也不会看到页面加载速度的下降，这是一个极大改进，类似PHP本地FPC。

    再次以Magento为例，Magento提供一个插件来使用Redis作为全页缓存后端。

    此外，对WordPress的用户来说，Pantheon有一个非常好的插件 wp-redis，这个插件能帮助你以最快速度加载你曾浏览过的页面。

    （3）队列

    Reids在内存存储引擎领域的一大优点是提供 list 和 set 操作，这使得Redis能作为一个很好的消息队列平台来使用。Redis作为队列使用的操作，就类似于本地程序语言（如Python）对 list 的 push/pop 操作。

    如果你快速的在Google中搜索“Redis queues”，你马上就能找到大量的开源项目，这些项目的目的就是利用Redis创建非常好的后端工具，以满足各种队列需求。例如，Celery有一个后台就是使用Redis作为broker，你可以从这里去查看。

    （4）排行榜/计数器

    Redis在内存中对数字进行递增或递减的操作实现的非常好。集合（Set）和有序集合（Sorted Set）也使得我们在执行这些操作的时候变的非常简单，Redis只是正好提供了这两种数据结构。

    所以，我们要从排序集合中获取到排名最靠前的10个用户–我们称之为“user_scores”，我们只需要像下面一样执行即可：

    当然，这是假定你是根据你用户的分数做递增的排序。如果你想返回用户及用户的分数，你需要这样执行：

    ZRANGE user_scores 0 10 WITHSCORES

    Agora Games就是一个很好的例子，用Ruby实现的，它的排行榜就是使用Redis来存储数据的，你可以在这里看到。

    （5）发布/订阅

    最后（但肯定不是最不重要的）是Redis的发布/订阅功能。发布/订阅的使用场景确实非常多。我已看见人们在社交网络连接中使用，还可作为基于发布/订阅的脚本触发器，甚至用Redis的发布/订阅功能来建立聊天系统！

    14、Redis支持的Java客户端都有哪些？官方推荐用哪个？

    Redisson、Jedis、lettuce等等，官方推荐使用Redisson。

    15、Redis和Redisson有什么关系？

    Redisson是一个高级的分布式协调Redis客服端，能帮助用户在分布式环境中轻松实现一些Java的对象 (Bloom filter, BitSet, Set, SetMultimap, ScoredSortedSet, SortedSet, Map, ConcurrentMap, List, ListMultimap, Queue, BlockingQueue, Deque, BlockingDeque, Semaphore, Lock, ReadWriteLock, AtomicLong, CountDownLatch, Publish / Subscribe, HyperLogLog)。

    16、Jedis与Redisson对比有什么优缺点？

    Jedis是Redis的Java实现的客户端，其API提供了比较全面的Redis命令的支持；

    Redisson实现了分布式和可扩展的Java数据结构，和Jedis相比，功能较为简单，不支持字符串操作，不支持排序、事务、管道、分区等Redis特性。Redisson的宗旨是促进使用者对Redis的关注分离，从而让使用者能够将精力更集中地放在处理业务逻辑上。

    17、Redis如何设置密码及验证密码？

    设置密码：config set requirepass 123456

    授权密码：auth 123456

    18、说说Redis哈希槽的概念？

    Redis集群没有使用一致性hash,而是引入了哈希槽的概念，Redis集群有16384个哈希槽，每个key通过CRC16校验后对16384取模来决定放置哪个槽，集群的每个节点负责一部分hash槽。

    19、Redis集群的主从复制模型是怎样的？

    为了使在部分节点失败或者大部分节点无法通信的情况下集群仍然可用，所以集群使用了主从复制模型,每个节点都会有N-1个复制品.

    20、Redis集群会有写操作丢失吗？为什么？

    Redis并不能保证数据的强一致性，这意味这在实际中集群在特定的条件下可能会丢失写操作。

    21、Redis集群之间是如何复制的？

    异步复制

    22、Redis集群最大节点个数是多少？

    16384个。

    23、Redis集群如何选择数据库？

    Redis集群目前无法做数据库选择，默认在0数据库。

    24、怎么测试Redis的连通性？

    ping

    25、Redis中的管道有什么用？

    一次请求/响应服务器能实现处理新的请求即使旧的请求还未被响应。这样就可以将多个命令发送到服务器，而不用等待回复，最后在一个步骤中读取该答复。

    这就是管道（pipelining），是一种几十年来广泛使用的技术。例如许多POP3协议已经实现支持这个功能，大大加快了从服务器下载新邮件的过程。

    26、怎么理解Redis事务？

    事务是一个单独的隔离操作：事务中的所有命令都会序列化、按顺序地执行。事务在执行的过程中，不会被其他客户端发送来的命令请求所打断。

    事务是一个原子操作：事务中的命令要么全部被执行，要么全部都不执行。

    27、Redis事务相关的命令有哪几个？

    MULTI、EXEC、DISCARD、WATCH

    28、Redis key的过期时间和永久有效分别怎么设置？

    EXPIRE和PERSIST命令。

    29、Redis如何做内存优化？

    尽可能使用散列表（hashes），散列表（是说散列表里面存储的数少）使用的内存非常小，所以你应该尽可能的将你的数据模型抽象到一个散列表里面。

    比如你的web系统中有一个用户对象，不要为这个用户的名称，姓氏，邮箱，密码设置单独的key,而是应该把这个用户的所有信息存储到一张散列表里面。

    30、Redis回收进程如何工作的？

    一个客户端运行了新的命令，添加了新的数据。

    Redi检查内存使用情况，如果大于maxmemory的限制, 则根据设定好的策略进行回收。

    一个新的命令被执行，等等。

    所以我们不断地穿越内存限制的边界，通过不断达到边界然后不断地回收回到边界以下。

    如果一个命令的结果导致大量内存被使用（例如很大的集合的交集保存到一个新的键），不用多久内存限制就会被这个内存使用量超越。
